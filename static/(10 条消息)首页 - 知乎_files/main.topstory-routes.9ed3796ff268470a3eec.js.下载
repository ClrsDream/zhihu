webpackJsonp([5],{1003:function(e,t){},1004:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.parseHTML=t.convertFromHTML=t.convertToHTML=void 0;var o=n(1118),a=r(o),i=n(1128),s=r(i),c=n(945),u=r(c);t.convertToHTML=a.default,t.convertFromHTML=s.default,t.parseHTML=u.default},1005:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return u});var i=n(0),s=n.n(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),c(t,[{key:"handleEvent",value:function(e){e.stopPropagation()}},{key:"render",value:function(){return s.a.createElement("div",{onBeforeInput:this.handleEvent,onBlur:this.handleEvent,onCompositionEnd:this.handleEvent,onCompositionStart:this.handleEvent,onCopy:this.handleEvent,onCut:this.handleEvent,onDragEnd:this.handleEvent,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this.handleEvent,onDragStart:this.handleEvent,onDrop:this.handleEvent,onFocus:this.handleEvent,onInput:this.handleEvent,onKeyDown:this.handleEvent,onKeyPress:this.handleEvent,onKeyUp:this.handleEvent,onMouseUp:this.handleEvent,onPaste:this.handleEvent,onSelect:this.handleEvent,onClick:this.handleEvent},this.props.children)}}]),t}(s.a.Component)},1006:function(e,t,n){"use strict";var r=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,r){e.findEntityRanges(function(e){var n=e.getEntity();return null!==n&&t.includes(r.getEntity(n).getType())},n)}};t.a=r},1008:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var n=t.id,r=e.entities.roundtables,o=e.loading.local;return{roundtable:r[n],isLoading:Boolean(o["roundtable/"+n])}}function c(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=n(1),d=n.n(p),h=n(0),m=n.n(h),v=n(2),y=n.n(v),g=n(5),b=n(15),w=n(248),_=n(257),E=n(10),O=n(243),C=n(6),k=n.n(C),S=n(49),x=n(244),T=n(310),j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),A=function(e){function t(){var e,n,r,i;o(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.load=function(){var e=r.props,t=e.dispatch,n=e.id;t(Object(T.a)(n))},r.track=function(){var e=r.props.roundtable;r.hoverCardElement&&e&&(k.a.setModule(r.hoverCardElement,{module:"RoundtableItem"},{card:{content:{type:"Roundtable",token:e.id,item_num:e.questionsCount,follower_num:e.followers,publish_timestamp:1e3*e.stopTime}}}),k.a.trackCardShow(r.hoverCardElement))},r.handleOpen=function(){r.load(),r.track()},i=n,a(r,i)}return i(t,e),P(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.toggler,o=t.roundtable,a=t.id,i=t.isLoading,s=t.onRef,c=r(t,["toggler","roundtable","id","isLoading","onRef"]),u=o||{},l=u.name,f=u.type,p=u.description,d=u.guests,h=void 0===d?[]:d,v=u.activitiesCount,y=u.questionsCount,g=u.followers,C=u.logo,k=u.stopTime,T=u.isFollowing,P=h.length,A="/roundtable/"+a;return m.a.createElement(_.b,j({toggler:n,preventCloseOnTarget:!0,isLoading:i,onOpen:this.handleOpen,size:"large"},c,{onRef:function(t){s&&"function"==typeof s&&s(t),e.hoverCardElement=t}}),m.a.createElement(_.a,{title:m.a.createElement("a",{target:"_blank",href:"/roundtable/"+a},l),avatarUrl:C,attrInfo:m.a.createElement("div",null,m.a.createElement(E.a,{name:"time"}),Object(O.d)(k))}),p&&m.a.createElement("div",null,m.a.createElement("div",{className:"HoverCard-description"},p)),m.a.createElement("div",null,m.a.createElement(E.a,{name:"org"}),"组织机构",m.a.createElement("span",{className:"HoverCard-separate"}," | "),m.a.createElement("a",{href:"/topic/19793502"},"知乎圆桌")),P>0&&m.a.createElement("div",null,m.a.createElement(E.a,{name:"guests"}),"嘉宾",m.a.createElement("span",{className:"HoverCard-separate"}," | "),h.map(function(e,t){var n=e.urlToken,r=e.name,o=e.isOrg;return m.a.createElement(b.Link,{key:t,to:"/"+(o?"org":"people")+"/"+n},r,t<P-1&&"、")})),m.a.createElement("div",null,m.a.createElement(w.a,null,m.a.createElement(w.a.Item,{tag:S.a,preset:"plain",a:!0,to:A,name:"动态",value:v}),m.a.createElement(w.a.Item,{tag:S.a,preset:"plain",a:!0,to:A+"/question",name:"问题",value:y}),m.a.createElement(w.a.Item,{tag:S.a,preset:"plain",a:!0,to:A+"/followers",name:"关注者",value:g})),m.a.createElement("div",{className:"HoverCard-buttons"},m.a.createElement(x.a,{id:a,type:f,isFollowing:T,preset:"primary"}))))}}]),t}(h.Component),I=Object(g.connect)(s)(A),M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),R=function(e){function t(){return u(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),N(t,[{key:"render",value:function(){var e=this.props,t=e.roundtable,n=t.name,r=t.id,o=e.noHoverCard,a=e.style,i=e.className,s=e.children,u=c(e,["roundtable","noHoverCard","style","className","children"]),l=s||n;return o||(l=m.a.createElement(I,{toggler:l,id:r})),m.a.createElement("a",M({style:a,className:y()("RoundTableLink",i),href:"/roundtable/"+r},u),l)}}]),t}(h.Component);R.propTypes={roundtable:d.a.object.isRequired,noHoverCard:d.a.bool,style:d.a.object,className:d.a.string,children:d.a.node},R.defaultProps={noHoverCard:!1};t.a=R},1026:function(e,t,n){"use strict";var r=n(773),o=n(738),a=n(753),i=n(733),s=n(730),c=n(726),u=(n(774),n(740)),l=n(1041),f=c.List,p=c.Repeat,d={insertAtomicBlock:function(e,t,n){var c=e.getCurrentContent(),l=e.getSelection(),d=i.removeRange(c,l,"backward"),h=d.getSelectionAfter(),m=i.splitBlock(d,h),v=m.getSelectionAfter(),y=i.setBlockType(m,v,"atomic"),g=o.create({entity:t}),b=[new a({key:u(),type:"atomic",text:n,characterList:f(p(g,n.length))}),new a({key:u(),type:"unstyled",text:"",characterList:f()})],w=r.createFromArray(b),_=i.replaceWithFragment(y,v,w),E=_.merge({selectionBefore:l,selectionAfter:_.getSelectionAfter().set("hasFocus",!0)});return s.push(e,E,"insert-fragment")},moveAtomicBlock:function(e,t,n,r){var o=e.getCurrentContent(),a=e.getSelection(),c=void 0;if("before"===r||"after"===r){var u=o.getBlockForKey("before"===r?n.getStartKey():n.getEndKey());c=l(o,t,u,r)}else{var f=i.removeRange(o,n,"backward"),p=f.getSelectionAfter(),d=f.getBlockForKey(p.getFocusKey());if(0===p.getStartOffset())c=l(f,t,d,"before");else if(p.getEndOffset()===d.getLength())c=l(f,t,d,"after");else{var h=i.splitBlock(f,p),m=h.getSelectionAfter(),v=h.getBlockForKey(m.getFocusKey());c=l(h,t,v,"before")}}var y=c.merge({selectionBefore:a,selectionAfter:c.getSelectionAfter().set("hasFocus",!0)});return s.push(e,y,"move-block")}};e.exports=d},1027:function(e,t,n){"use strict";function r(e,t,n,r){var a=e.getBlockMap(),s=t.getStartKey(),c=t.getStartOffset(),u=t.getEndKey(),l=t.getEndOffset(),f=a.skipUntil(function(e,t){return t===s}).takeUntil(function(e,t){return t===u}).concat(i([[u,a.get(u)]])).map(function(e,t){var a,i;s===u?(a=c,i=l):(a=t===s?c:0,i=t===u?l:e.getLength());for(var f,p=e.getCharacterList();a<i;)f=p.get(a),p=p.set(a,r?o.applyStyle(f,n):o.removeStyle(f,n)),a++;return e.set("characterList",p)});return e.merge({blockMap:a.merge(f),selectionBefore:t,selectionAfter:t})}var o=n(738),a=n(726),i=a.Map,s={add:function(e,t,n){return r(e,t,n,!0)},remove:function(e,t,n){return r(e,t,n,!1)}};e.exports=s},1028:function(e,t,n){"use strict";var r={draft_killswitch_allow_nontextnodes:!1,draft_segmented_entities_behavior:!1};e.exports=r},1029:function(e,t,n){"use strict";function r(e,t,n){var r=e.getBlockMap(),i=t.getStartKey(),s=t.getStartOffset(),c=t.getEndKey(),u=t.getEndOffset(),l=r.skipUntil(function(e,t){return t===i}).takeUntil(function(e,t){return t===c}).toOrderedMap().merge(o.OrderedMap([[c,r.get(c)]])).map(function(e,t){var r=t===i?s:0,o=t===c?u:e.getLength();return a(e,r,o,n)});return e.merge({blockMap:r.merge(l),selectionBefore:t,selectionAfter:t})}var o=n(726),a=n(1030);e.exports=r},1030:function(e,t,n){"use strict";function r(e,t,n,r){for(var a=e.getCharacterList();t<n;)a=a.set(t,o.applyEntity(a.get(t),r)),t++;return e.set("characterList",a)}var o=n(738);e.exports=r},1031:function(e,t,n){"use strict";function r(e,t,n,r,a){var i=r.getStartOffset(),s=r.getEndOffset(),c=t.getEntityAt(i),u=n.getEntityAt(s-1);if(!c&&!u)return r;var l=r;if(c&&c===u)l=o(e,t,l,a,c,!0,!0);else if(c&&u){var f=o(e,t,l,a,c,!1,!0),p=o(e,n,l,a,u,!1,!1);l=l.merge({anchorOffset:f.getAnchorOffset(),focusOffset:p.getFocusOffset(),isBackward:!1})}else if(c){var d=o(e,t,l,a,c,!1,!0);l=l.merge({anchorOffset:d.getStartOffset(),isBackward:!1})}else if(u){var h=o(e,n,l,a,u,!1,!1);l=l.merge({focusOffset:h.getEndOffset(),isBackward:!1})}return l}function o(e,t,n,r,o,c,u){var l=n.getStartOffset(),f=n.getEndOffset(),p=e.__get(o),d=p.getMutability(),h=u?l:f;if("MUTABLE"===d)return n;var m=i(t,o).filter(function(e){return h<=e.end&&h>=e.start});1!=m.length&&s(!1);var v=m[0];if("IMMUTABLE"===d)return n.merge({anchorOffset:v.start,focusOffset:v.end,isBackward:!1});c||(u?f=v.end:l=v.start);var y=a.getRemovalRange(l,f,t.getText().slice(v.start,v.end),v.start,r);return n.merge({anchorOffset:y.start,focusOffset:y.end,isBackward:!1})}var a=n(1032),i=n(1033),s=n(729);e.exports=r},1032:function(e,t,n){"use strict";var r={getRemovalRange:function(e,t,n,r,o){var a=n.split(" ");a=a.map(function(e,t){if("forward"===o){if(t>0)return" "+e}else if(t<a.length-1)return e+" ";return e});for(var i,s,c=r,u=null,l=null,f=0;f<a.length;f++){if(s=a[f],i=c+s.length,e<i&&c<t)null!==u?l=i:(u=c,l=i);else if(null!==u)break;c=i}var p=r+n.length,d=u===r,h=l===p;return(!d&&h||d&&!h)&&("forward"===o?l!==p&&l++:u!==r&&u--),{start:u,end:l}}};e.exports=r},1033:function(e,t,n){"use strict";function r(e,t){var n=[];return e.findEntityRanges(function(e){return e.getEntity()===t},function(e,t){n.push({start:e,end:t})}),n.length||o(!1),n}var o=n(729);e.exports=r},1034:function(e,t,n){"use strict";function r(e,t,n){t.isCollapsed()||s(!1);var r,c,u=t.getStartKey(),l=t.getStartOffset(),f=e.getBlockMap(),p=n.size;if(1===p){var d=f.get(u),h=n.first(),m=d.getText(),v=d.getCharacterList(),y=d.merge({text:m.slice(0,l)+h.getText()+m.slice(l),characterList:i(v,h.getCharacterList(),l),data:h.getData()});return r=u,c=l+h.getText().length,e.merge({blockMap:f.set(u,y),selectionBefore:t,selectionAfter:t.merge({anchorKey:r,anchorOffset:c,focusKey:r,focusOffset:c,isBackward:!1})})}var g=[];return e.getBlockMap().forEach(function(e,t){if(t!==u)return void g.push(e);var o=e.getText(),i=e.getCharacterList(),s=o.length,c=o.slice(0,l),f=i.slice(0,l),d=n.first(),h=e.merge({text:c+d.getText(),characterList:f.concat(d.getCharacterList()),type:c?e.getType():d.getType(),data:d.getData()});g.push(h),n.slice(1,p-1).forEach(function(e){g.push(e.set("key",a()))});var m=o.slice(l,s),v=i.slice(l,s),y=n.last();r=a();var b=y.merge({key:r,text:y.getText()+m,characterList:y.getCharacterList().concat(v),data:y.getData()});g.push(b)}),c=n.last().getLength(),e.merge({blockMap:o.createFromArray(g),selectionBefore:t,selectionAfter:t.merge({anchorKey:r,anchorOffset:c,focusKey:r,focusOffset:c,isBackward:!1})})}var o=n(773),a=n(740),i=n(916),s=n(729);e.exports=r},1035:function(e,t,n){"use strict";function r(e,t,n,r){t.isCollapsed()||i(!1);var o=n.length;if(!o)return e;var c=e.getBlockMap(),u=t.getStartKey(),l=t.getStartOffset(),f=c.get(u),p=f.getText(),d=f.merge({text:p.slice(0,l)+n+p.slice(l,f.getLength()),characterList:a(f.getCharacterList(),s(r,o).toList(),l)}),h=l+o;return e.merge({blockMap:c.set(u,d),selectionAfter:t.merge({anchorOffset:h,focusOffset:h})})}var o=n(726),a=n(916),i=n(729),s=o.Repeat;e.exports=r},1036:function(e,t,n){"use strict";function r(e,t,n){var r=t.getStartKey(),o=t.getEndKey(),i=e.getBlockMap(),s=i.toSeq().skipUntil(function(e,t){return t===r}).takeUntil(function(e,t){return t===o}).concat(a([[o,i.get(o)]])).map(n);return e.merge({blockMap:i.merge(s),selectionBefore:t,selectionAfter:t})}var o=n(726),a=o.Map;e.exports=r},1037:function(e,t,n){"use strict";function r(e,t){if(t.isCollapsed())return e;var n,r=e.getBlockMap(),i=t.getStartKey(),s=t.getStartOffset(),c=t.getEndKey(),u=t.getEndOffset(),l=r.get(i),f=r.get(c);n=l===f?o(l.getCharacterList(),s,u):l.getCharacterList().slice(0,s).concat(f.getCharacterList().slice(u));var p=l.merge({text:l.getText().slice(0,s)+f.getText().slice(u),characterList:n}),d=r.toSeq().skipUntil(function(e,t){return t===i}).takeUntil(function(e,t){return t===c}).concat(a.Map([[c,null]])).map(function(e,t){return t===i?p:null});return r=r.merge(d).filter(function(e){return!!e}),e.merge({blockMap:r,selectionBefore:t,selectionAfter:t.merge({anchorKey:i,anchorOffset:s,focusKey:i,focusOffset:s,isBackward:!1})})}function o(e,t,n){if(0===t)for(;t<n;)e=e.shift(),t++;else if(n===e.count())for(;n>t;)e=e.pop(),n--;else{var r=e.slice(0,t),o=e.slice(n);e=r.concat(o).toList()}return e}var a=n(726);e.exports=r},1038:function(e,t,n){"use strict";function r(e,t){t.isCollapsed()||i(!1);var n=t.getAnchorKey(),r=t.getAnchorOffset(),o=e.getBlockMap(),c=o.get(n),u=c.getText(),l=c.getCharacterList(),f=c.merge({text:u.slice(0,r),characterList:l.slice(0,r)}),p=a(),d=f.merge({key:p,text:u.slice(r),characterList:l.slice(r),data:s()}),h=o.toSeq().takeUntil(function(e){return e===c}),m=o.toSeq().skipUntil(function(e){return e===c}).rest(),v=h.concat([[f.getKey(),f],[d.getKey(),d]],m).toOrderedMap();return e.merge({blockMap:v,selectionBefore:t,selectionAfter:t.merge({anchorKey:p,anchorOffset:0,focusKey:p,focusOffset:0,isBackward:!1})})}var o=n(726),a=n(740),i=n(729),s=o.Map;e.exports=r},1039:function(e,t,n){"use strict";var r,o=n(726),a=n(1040),i=n(737),s=o.OrderedMap,c={getDirectionMap:function(e,t){r?r.reset():r=new a;var n=e.getBlockMap(),c=n.valueSeq().map(function(e){return i(r).getDirection(e.getText())}),u=s(n.keySeq().zip(c));return null!=t&&o.is(t,u)?t:u}};e.exports=c},1040:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(919),a=n(837),i=n(729),s=function(){function e(t){r(this,e),t?a.isStrong(t)||i(!1):t=a.getGlobalDir(),this._defaultDir=t,this.reset()}return e.prototype.reset=function(){this._lastDir=this._defaultDir},e.prototype.getDirection=function(e){return this._lastDir=o.getDirection(e,this._lastDir),this._lastDir},e}();e.exports=s},1041:function(e,t,n){"use strict";function r(e,t,n,r){t.getKey()===n.getKey()&&o(!1),"replace"===r&&o(!1);var a=n.getKey(),i=e.getBlockBefore(a),s=e.getBlockAfter(a),c=e.getBlockMap(),u=c.delete(t.getKey()),l=u.toSeq().takeUntil(function(e){return e===n}),f=u.toSeq().skipUntil(function(e){return e===n}).skip(1),p=void 0;return"before"===r?(i&&i.getKey()===t.getKey()&&o(!1),p=l.concat([[t.getKey(),t],[n.getKey(),n]],f).toOrderedMap()):"after"===r&&(s&&s.getKey()===t.getKey()&&o(!1),p=l.concat([[n.getKey(),n],[t.getKey(),t]],f).toOrderedMap()),e.merge({blockMap:p,selectionBefore:e.getSelectionAfter(),selectionAfter:e.getSelectionAfter().merge({anchorKey:t.getKey(),focusKey:t.getKey()})})}var o=n(729);e.exports=r},1042:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n){for(var r=t;r<n;r++)if(null!=e[r])return!1;return!0}function a(e,t,n,r){for(var o=t;o<n;o++)e[o]=r}var i=n(726),s=i.List,c=function(){function e(t){r(this,e),this._decorators=t.slice()}return e.prototype.getDecorations=function(e,t){var n=Array(e.getText().length).fill(null);return this._decorators.forEach(function(r,i){var s=0;(0,r.strategy)(e,function(e,t){o(n,e,t)&&(a(n,e,t,i+"."+s),s++)},t)}),s(n)},e.prototype.getComponentForKey=function(e){var t=parseInt(e.split(".")[0],10);return this._decorators[t].component},e.prototype.getPropsForKey=function(e){var t=parseInt(e.split(".")[0],10);return this._decorators[t].props},e}();e.exports=c},1043:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(144),s=i||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=n(838),u=n(920),l=n(1044),f=n(1045),p=n(1063),d=n(1066),h=n(1099),m=n(730),v=n(0),y=n(12),g=n(924),b=n(842),w=n(741),_=n(775),E=n(266),O=n(740),C=n(937),k=n(843),S=n(729),x=n(737),T=w.isBrowser("IE"),j=!T,P={edit:d,composite:l,drag:p,cut:null,render:null},A=function(e){function t(n){r(this,t);var a=o(this,e.call(this,n));return a._blockSelectEvents=!1,a._clipboard=null,a._handler=null,a._dragCount=0,a._editorKey=n.editorKey||O(),a._placeholderAccessibilityID="placeholder-"+a._editorKey,a._latestEditorState=n.editorState,a._latestCommittedEditorState=n.editorState,a._onBeforeInput=a._buildHandler("onBeforeInput"),a._onBlur=a._buildHandler("onBlur"),a._onCharacterData=a._buildHandler("onCharacterData"),a._onCompositionEnd=a._buildHandler("onCompositionEnd"),a._onCompositionStart=a._buildHandler("onCompositionStart"),a._onCopy=a._buildHandler("onCopy"),a._onCut=a._buildHandler("onCut"),a._onDragEnd=a._buildHandler("onDragEnd"),a._onDragOver=a._buildHandler("onDragOver"),a._onDragStart=a._buildHandler("onDragStart"),a._onDrop=a._buildHandler("onDrop"),a._onInput=a._buildHandler("onInput"),a._onFocus=a._buildHandler("onFocus"),a._onKeyDown=a._buildHandler("onKeyDown"),a._onKeyPress=a._buildHandler("onKeyPress"),a._onKeyUp=a._buildHandler("onKeyUp"),a._onMouseDown=a._buildHandler("onMouseDown"),a._onMouseUp=a._buildHandler("onMouseUp"),a._onPaste=a._buildHandler("onPaste"),a._onSelect=a._buildHandler("onSelect"),a.focus=a._focus.bind(a),a.blur=a._blur.bind(a),a.setMode=a._setMode.bind(a),a.exitCurrentMode=a._exitCurrentMode.bind(a),a.restoreEditorDOM=a._restoreEditorDOM.bind(a),a.setClipboard=a._setClipboard.bind(a),a.getClipboard=a._getClipboard.bind(a),a.getEditorKey=function(){return a._editorKey},a.update=a._update.bind(a),a.onDragEnter=a._onDragEnter.bind(a),a.onDragLeave=a._onDragLeave.bind(a),a.state={contentsKey:0},a}return a(t,e),t.prototype._buildHandler=function(e){var t=this;return function(n){if(!t.props.readOnly){var r=t._handler&&t._handler[e];r&&r(t,n)}}},t.prototype._showPlaceholder=function(){return!!this.props.placeholder&&!this.props.editorState.isInCompositionMode()&&!this.props.editorState.getCurrentContent().hasText()},t.prototype._renderPlaceholder=function(){return this._showPlaceholder()?v.createElement(h,{text:x(this.props.placeholder),editorState:this.props.editorState,textAlignment:this.props.textAlignment,accessibilityID:this._placeholderAccessibilityID}):null},t.prototype.render=function(){var e=this.props,t=e.readOnly,n=e.textAlignment,r=_({"DraftEditor/root":!0,"DraftEditor/alignLeft":"left"===n,"DraftEditor/alignRight":"right"===n,"DraftEditor/alignCenter":"center"===n}),o={outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},a=this.props.role||"textbox",i="combobox"===a?!!this.props.ariaExpanded:null;return v.createElement("div",{className:r},this._renderPlaceholder(),v.createElement("div",{className:_("DraftEditor/editorContainer"),ref:"editorContainer"},v.createElement("div",{"aria-activedescendant":t?null:this.props.ariaActiveDescendantID,"aria-autocomplete":t?null:this.props.ariaAutoComplete,"aria-controls":t?null:this.props.ariaControls,"aria-describedby":this._showPlaceholder()?this._placeholderAccessibilityID:null,"aria-expanded":t?null:i,"aria-label":this.props.ariaLabel,"aria-multiline":this.props.ariaMultiline,autoCapitalize:this.props.autoCapitalize,autoComplete:this.props.autoComplete,autoCorrect:this.props.autoCorrect,className:_({notranslate:!t,"public/DraftEditor/content":!0}),contentEditable:!t,"data-testid":this.props.webDriverTestID,onBeforeInput:this._onBeforeInput,onBlur:this._onBlur,onCompositionEnd:this._onCompositionEnd,onCompositionStart:this._onCompositionStart,onCopy:this._onCopy,onCut:this._onCut,onDragEnd:this._onDragEnd,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this._onDragOver,onDragStart:this._onDragStart,onDrop:this._onDrop,onFocus:this._onFocus,onInput:this._onInput,onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onKeyUp:this._onKeyUp,onMouseUp:this._onMouseUp,onPaste:this._onPaste,onSelect:this._onSelect,ref:"editor",role:t?null:a,spellCheck:j&&this.props.spellCheck,style:o,suppressContentEditableWarning:!0,tabIndex:this.props.tabIndex},v.createElement(f,{blockRenderMap:this.props.blockRenderMap,blockRendererFn:this.props.blockRendererFn,blockStyleFn:this.props.blockStyleFn,customStyleMap:s({},u,this.props.customStyleMap),customStyleFn:this.props.customStyleFn,editorKey:this._editorKey,editorState:this.props.editorState,key:"contents"+this.state.contentsKey,textDirectionality:this.props.textDirectionality}))))},t.prototype.componentDidMount=function(){this.setMode("edit"),T&&document.execCommand("AutoUrlDetect",!1,!1)},t.prototype.componentWillUpdate=function(e){this._blockSelectEvents=!0,this._latestEditorState=e.editorState},t.prototype.componentDidUpdate=function(){this._blockSelectEvents=!1,this._latestCommittedEditorState=this.props.editorState},t.prototype._focus=function(e){var t=this.props.editorState,n=t.getSelection().getHasFocus(),r=y.findDOMNode(this.refs.editor),o=b.getScrollParent(r),a=e||k(o),i=a.x,s=a.y;r instanceof HTMLElement||S(!1),r.focus(),o===window?window.scrollTo(i,s):g.setTop(o,s),n||this.update(m.forceSelection(t,t.getSelection()))},t.prototype._blur=function(){var e=y.findDOMNode(this.refs.editor);e instanceof HTMLElement||S(!1),e.blur()},t.prototype._setMode=function(e){this._handler=P[e]},t.prototype._exitCurrentMode=function(){this.setMode("edit")},t.prototype._restoreEditorDOM=function(e){var t=this;this.setState({contentsKey:this.state.contentsKey+1},function(){t._focus(e)})},t.prototype._setClipboard=function(e){this._clipboard=e},t.prototype._getClipboard=function(){return this._clipboard},t.prototype._update=function(e){this._latestEditorState=e,this.props.onChange(e)},t.prototype._onDragEnter=function(){this._dragCount++},t.prototype._onDragLeave=function(){0===--this._dragCount&&this.exitCurrentMode()},t}(v.Component);A.defaultProps={blockRenderMap:c,blockRendererFn:E.thatReturnsNull,blockStyleFn:E.thatReturns(""),keyBindingFn:C,readOnly:!1,spellCheck:!1,stripPastedStyles:!1},e.exports=A},1044:function(e,t,n){"use strict";var r=n(733),o=n(730),a=n(839),i=n(840),s=n(921),c=!1,u=!1,l="",f={onBeforeInput:function(e,t){l=(l||"")+t.data},onCompositionStart:function(e){u=!0},onCompositionEnd:function(e){c=!1,u=!1,setTimeout(function(){c||f.resolveComposition(e)},20)},onKeyDown:function(e,t){if(!u)return f.resolveComposition(e),void e._onKeyDown(t);t.which!==a.RIGHT&&t.which!==a.LEFT||t.preventDefault()},onKeyPress:function(e,t){t.which===a.RETURN&&t.preventDefault()},resolveComposition:function(e){if(!u){c=!0;var t=l;l="";var n=o.set(e._latestEditorState,{inCompositionMode:!1}),a=n.getCurrentInlineStyle(),f=i(n.getCurrentContent(),n.getSelection()),p=!t||s(n)||a.size>0||null!==f;if(p&&e.restoreEditorDOM(),e.exitCurrentMode(),t){var d=r.replaceText(n.getCurrentContent(),n.getSelection(),t,a,f);return void e.update(o.push(n,d,"insert-characters"))}p&&e.update(o.set(n,{nativelyRenderedContent:null,forceSelection:!0}))}}};e.exports=f},1045:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t,n,r){return p({"public/DraftStyleDefault/unorderedListItem":"unordered-list-item"===e,"public/DraftStyleDefault/orderedListItem":"ordered-list-item"===e,"public/DraftStyleDefault/reset":n,"public/DraftStyleDefault/depth0":0===t,"public/DraftStyleDefault/depth1":1===t,"public/DraftStyleDefault/depth2":2===t,"public/DraftStyleDefault/depth3":3===t,"public/DraftStyleDefault/depth4":4===t,"public/DraftStyleDefault/listLTR":"LTR"===r,"public/DraftStyleDefault/listRTL":"RTL"===r})}var s=n(144),c=s||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(922),l=n(798),f=(n(730),n(0)),p=n(775),d=n(1062),h=n(737),m=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.shouldComponentUpdate=function(e){var t=this.props.editorState,n=e.editorState;if(t.getDirectionMap()!==n.getDirectionMap())return!0;if(t.getSelection().getHasFocus()!==n.getSelection().getHasFocus())return!0;var r=n.getNativelyRenderedContent(),o=t.isInCompositionMode(),a=n.isInCompositionMode();if(t===n||null!==r&&n.getCurrentContent()===r||o&&a)return!1;var i=t.getCurrentContent(),s=n.getCurrentContent(),c=t.getDecorator(),u=n.getDecorator();return o!==a||i!==s||c!==u||n.mustForceSelection()},t.prototype.render=function(){for(var e=this.props,t=e.blockRenderMap,n=e.blockRendererFn,r=e.customStyleMap,o=e.customStyleFn,a=e.editorState,s=a.getCurrentContent(),p=a.getSelection(),m=a.mustForceSelection(),v=a.getDecorator(),y=h(a.getDirectionMap()),g=s.getBlocksAsArray(),b=[],w=null,_=null,E=0;E<g.length;E++){var O=g[E],C=O.getKey(),k=O.getType(),S=n(O),x=void 0,T=void 0,j=void 0;S&&(x=S.component,T=S.props,j=S.editable);var P=this.props.textDirectionality,A=P||y.get(C),I=l.encode(C,0,0),M={contentState:s,block:O,blockProps:T,customStyleMap:r,customStyleFn:o,decorator:v,direction:A,forceSelection:m,key:C,offsetKey:I,selection:p,tree:a.getBlockTree(C)},N=t.get(k)||t.get("unstyled"),R=N.wrapper,D=N.element||t.get("unstyled").element,L=O.getDepth(),F=this.props.blockStyleFn(O);if("li"===D){F=d(F,i(k,L,_!==R||null===w||L>w,A))}var U=x||u,B={className:F,"data-block":!0,"data-editor":this.props.editorKey,"data-offset-key":I,key:C};void 0!==j&&(B=c({},B,{contentEditable:j,suppressContentEditableWarning:!0}));var z=f.createElement(D,B,f.createElement(U,M));b.push({block:z,wrapperTemplate:R,key:C,offsetKey:I}),w=R?O.getDepth():null,_=R}for(var K=[],q=0;q<b.length;){var H=b[q];if(H.wrapperTemplate){var V=[];do{V.push(b[q].block),q++}while(q<b.length&&b[q].wrapperTemplate===H.wrapperTemplate);var W=f.cloneElement(H.wrapperTemplate,{key:H.key+"-wrap","data-offset-key":H.offsetKey},V);K.push(W)}else K.push(H.block),q++}return f.createElement("div",{"data-contents":"true"},K)},t}(f.Component);e.exports=m},1046:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(144),s=(n(753),n(1047)),c=n(0),u=n(12),l=n(729),f=n(1053),p=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype._setSelection=function(){var e=this.props.selection;if(null!=e&&e.getHasFocus()){var t=this.props,n=t.block,r=t.start,o=t.text,a=n.getKey(),i=r+o.length;if(e.hasEdgeWithin(a,r,i)){var s=u.findDOMNode(this);s||l(!1);var c=s.firstChild;c||l(!1);var p=void 0;c.nodeType===Node.TEXT_NODE?p=c:"BR"===c.tagName?p=s:(p=c.firstChild)||l(!1),f(e,p,a,r,i)}}},t.prototype.shouldComponentUpdate=function(e){var t=u.findDOMNode(this.refs.leaf);return t||l(!1),t.textContent!==e.text||e.styleSet!==this.props.styleSet||e.forceSelection},t.prototype.componentDidUpdate=function(){this._setSelection()},t.prototype.componentDidMount=function(){this._setSelection()},t.prototype.render=function(){var e=this.props.block,t=this.props.text;t.endsWith("\n")&&this.props.isLast&&(t+="\n");var n=this.props,r=n.customStyleMap,o=n.customStyleFn,a=n.offsetKey,u=n.styleSet,l=u.reduce(function(e,t){var n={},o=r[t];return void 0!==o&&e.textDecoration!==o.textDecoration&&(n.textDecoration=[e.textDecoration,o.textDecoration].join(" ").trim()),i(e,o,n)},{});if(o){var f=o(u,e);l=i(l,f)}return c.createElement("span",{"data-offset-key":a,ref:"leaf",style:l},c.createElement(s,null,t))},t}(c.Component);e.exports=p},1047:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return f?"\n"===e.textContent:"BR"===e.tagName}var s=n(0),c=n(12),u=n(741),l=n(729),f=u.isBrowser("IE <= 11"),p=f?s.createElement("span",{key:"A","data-text":"true"},"\n"):s.createElement("br",{key:"A","data-text":"true"}),d=f?s.createElement("span",{key:"B","data-text":"true"},"\n"):s.createElement("br",{key:"B","data-text":"true"}),h=function(e){function t(n){r(this,t);var a=o(this,e.call(this,n));return a._forceFlag=!1,a}return a(t,e),t.prototype.shouldComponentUpdate=function(e){var t=c.findDOMNode(this),n=""===e.children;return t instanceof Element||l(!1),n?!i(t):t.textContent!==e.children},t.prototype.componentWillUpdate=function(){this._forceFlag=!this._forceFlag},t.prototype.render=function(){return""===this.props.children?this._forceFlag?p:d:s.createElement("span",{key:this._forceFlag?"A":"B","data-text":"true"},this.props.children)},t}(s.Component);e.exports=h},1048:function(e,t,n){"use strict";var r=n(1049),o="Unknown",a={"Mac OS":"Mac OS X"},i=new r,s=i.getResult(),c=function(e){if(!e)return{major:"",minor:""};var t=e.split(".");return{major:t[0],minor:t[1]}}(s.browser.version),u={browserArchitecture:s.cpu.architecture||o,browserFullVersion:s.browser.version||o,browserMinorVersion:c.minor||o,browserName:s.browser.name||o,browserVersion:s.browser.major||o,deviceName:s.device.model||o,engineName:s.engine.name||o,engineVersion:s.engine.version||o,platformArchitecture:s.cpu.architecture||o,platformName:function(e){return a[e]||e}(s.os.name)||o,platformVersion:s.os.version||o,platformFullVersion:s.os.version||o};e.exports=u},1049:function(e,t,n){var r;!function(o,a){"use strict";var i="model",s="name",c="type",u="vendor",l="version",f="mobile",p="tablet",d={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},h={rgx:function(){for(var e,t,n,r,o,a,i,s=0,c=arguments;s<c.length&&!a;){var u=c[s],l=c[s+1];if(void 0===e){e={};for(r in l)l.hasOwnProperty(r)&&(o=l[r],"object"==typeof o?e[o[0]]=void 0:e[o]=void 0)}for(t=n=0;t<u.length&&!a;)if(a=u[t++].exec(this.getUA()))for(r=0;r<l.length;r++)i=a[++n],o=l[r],"object"==typeof o&&o.length>0?2==o.length?"function"==typeof o[1]?e[o[0]]=o[1].call(this,i):e[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?e[o[0]]=i?i.replace(o[1],o[2]):void 0:e[o[0]]=i?o[1].call(this,i,o[2]):void 0:4==o.length&&(e[o[0]]=i?o[3].call(this,i.replace(o[1],o[2])):void 0):e[o]=i||void 0;s+=2}return e},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(d.has(t[n][r],e))return"?"===n?void 0:n}else if(d.has(t[n],e))return"?"===n?void 0:n;return e}},m={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},v={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[s,l],[/(opios)[\/\s]+([\w\.]+)/i],[[s,"Opera Mini"],l],[/\s(opr)\/([\w\.]+)/i],[[s,"Opera"],l],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[s,l],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[s,"IE"],l],[/(edge)\/((\d+)?[\w\.]+)/i],[s,l],[/(yabrowser)\/([\w\.]+)/i],[[s,"Yandex"],l],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],l],[/(micromessenger)\/([\w\.]+)/i],[[s,"WeChat"],l],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[l,[s,"MIUI Browser"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[s,/(.+)/,"$1 WebView"],l],[/android.+samsungbrowser\/([\w\.]+)/i,/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[l,[s,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[s,l],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/juc.+(ucweb)[\/\s]?([\w\.]+)/i],[[s,"UCBrowser"],l],[/(dolfin)\/([\w\.]+)/i],[[s,"Dolphin"],l],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[s,"Chrome"],l],[/;fbav\/([\w\.]+);/i],[l,[s,"Facebook"]],[/fxios\/([\w\.-]+)/i],[l,[s,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[l,[s,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[l,s],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[s,[l,h.str,m.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[s,l],[/(navigator|netscape)\/([\w\.-]+)/i],[[s,"Netscape"],l],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[s,l]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",d.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",d.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",d.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[i,u,[c,p]],[/applecoremedia\/[\w\.]+ \((ipad)/],[i,[u,"Apple"],[c,p]],[/(apple\s{0,1}tv)/i],[[i,"Apple TV"],[u,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[u,i,[c,p]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[i,[u,"Amazon"],[c,p]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[i,h.str,m.device.amazon.model],[u,"Amazon"],[c,f]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[i,u,[c,f]],[/\((ip[honed|\s\w*]+);/i],[i,[u,"Apple"],[c,f]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[u,i,[c,f]],[/\(bb10;\s(\w+)/i],[i,[u,"BlackBerry"],[c,f]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[i,[u,"Asus"],[c,p]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[u,"Sony"],[i,"Xperia Tablet"],[c,p]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[u,"Sony"],[i,"Xperia Phone"],[c,f]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[u,i,[c,"console"]],[/android.+;\s(shield)\sbuild/i],[i,[u,"Nvidia"],[c,"console"]],[/(playstation\s[34portablevi]+)/i],[i,[u,"Sony"],[c,"console"]],[/(sprint\s(\w+))/i],[[u,h.str,m.device.sprint.vendor],[i,h.str,m.device.sprint.model],[c,f]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[u,i,[c,p]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[u,[i,/_/g," "],[c,f]],[/(nexus\s9)/i],[i,[u,"HTC"],[c,p]],[/(nexus\s6p)/i],[i,[u,"Huawei"],[c,f]],[/(microsoft);\s(lumia[\s\w]+)/i],[u,i,[c,f]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[i,[u,"Microsoft"],[c,"console"]],[/(kin\.[onetw]{3})/i],[[i,/\./g," "],[u,"Microsoft"],[c,f]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[i,[u,"Motorola"],[c,f]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[i,[u,"Motorola"],[c,p]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[u,d.trim],[i,d.trim],[c,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[i,/^/,"SmartTV"],[u,"Samsung"],[c,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[i,[u,"Sharp"],[c,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[u,"Samsung"],i,[c,p]],[/smart-tv.+(samsung)/i],[u,[c,"smarttv"],i],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[u,"Samsung"],i,[c,f]],[/sie-(\w+)*/i],[i,[u,"Siemens"],[c,f]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[u,"Nokia"],i,[c,f]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[i,[u,"Acer"],[c,p]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[u,"LG"],i,[c,p]],[/(lg) netcast\.tv/i],[u,i,[c,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[i,[u,"LG"],[c,f]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[i,[u,"Lenovo"],[c,p]],[/linux;.+((jolla));/i],[u,i,[c,f]],[/((pebble))app\/[\d\.]+\s/i],[u,i,[c,"wearable"]],[/android.+;\s(glass)\s\d/i],[i,[u,"Google"],[c,"wearable"]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[i,/_/g," "],[u,"Xiaomi"],[c,f]],[/android.+a000(1)\s+build/i],[i,[u,"OnePlus"],[c,f]],[/\s(tablet)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[c,d.lowerize],u,i]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[l,[s,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[s,l],[/rv\:([\w\.]+).*(gecko)/i],[l,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[s,l],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[s,[l,h.str,m.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[s,"Windows"],[l,h.str,m.os.windows.version]],[/\((bb)(10);/i],[[s,"BlackBerry"],l],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[s,l],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[s,"Symbian"],l],[/\((series40);/i],[s],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[s,"Firefox OS"],l],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[s,l],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[s,"Chromium OS"],l],[/(sunos)\s?([\w\.]+\d)*/i],[[s,"Solaris"],l],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[s,l],[/(haiku)\s(\w+)/i],[s,l],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[s,"iOS"],[l,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[s,"Mac OS"],[l,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[s,l]]},y=function(e,t){if(!(this instanceof y))return new y(e,t).getResult();var n=e||(o&&o.navigator&&o.navigator.userAgent?o.navigator.userAgent:""),r=t?d.extend(v,t):v;return this.getBrowser=function(){var e=h.rgx.apply(this,r.browser);return e.major=d.major(e.version),e},this.getCPU=function(){return h.rgx.apply(this,r.cpu)},this.getDevice=function(){return h.rgx.apply(this,r.device)},this.getEngine=function(){return h.rgx.apply(this,r.engine)},this.getOS=function(){return h.rgx.apply(this,r.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};y.VERSION="0.7.12",y.BROWSER={NAME:s,MAJOR:"major",VERSION:l},y.CPU={ARCHITECTURE:"architecture"},y.DEVICE={MODEL:i,VENDOR:u,TYPE:c,CONSOLE:"console",MOBILE:f,SMARTTV:"smarttv",TABLET:p,WEARABLE:"wearable",EMBEDDED:"embedded"},y.ENGINE={NAME:s,VERSION:l},y.OS={NAME:s,VERSION:l},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=y),t.UAParser=y):n(1050)?void 0!==(r=function(){return y}.call(t,n,t,e))&&(e.exports=r):o.UAParser=y;var g=o.jQuery||o.Zepto;if(void 0!==g){var b=new y;g.ua=b.getResult(),g.ua.get=function(){return b.getUA()},g.ua.set=function(e){b.setUA(e);var t=b.getResult();for(var n in t)g.ua[n]=t[n]}}}("object"==typeof window?window:this)},1050:function(e,t){(function(t){e.exports=t}).call(t,{})},1051:function(e,t,n){"use strict";function r(e,t){var n=e.split(E);return n.length>1?n.some(function(e){return S.contains(e,t)}):(e=n[0].trim(),o(e,t))}function o(e,t){var n=e.split(O);if(n.length>0&&n.length<=2||w(!1),1===n.length)return a(n[0],t);var r=n[0],o=n[1];return h(r)&&h(o)||w(!1),a(">="+r,t)&&a("<="+o,t)}function a(e,t){if(""===(e=e.trim()))return!0;var n=t.split(_),r=p(e),o=r.modifier,a=r.rangeComponents;switch(o){case"<":return i(n,a);case"<=":return s(n,a);case">=":return u(n,a);case">":return l(n,a);case"~":case"~>":return f(n,a);default:return c(n,a)}}function i(e,t){return-1===b(e,t)}function s(e,t){var n=b(e,t);return-1===n||0===n}function c(e,t){return 0===b(e,t)}function u(e,t){var n=b(e,t);return 1===n||0===n}function l(e,t){return 1===b(e,t)}function f(e,t){var n=t.slice(),r=t.slice();r.length>1&&r.pop();var o=r.length-1,a=parseInt(r[o],10);return d(a)&&(r[o]=a+1+""),u(e,n)&&i(e,r)}function p(e){var t=e.split(_),n=t[0].match(C);return n||w(!1),{modifier:n[1],rangeComponents:[n[2]].concat(t.slice(1))}}function d(e){return!isNaN(e)&&isFinite(e)}function h(e){return!p(e).modifier}function m(e,t){for(var n=e.length;n<t;n++)e[n]="0"}function v(e,t){e=e.slice(),t=t.slice(),m(e,t.length);for(var n=0;n<t.length;n++){var r=t[n].match(/^[x*]$/i);if(r&&(t[n]=e[n]="0","*"===r[0]&&n===t.length-1))for(var o=n;o<e.length;o++)e[o]="0"}return m(t,e.length),[e,t]}function y(e,t){var n=e.match(k)[1],r=t.match(k)[1],o=parseInt(n,10),a=parseInt(r,10);return d(o)&&d(a)&&o!==a?g(o,a):g(e,t)}function g(e,t){return typeof e!=typeof t&&w(!1),e>t?1:e<t?-1:0}function b(e,t){for(var n=v(e,t),r=n[0],o=n[1],a=0;a<o.length;a++){var i=y(r[a],o[a]);if(i)return i}return 0}var w=n(729),_=/\./,E=/\|\|/,O=/\s+\-\s+/,C=/^(<=|<|=|>=|~>|~|>|)?\s*(.+)/,k=/^(\d*)(.*)/,S={contains:function(e,t){return r(e.trim(),t.trim())}};e.exports=S},1052:function(e,t,n){"use strict";function r(e,t,n){if(!e)return null;var r={};for(var a in e)o.call(e,a)&&(r[a]=t.call(n,e[a],a,e));return r}var o=Object.prototype.hasOwnProperty;e.exports=r},1053:function(e,t,n){"use strict";(function(t){function r(e,t){if(!e)return"[empty]";var n=o(e,t);return n.nodeType===Node.TEXT_NODE?n.textContent:(n instanceof Element||d(!1),n.outerHTML)}function o(e,t){var n=void 0!==t?t(e):[];if(e.nodeType===Node.TEXT_NODE){var r=e.textContent.length;return document.createTextNode("[text "+r+(n.length?" | "+n.join(", "):"")+"]")}var a=e.cloneNode();1===a.nodeType&&n.length&&a.setAttribute("data-labels",n.join(", "));for(var i=e.childNodes,s=0;s<i.length;s++)a.appendChild(o(i[s],t));return a}function a(e,t){for(var n=e;n;){if(n instanceof Element&&n.hasAttribute("contenteditable"))return r(n,t);n=n.parentNode}return"Could not find contentEditable parent of node"}function i(e){return null===e.nodeValue?e.childNodes.length:e.nodeValue.length}function s(e,n,r,o,a){if(f(document.documentElement,n)){var i=t.getSelection(),s=e.getAnchorKey(),l=e.getAnchorOffset(),p=e.getFocusKey(),d=e.getFocusOffset(),h=e.getIsBackward();if(!i.extend&&h){var m=s,v=l;s=p,l=d,p=m,d=v,h=!1}var y=s===r&&o<=l&&a>=l,g=p===r&&o<=d&&a>=d;if(y&&g)return i.removeAllRanges(),u(i,n,l-o,e),void c(i,n,d-o,e);if(h){if(g&&(i.removeAllRanges(),u(i,n,d-o,e)),y){var b=i.focusNode,w=i.focusOffset;i.removeAllRanges(),u(i,n,l-o,e),c(i,b,w,e)}}else y&&(i.removeAllRanges(),u(i,n,l-o,e)),g&&c(i,n,d-o,e)}}function c(e,t,n,r){var o=p();if(e.extend&&f(o,t)){n>i(t)&&l.logSelectionStateFailure({anonymizedDom:a(t),extraParams:JSON.stringify({offset:n}),selectionState:JSON.stringify(r.toJS())});var s=t===e.focusNode;try{e.extend(t,n)}catch(i){throw l.logSelectionStateFailure({anonymizedDom:a(t,function(t){var n=[];return t===o&&n.push("active element"),t===e.anchorNode&&n.push("selection anchor node"),t===e.focusNode&&n.push("selection focus node"),n}),extraParams:JSON.stringify({activeElementName:o?o.nodeName:null,nodeIsFocus:t===e.focusNode,nodeWasFocus:s,selectionRangeCount:e.rangeCount,selectionAnchorNodeName:e.anchorNode?e.anchorNode.nodeName:null,selectionAnchorOffset:e.anchorOffset,selectionFocusNodeName:e.focusNode?e.focusNode.nodeName:null,selectionFocusOffset:e.focusOffset,message:i?""+i:null,offset:n},null,2),selectionState:JSON.stringify(r.toJS(),null,2)}),i}}else{var c=e.getRangeAt(0);c.setEnd(t,n),e.addRange(c.cloneRange())}}function u(e,t,n,r){var o=document.createRange();n>i(t)&&l.logSelectionStateFailure({anonymizedDom:a(t),extraParams:JSON.stringify({offset:n}),selectionState:JSON.stringify(r.toJS())}),o.setStart(t,n),e.addRange(o)}var l=n(1054),f=n(841),p=n(923),d=n(729);e.exports=s}).call(t,n(19))},1054:function(e,t,n){"use strict";e.exports={logSelectionStateFailure:function(){return null}}},1055:function(e,t,n){"use strict";function r(e){return null==e?e:String(e)}function o(e,t){var n=void 0;if(window.getComputedStyle&&(n=window.getComputedStyle(e,null)))return r(n.getPropertyValue(i(t)));if(document.defaultView&&document.defaultView.getComputedStyle){if(n=document.defaultView.getComputedStyle(e,null))return r(n.getPropertyValue(i(t)));if("display"===t)return"none"}return r(e.currentStyle?"float"===t?e.currentStyle.cssFloat||e.currentStyle.styleFloat:e.currentStyle[a(t)]:e.style&&e.style[a(t)])}var a=n(1056),i=n(303);e.exports=o},1056:function(e,t,n){"use strict";function r(e){return e.replace(o,function(e,t){return t.toUpperCase()})}var o=/-(.)/g;e.exports=r},1057:function(e,t,n){"use strict";function r(e){var t=o(e);return{x:t.left,y:t.top,width:t.right-t.left,height:t.bottom-t.top}}var o=n(1058);e.exports=r},1058:function(e,t,n){"use strict";function r(e){var t=e.ownerDocument.documentElement;if(!("getBoundingClientRect"in e&&o(t,e)))return{left:0,right:0,top:0,bottom:0};var n=e.getBoundingClientRect();return{left:Math.round(n.left)-t.clientLeft,right:Math.round(n.right)-t.clientLeft,top:Math.round(n.top)-t.clientTop,bottom:Math.round(n.bottom)-t.clientTop}}var o=n(841);e.exports=r},1059:function(e,t,n){"use strict";function r(e){return e=e||document,e.scrollingElement?e.scrollingElement:o||"CSS1Compat"!==e.compatMode?e.body:e.documentElement}var o="undefined"!=typeof navigator&&navigator.userAgent.indexOf("AppleWebKit")>-1;e.exports=r},1060:function(e,t,n){"use strict";function r(e){return e.Window&&e instanceof e.Window?{x:e.pageXOffset||e.document.documentElement.scrollLeft,y:e.pageYOffset||e.document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}e.exports=r},1061:function(e,t,n){"use strict";function r(){var e=void 0;return document.documentElement&&(e=document.documentElement.clientWidth),!e&&document.body&&(e=document.body.clientWidth),e||0}function o(){var e=void 0;return document.documentElement&&(e=document.documentElement.clientHeight),!e&&document.body&&(e=document.body.clientHeight),e||0}function a(){return{width:window.innerWidth||r(),height:window.innerHeight||o()}}a.withoutScrollbars=function(){return{width:r(),height:o()}},e.exports=a},1062:function(e,t,n){"use strict";function r(e){e||(e="");var t=void 0,n=arguments.length;if(n>1)for(var r=1;r<n;r++)(t=arguments[r])&&(e=(e?e+" ":"")+t);return e}e.exports=r},1063:function(e,t,n){"use strict";function r(e,t){var n=null,r=null;if("function"==typeof document.caretRangeFromPoint){var o=document.caretRangeFromPoint(e.x,e.y);n=o.startContainer,r=o.startOffset}else{if(!e.rangeParent)return null;n=e.rangeParent,r=e.rangeOffset}n=d(n),r=d(r);var a=d(u(n));return f(t,a,r,a,r)}function o(e,t){var n=s.moveText(e.getCurrentContent(),e.getSelection(),t);return c.push(e,n,"insert-fragment")}function a(e,t,n){var r=s.insertText(e.getCurrentContent(),t,n,e.getCurrentInlineStyle());return c.push(e,r,"insert-fragment")}var i=n(925),s=n(733),c=n(730),u=n(844),l=n(927),f=n(928),p=n(799),d=n(737),h={onDragEnd:function(e){e.exitCurrentMode()},onDrop:function(e,t){var n=new i(t.nativeEvent.dataTransfer),s=e._latestEditorState,c=r(t.nativeEvent,s);if(t.preventDefault(),e.exitCurrentMode(),null!=c){var u=n.getFiles();if(u.length>0){if(e.props.handleDroppedFiles&&p(e.props.handleDroppedFiles(c,u)))return;return void l(u,function(t){t&&e.update(a(s,c,t))})}var f=e._internalDrag?"internal":"external";if(!e.props.handleDrop||!p(e.props.handleDrop(c,n,f)))return e._internalDrag?void e.update(o(s,c)):void e.update(a(s,c,n.getText()))}}};e.exports=h},1064:function(e,t,n){"use strict";function r(e){return e.split("/")}var o={isImage:function(e){return"image"===r(e)[0]},isJpeg:function(e){var t=r(e);return o.isImage(e)&&("jpeg"===t[1]||"pjpeg"===t[1])}};e.exports=o},1065:function(e,t,n){"use strict";function r(e){var t=e.length;if((Array.isArray(e)||"object"!=typeof e&&"function"!=typeof e)&&i(!1),"number"!=typeof t&&i(!1),0===t||t-1 in e||i(!1),"function"==typeof e.callee&&i(!1),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(e){}for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}function o(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function a(e){return o(e)?Array.isArray(e)?e.slice():r(e):[e]}var i=n(729);e.exports=a},1066:function(e,t,n){"use strict";var r=n(1067),o=n(1070),a=n(1071),i=n(1072),s=n(1073),c=n(1074),u=n(1075),l=n(1076),f=n(1077),p=n(1078),d=n(1092),h=n(1097),m={onBeforeInput:r,onBlur:o,onCompositionStart:a,onCopy:i,onCut:s,onDragOver:c,onDragStart:u,onFocus:l,onInput:f,onKeyDown:p,onPaste:d,onSelect:h};e.exports=m},1067:function(e,t,n){"use strict";(function(t){function r(e){return y&&(e==m||e==v)}function o(e,t,n,r){var o=s.replaceText(e.getCurrentContent(),e.getSelection(),t,n,r);return c.push(e,o,"insert-characters")}function a(e,n){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0);var a=e._latestEditorState,s=n.data;if(s){if(e.props.handleBeforeInput&&f(e.props.handleBeforeInput(s,a)))return void n.preventDefault();var u=a.getSelection(),m=u.getAnchorKey();if(!u.isCollapsed())return n.preventDefault(),void e.update(o(a,s,a.getCurrentInlineStyle(),l(a.getCurrentContent(),a.getSelection())));var v=o(a,s,a.getCurrentInlineStyle(),l(a.getCurrentContent(),a.getSelection())),y=!1;if(y||(y=p(e._latestCommittedEditorState)),!y){var g=t.getSelection();if(null!==g.anchorNode&&g.anchorNode.nodeType===Node.TEXT_NODE){var b=g.anchorNode.parentNode;y="SPAN"===b.nodeName&&b.firstChild.nodeType===Node.TEXT_NODE&&-1!==b.firstChild.nodeValue.indexOf("\t")}}if(!y){y=i.getFingerprint(a.getBlockTree(m))!==i.getFingerprint(v.getBlockTree(m))}if(y||(y=r(s)),y||(y=d(v.getDirectionMap()).get(m)!==d(a.getDirectionMap()).get(m)),y)return n.preventDefault(),void e.update(v);v=c.set(v,{nativelyRenderedContent:v.getCurrentContent()}),e._pendingStateFromBeforeInput=v,h(function(){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0)})}}var i=n(917),s=n(733),c=n(730),u=n(741),l=n(840),f=n(799),p=n(921),d=n(737),h=n(1068),m="'",v="/",y=u.isBrowser("Firefox");e.exports=a}).call(t,n(19))},1068:function(e,t,n){"use strict";(function(t){n(1069),e.exports=t.setImmediate}).call(t,n(19))},1069:function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return u[c]=r,s(c),c++}function o(e){delete u[e]}function a(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function i(e){if(l)setTimeout(i,0,e);else{var t=u[e];if(t){l=!0;try{a(t)}finally{o(e),l=!1}}}}if(!e.setImmediate){var s,c=1,u={},l=!1,f=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?function(){s=function(e){t.nextTick(function(){i(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&i(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),s=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){i(e.data)},s=function(t){e.port2.postMessage(t)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var e=f.documentElement;s=function(t){var n=f.createElement("script");n.onreadystatechange=function(){i(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){s=function(e){setTimeout(i,0,e)}}(),p.setImmediate=r,p.clearImmediate=o}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(19),n(97))},1070:function(e,t,n){"use strict";(function(t){function r(e,n){if(i()===document.body){var r=t.getSelection(),s=e.refs.editor;1===r.rangeCount&&a(s,r.anchorNode)&&a(s,r.focusNode)&&r.removeAllRanges()}var c=e._latestEditorState,u=c.getSelection();if(u.getHasFocus()){var l=u.set("hasFocus",!1);e.props.onBlur&&e.props.onBlur(n),e.update(o.acceptSelection(c,l))}}var o=n(730),a=n(841),i=n(923);e.exports=r}).call(t,n(19))},1071:function(e,t,n){"use strict";function r(e,t){e.setMode("composite"),e.update(o.set(e._latestEditorState,{inCompositionMode:!0})),e._onCompositionStart(t)}var o=n(730);e.exports=r},1072:function(e,t,n){"use strict";function r(e,t){if(e._latestEditorState.getSelection().isCollapsed())return void t.preventDefault();e.setClipboard(o(e._latestEditorState))}var o=n(929);e.exports=r},1073:function(e,t,n){"use strict";function r(e,t){var n=e._latestEditorState;if(n.getSelection().isCollapsed())return void t.preventDefault();var r=s.getScrollParent(t.target),a=u(r),i=a.x,l=a.y,f=c(n);e.setClipboard(f),e.setMode("cut"),setTimeout(function(){e.restoreEditorDOM({x:i,y:l}),e.exitCurrentMode(),e.update(o(n))},0)}function o(e){var t=a.removeRange(e.getCurrentContent(),e.getSelection(),"forward");return i.push(e,t,"remove-range")}var a=n(733),i=n(730),s=n(842),c=n(929),u=n(843);e.exports=r},1074:function(e,t,n){"use strict";function r(e,t){e._internalDrag=!1,e.setMode("drag"),t.preventDefault()}e.exports=r},1075:function(e,t,n){"use strict";function r(e){e._internalDrag=!0,e.setMode("drag")}e.exports=r},1076:function(e,t,n){"use strict";function r(e,t){var n=e._latestEditorState,r=n.getSelection();if(!r.getHasFocus()){var i=r.set("hasFocus",!0);e.props.onFocus&&e.props.onFocus(t),a.isBrowser("Chrome < 60.0.3081.0")?e.update(o.forceSelection(n,i)):e.update(o.acceptSelection(n,i))}}var o=n(730),a=n(741);e.exports=r},1077:function(e,t,n){"use strict";(function(t){function r(e){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0);var n=t.getSelection(),r=n.anchorNode,c=n.isCollapsed,d=r.nodeType!==Node.TEXT_NODE,h=r.nodeType!==Node.TEXT_NODE&&r.nodeType!==Node.ELEMENT_NODE;if(o.draft_killswitch_allow_nontextnodes){if(d)return}else if(h)return;if(r.nodeType===Node.TEXT_NODE&&(null!==r.previousSibling||null!==r.nextSibling)){var m=r.parentNode;r.nodeValue=m.textContent;for(var v=m.firstChild;null!==v;v=v.nextSibling)v!==r&&m.removeChild(v)}var y=r.textContent,g=e._latestEditorState,b=l(u(r)),w=i.decode(b),_=w.blockKey,E=w.decoratorKey,O=w.leafKey,C=g.getBlockTree(_).getIn([E,"leaves",O]),k=C.start,S=C.end,x=g.getCurrentContent(),T=x.getBlockForKey(_),j=T.getText().slice(k,S);if(y.endsWith(p)&&(y=y.slice(0,-1)),y!==j){var P,A,I,M,N=g.getSelection(),R=N.merge({anchorOffset:k,focusOffset:S,isBackward:!1}),D=T.getEntityAt(k),L=D&&x.getEntity(D),F=L&&L.getMutability(),U="MUTABLE"===F,B=U?"spellcheck-change":"apply-entity",z=a.replaceText(x,R,y,T.getInlineStyleAt(k),U?T.getEntityAt(k):null);if(f)P=n.anchorOffset,A=n.focusOffset,I=k+Math.min(P,A),M=I+Math.abs(P-A),P=I,A=M;else{var K=y.length-j.length;I=N.getStartOffset(),M=N.getEndOffset(),P=c?M+K:I,A=M+K}var q=z.merge({selectionBefore:x.getSelectionAfter(),selectionAfter:N.merge({anchorOffset:P,focusOffset:A})});e.update(s.push(g,q,B))}}var o=n(914),a=n(733),i=n(798),s=n(730),c=n(741),u=n(844),l=n(737),f=c.isEngine("Gecko"),p="\n\n";e.exports=r}).call(t,n(19))},1078:function(e,t,n){"use strict";function r(e,t){switch(e){case"redo":return i.redo(t);case"delete":return b(t);case"delete-word":return h(t);case"backspace":return g(t);case"backspace-word":return d(t);case"backspace-to-start-of-line":return p(t);case"split-block":return m(t);case"transpose-characters":return w(t);case"move-selection-to-start-of-block":return y(t);case"move-selection-to-end-of-block":return v(t);case"secondary-cut":return u.cut(t);case"secondary-paste":return u.paste(t);default:return t}}function o(e,t){var n=t.which,o=e._latestEditorState;switch(n){case c.RETURN:if(t.preventDefault(),e.props.handleReturn&&f(e.props.handleReturn(t,o)))return;break;case c.ESC:return t.preventDefault(),void(e.props.onEscape&&e.props.onEscape(t));case c.TAB:return void(e.props.onTab&&e.props.onTab(t));case c.UP:return void(e.props.onUpArrow&&e.props.onUpArrow(t));case c.DOWN:return void(e.props.onDownArrow&&e.props.onDownArrow(t));case c.SPACE:if(O&&E(t)){t.preventDefault();var s=a.replaceText(o.getCurrentContent(),o.getSelection()," ");return void e.update(i.push(o,s,"insert-characters"))}}var u=e.props.keyBindingFn(t);if(u){if("undo"===u)return void _(t,o,e.update);if(t.preventDefault(),!e.props.handleKeyCommand||!f(e.props.handleKeyCommand(u,o))){var l=r(u,o);l!==o&&e.update(l)}}}var a=n(733),i=n(730),s=n(845),c=n(839),u=n(1079),l=n(741),f=n(799),p=n(1080),d=n(1082),h=n(1084),m=n(1085),v=n(1086),y=n(1087),g=n(1088),b=n(1089),w=n(1090),_=n(1091),E=s.isOptionKeyCommand,O=l.isBrowser("Chrome");e.exports=o},1079:function(e,t,n){"use strict";var r=n(733),o=n(730),a=n(796),i=n(737),s=null,c={cut:function(e){var t=e.getCurrentContent(),n=e.getSelection(),c=null;if(n.isCollapsed()){var u=n.getAnchorKey(),l=t.getBlockForKey(u).getLength();if(l===n.getAnchorOffset())return e;c=n.set("focusOffset",l)}else c=n;c=i(c),s=a(t,c);var f=r.removeRange(t,c,"forward");return f===t?e:o.push(e,f,"remove-range")},paste:function(e){if(!s)return e;var t=r.replaceWithFragment(e.getCurrentContent(),e.getSelection(),s);return o.push(e,t,"insert-fragment")}};e.exports=c},1080:function(e,t,n){"use strict";(function(t){function r(e){var n=c(e,function(e){var n=e.getSelection();if(n.isCollapsed()&&0===n.getAnchorOffset())return s(e,1);var r=t.getSelection(),o=r.getRangeAt(0);return o=a(o),i(e,null,o.endContainer,o.endOffset,o.startContainer,o.startOffset).selectionState},"backward");return n===e.getCurrentContent()?e:o.push(e,n,"remove-range")}var o=n(730),a=n(1081),i=n(931),s=n(846),c=n(776);e.exports=r}).call(t,n(19))},1081:function(e,t,n){"use strict";function r(e){var t=getComputedStyle(e),n=document.createElement("div");n.style.fontFamily=t.fontFamily,n.style.fontSize=t.fontSize,n.style.fontStyle=t.fontStyle,n.style.fontWeight=t.fontWeight,n.style.lineHeight=t.lineHeight,n.style.position="absolute",n.textContent="M";var r=document.body;r||u(!1),r.appendChild(n);var o=n.getBoundingClientRect();return r.removeChild(n),o.height}function o(e,t){for(var n=1/0,r=1/0,o=-1/0,a=-1/0,i=0;i<e.length;i++){var s=e[i];0!==s.width&&1!==s.width&&(n=Math.min(n,s.top),r=Math.min(r,s.bottom),o=Math.max(o,s.top),a=Math.max(a,s.bottom))}return o<=r&&o-n<t&&a-r<t}function a(e){switch(e.nodeType){case Node.DOCUMENT_TYPE_NODE:return 0;case Node.TEXT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:return e.length;default:return e.childNodes.length}}function i(e){e.collapsed||u(!1),e=e.cloneRange();var t=e.startContainer;1!==t.nodeType&&(t=t.parentNode);var n=r(t),i=e.endContainer,l=e.endOffset;for(e.setStart(e.startContainer,0);o(c(e),n)&&(i=e.startContainer,l=e.startOffset,i.parentNode||u(!1),e.setStartBefore(i),1!==i.nodeType||"inline"===getComputedStyle(i).display););for(var f=i,p=l-1;;){for(var d=f.nodeValue,h=p;h>=0;h--)if(!(null!=d&&h>0&&s.isSurrogatePair(d,h-1))){if(e.setStart(f,h),!o(c(e),n))break;i=f,l=h}if(-1===h||0===f.childNodes.length)break;f=f.childNodes[h],p=a(f)}return e.setStart(i,l),e}var s=n(754),c=n(930),u=n(729);e.exports=i},1082:function(e,t,n){"use strict";function r(e){var t=s(e,function(e){var t=e.getSelection(),n=t.getStartOffset();if(0===n)return i(e,1);var r=t.getStartKey(),a=e.getCurrentContent(),s=a.getBlockForKey(r).getText().slice(0,n),c=o.getBackward(s);return i(e,c.length||1)},"backward");return t===e.getCurrentContent()?e:a.push(e,t,"remove-range")}var o=n(932),a=n(730),i=n(846),s=n(776);e.exports=r},1083:function(e,t,n){"use strict";e.exports={getPunctuation:function(){return"[.,+*?$|#{}()'\\^\\-\\[\\]\\\\\\/!@%\"~=<>_:;・、。〈-】〔-〟：-？！-／［-｀｛-･⸮؟٪-٬؛،؍﴾﴿᠁।၊။‐-‧‰-⁞¡-±´-¸º»¿]"}}},1084:function(e,t,n){"use strict";function r(e){var t=s(e,function(e){var t=e.getSelection(),n=t.getStartOffset(),r=t.getStartKey(),a=e.getCurrentContent(),s=a.getBlockForKey(r).getText().slice(n),c=o.getForward(s);return i(e,c.length||1)},"forward");return t===e.getCurrentContent()?e:a.push(e,t,"remove-range")}var o=n(932),a=n(730),i=n(933),s=n(776);e.exports=r},1085:function(e,t,n){"use strict";function r(e){var t=o.splitBlock(e.getCurrentContent(),e.getSelection());return a.push(e,t,"split-block")}var o=n(733),a=n(730);e.exports=r},1086:function(e,t,n){"use strict";function r(e){var t=e.getSelection(),n=t.getEndKey(),r=e.getCurrentContent(),a=r.getBlockForKey(n).getLength();return o.set(e,{selection:t.merge({anchorKey:n,anchorOffset:a,focusKey:n,focusOffset:a,isBackward:!1}),forceSelection:!0})}var o=n(730);e.exports=r},1087:function(e,t,n){"use strict";function r(e){var t=e.getSelection(),n=t.getStartKey();return o.set(e,{selection:t.merge({anchorKey:n,anchorOffset:0,focusKey:n,focusOffset:0,isBackward:!1}),forceSelection:!0})}var o=n(730);e.exports=r},1088:function(e,t,n){"use strict";function r(e){var t=s(e,function(e){var t=e.getSelection(),n=e.getCurrentContent(),r=t.getAnchorKey(),o=t.getAnchorOffset(),s=n.getBlockForKey(r).getText()[o-1];return i(e,s?a.getUTF16Length(s,0):1)},"backward");if(t===e.getCurrentContent())return e;var n=e.getSelection();return o.push(e,t.set("selectionBefore",n),n.isCollapsed()?"backspace-character":"remove-range")}var o=n(730),a=n(754),i=n(846),s=n(776);e.exports=r},1089:function(e,t,n){"use strict";function r(e){var t=s(e,function(e){var t=e.getSelection(),n=e.getCurrentContent(),r=t.getAnchorKey(),o=t.getAnchorOffset(),s=n.getBlockForKey(r).getText()[o];return i(e,s?a.getUTF16Length(s,0):1)},"forward");if(t===e.getCurrentContent())return e;var n=e.getSelection();return o.push(e,t.set("selectionBefore",n),n.isCollapsed()?"delete-character":"remove-range")}var o=n(730),a=n(754),i=n(933),s=n(776);e.exports=r},1090:function(e,t,n){"use strict";function r(e){var t=e.getSelection();if(!t.isCollapsed())return e;var n=t.getAnchorOffset();if(0===n)return e;var r=t.getAnchorKey(),s=e.getCurrentContent(),c=s.getBlockForKey(r),u=c.getLength();if(u<=1)return e;var l,f;n===u?(l=t.set("anchorOffset",n-1),f=t):(l=t.set("focusOffset",n+1),f=l.set("anchorOffset",n+1));var p=i(s,l),d=o.removeRange(s,l,"backward"),h=d.getSelectionAfter(),m=h.getAnchorOffset()-1,v=h.merge({anchorOffset:m,focusOffset:m}),y=o.replaceWithFragment(d,v,p),g=a.push(e,y,"insert-fragment");return a.acceptSelection(g,f)}var o=n(733),a=n(730),i=n(796);e.exports=r},1091:function(e,t,n){"use strict";function r(e,t,n){var r=o.undo(t);if("spellcheck-change"===t.getLastChangeType()){var a=r.getCurrentContent();return void n(o.set(r,{nativelyRenderedContent:a}))}if(e.preventDefault(),!t.getNativelyRenderedContent())return void n(r);n(o.set(t,{nativelyRenderedContent:null})),setTimeout(function(){n(r)},0)}var o=n(730);e.exports=r},1092:function(e,t,n){"use strict";function r(e,t){t.preventDefault();var n=new c(t.clipboardData);if(!n.isRichText()){var r=n.getFiles(),y=n.getText();if(r.length>0){if(e.props.handlePastedFiles&&m(e.props.handlePastedFiles(r)))return;return void h(r,function(t){if(t=t||y){var n=e._latestEditorState,r=v(t),o=s.create({style:n.getCurrentInlineStyle(),entity:d(n.getCurrentContent(),n.getSelection())}),a=p.getCurrentBlockType(n),c=l.processText(r,o,a),h=i.createFromArray(c),m=u.replaceWithFragment(n.getCurrentContent(),n.getSelection(),h);e.update(f.push(n,m,"insert-fragment"))}})}}var g=[],b=n.getText(),w=n.getHTML(),_=e._latestEditorState;if(!e.props.handlePastedText||!m(e.props.handlePastedText(b,w,_))){if(b&&(g=v(b)),!e.props.stripPastedStyles){var E=e.getClipboard();if(n.isRichText()&&E){if(-1!==w.indexOf(e.getEditorKey())||1===g.length&&1===E.size&&E.first().getText()===b)return void e.update(o(e._latestEditorState,E))}else if(E&&n.types.includes("com.apple.webarchive")&&!n.types.includes("text/html")&&a(g,E))return void e.update(o(e._latestEditorState,E));if(w){var O=l.processHTML(w,e.props.blockRenderMap);if(O){var C=O.contentBlocks,k=O.entityMap;if(C){var S=i.createFromArray(C);return void e.update(o(e._latestEditorState,S,k))}}}e.setClipboard(null)}if(g.length){var x=s.create({style:_.getCurrentInlineStyle(),entity:d(_.getCurrentContent(),_.getSelection())}),T=p.getCurrentBlockType(_),j=l.processText(g,x,T),P=i.createFromArray(j);e.update(o(e._latestEditorState,P))}}}function o(e,t,n){var r=u.replaceWithFragment(e.getCurrentContent(),e.getSelection(),t);return f.push(e,r.set("entityMap",n),"insert-fragment")}function a(e,t){return e.length===t.size&&t.valueSeq().every(function(t,n){return t.getText()===e[n]})}var i=n(773),s=n(738),c=n(925),u=n(733),l=n(1093),f=n(730),p=n(936),d=n(840),h=n(927),m=n(799),v=n(1096);e.exports=r},1093:function(e,t,n){"use strict";var r=(n(738),n(753)),o=n(726),a=n(934),i=n(740),s=n(935),c=n(836),u=o.List,l=o.Repeat,f={processHTML:function(e,t){return a(e,s,t)},processText:function(e,t,n){return e.map(function(e){return e=c(e),new r({key:i(),type:n,text:e,characterList:u(l(t,e.length))})})}};e.exports=f},1094:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(t){r(this,e),this._uri=t}return e.prototype.toString=function(){return this._uri},e}();e.exports=o},1095:function(e,t,n){"use strict";function r(e,t,n,r){var o=t.getStartKey(),a=t.getEndKey(),i=e.getBlockMap(),s=i.toSeq().skipUntil(function(e,t){return t===o}).takeUntil(function(e,t){return t===a}).concat([[a,i.get(a)]]).map(function(e){var t=e.getDepth()+n;return t=Math.max(0,Math.min(t,r)),e.set("depth",t)});return i=i.merge(s),e.merge({blockMap:i,selectionBefore:t,selectionAfter:t})}e.exports=r},1096:function(e,t,n){"use strict";function r(e){return e.split(o)}var o=/\r\n?|\n/g;e.exports=r},1097:function(e,t,n){"use strict";function r(e){if(!e._blockSelectEvents&&e._latestEditorState===e.props.editorState){var t=e.props.editorState,n=a.findDOMNode(e.refs.editorContainer);n||s(!1),n.firstChild instanceof HTMLElement||s(!1);var r=i(t,n.firstChild),c=r.selectionState;c!==t.getSelection()&&(t=r.needsRecovery?o.forceSelection(t,c):o.acceptSelection(t,c),e.update(t))}}var o=n(730),a=n(12),i=n(1098),s=n(729);e.exports=r},1098:function(e,t,n){"use strict";(function(t){function r(e,n){var r=t.getSelection();return 0===r.rangeCount?{selectionState:e.getSelection().set("hasFocus",!1),needsRecovery:!1}:o(e,n,r.anchorNode,r.anchorOffset,r.focusNode,r.focusOffset)}var o=n(931);e.exports=r}).call(t,n(19))},1099:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n(775),c=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.shouldComponentUpdate=function(e){return this.props.text!==e.text||this.props.editorState.getSelection().getHasFocus()!==e.editorState.getSelection().getHasFocus()},t.prototype.render=function(){var e=this.props.editorState.getSelection().getHasFocus(),t=s({"public/DraftEditorPlaceholder/root":!0,"public/DraftEditorPlaceholder/hasFocus":e});return i.createElement("div",{className:t},i.createElement("div",{className:s("public/DraftEditorPlaceholder/inner"),id:this.props.accessibilityID},this.props.text))},t}(i.Component);e.exports=c},1100:function(e,t,n){"use strict";function r(e){var t=0,n={},r=[];e.getBlockMap().forEach(function(e,s){e.findEntityRanges(function(e){return null!==e.getEntity()},function(r){var a=o.stringify(e.getEntityAt(r));n.hasOwnProperty(a)||(n[a]=""+t++)}),r.push({key:s,text:e.getText(),type:e.getType(),depth:e.getDepth(),inlineStyleRanges:i(e),entityRanges:a(e,n),data:e.getData().toObject()})});var s=Object.keys(n),c={};return s.forEach(function(t,n){var r=e.getEntity(o.unstringify(t));c[n]={type:r.getType(),mutability:r.getMutability(),data:r.getData()}}),{entityMap:c,blocks:r}}var o=n(938),a=n(1101),i=n(1102);e.exports=r},1101:function(e,t,n){"use strict";function r(e,t){var n=[];return e.findEntityRanges(function(e){return!!e.getEntity()},function(r,a){var s=e.getText(),c=e.getEntityAt(r);n.push({offset:i(s.slice(0,r)),length:i(s.slice(r,a)),key:Number(t[o.stringify(c)])})}),n}var o=n(938),a=n(754),i=a.strlen;e.exports=r},1102:function(e,t,n){"use strict";function r(e,t,n){var r=[],o=t.map(function(e){return e.has(n)}).toList();return i(o,s,c,function(t,o){var i=e.getText();r.push({offset:a.strlen(i.slice(0,t)),length:a.strlen(i.slice(t,o)),style:n})}),r}function o(e){var t=e.getCharacterList().map(function(e){return e.getStyle()}).toList(),n=t.flatten().toSet().map(function(n){return r(e,t,n)});return Array.prototype.concat.apply(u,n.toJS())}var a=n(754),i=n(795),s=function(e,t){return e===t},c=function(e){return!!e},u=[];e.exports=o},1103:function(e,t,n){"use strict";function r(e){var t=e.blocks,n=e.entityMap,r={};Object.keys(n).forEach(function(e){var t=n[e],o=t.type,a=t.mutability,i=t.data,s=c.__create(o,a,i||{});r[e]=s});var o=t.map(function(e){var t=e.key,n=e.type,o=e.text,s=e.depth,c=e.inlineStyleRanges,u=e.entityRanges,m=e.data;t=t||d(),n=n||"unstyled",s=s||0,c=c||[],u=u||[],m=h(m);var v=p(o,c),y=u.filter(function(e){return r.hasOwnProperty(e.key)}).map(function(e){return a({},e,{key:r[e.key]})}),g=f(o,y),b=l(v,g);return new i({key:t,type:n,text:o,depth:s,characterList:b,data:m})});return s.createFromBlockArray(o)}var o=n(144),a=o||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(753),s=n(835),c=n(797),u=n(726),l=n(1104),f=n(1105),p=n(1106),d=n(740),h=u.Map;e.exports=r},1104:function(e,t,n){"use strict";function r(e,t){var n=e.map(function(e,n){var r=t[n];return o.create({style:e,entity:r})});return i(n)}var o=n(738),a=n(726),i=a.List;e.exports=r},1105:function(e,t,n){"use strict";function r(e,t){var n=Array(e.length).fill(null);return t&&t.forEach(function(t){for(var r=a(e,0,t.offset).length,o=r+a(e,t.offset,t.length).length,i=r;i<o;i++)n[i]=t.key}),n}var o=n(754),a=o.substr;e.exports=r},1106:function(e,t,n){"use strict";function r(e,t){var n=Array(e.length).fill(c);return t&&t.forEach(function(t){for(var r=s(e,0,t.offset).length,o=r+s(e,t.offset,t.length).length;r<o;)n[r]=n[r].add(t.style),r++}),n}var o=n(726),a=o.OrderedSet,i=n(754),s=i.substr,c=a();e.exports=r},1107:function(e,t,n){"use strict";function r(e){var t=e.getSelection();if(!t.rangeCount)return null;var n=t.getRangeAt(0),r=o(n),a=r.top,i=r.right,s=r.bottom,c=r.left;return 0===a&&0===i&&0===s&&0===c?null:r}var o=n(1108);e.exports=r},1108:function(e,t,n){"use strict";function r(e){var t=o(e),n=0,r=0,a=0,i=0;if(t.length){if(t.length>1&&0===t[0].width){var s=t[1];n=s.top,r=s.right,a=s.bottom,i=s.left}else{var c=t[0];n=c.top,r=c.right,a=c.bottom,i=c.left}for(var u=1;u<t.length;u++){var l=t[u];0!==l.height&&0!==l.width&&(n=Math.min(n,l.top),r=Math.max(r,l.right),a=Math.max(a,l.bottom),i=Math.min(i,l.left))}}return{top:n,right:r,bottom:a,left:i,width:r-i,height:a-n}}var o=n(930);e.exports=r},1109:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.composeDecorators=t.createEditorStateWithText=t.default=void 0;var o=n(1110),a=r(o),i=n(1111),s=r(i),c=n(1112),u=r(c);t.default=u.default;t.createEditorStateWithText=a.default,t.composeDecorators=s.default},1110:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(728);t.default=function(e){return r.EditorState.createWithContent(r.ContentState.createFromText(e))}},1111:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return function(e){return e};if(1===t.length)return t[0];var r=t[t.length-1];return function(){for(var e=r.apply(void 0,arguments),n=t.length-2;n>=0;n-=1){e=(0,t[n])(e)}return e}}},1112:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(0),p=r(f),d=n(1),h=r(d),m=n(728),v=n(726),y=n(1113),g=r(y),b=n(1114),w=r(b),_=n(1115),E=r(_),O=n(1116),C=r(O),k=n(1117),S=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(k),x=function(e){function t(e){i(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return T.call(n),[n.props].concat(a(n.resolvePlugins())).forEach(function(e){"function"==typeof e.initialize&&e.initialize(n.getPluginMethods())}),C.default.forEach(function(e){n[e]=function(){var t;return(t=n.editor)[e].apply(t,arguments)}}),n.state={},n}return c(t,e),l(t,[{key:"componentWillMount",value:function(){var e=this,t=this.resolveDecorators(),n=(0,w.default)(t.filter(function(t){return!e.decoratorIsCustom(t)}),this.getEditorState,this.onChange),r=t.filter(function(t){return e.decoratorIsCustom(t)}),o=new g.default(r.push(n)),a=m.EditorState.set(this.props.editorState,{decorator:o});this.onChange((0,E.default)(a))}},{key:"componentWillUnmount",value:function(){var e=this;this.resolvePlugins().forEach(function(t){t.willUnmount&&t.willUnmount({getEditorState:e.getEditorState,setEditorState:e.onChange})})}},{key:"render",value:function(){var e=this,t=this.createPluginHooks(),n=this.resolveCustomStyleMap(),r=this.resolveAccessibilityProps(),o=this.resolveblockRenderMap();return p.default.createElement(m.Editor,u({},this.props,r,t,{readOnly:this.props.readOnly||this.state.readOnly,customStyleMap:n,blockRenderMap:o,onChange:this.onChange,editorState:this.props.editorState,ref:function(t){e.editor=t}}))}}]),t}(f.Component);x.propTypes={editorState:h.default.object.isRequired,onChange:h.default.func.isRequired,plugins:h.default.array,defaultKeyBindings:h.default.bool,defaultBlockRenderMap:h.default.bool,customStyleMap:h.default.object,decorators:h.default.array},x.defaultProps={defaultBlockRenderMap:!0,defaultKeyBindings:!0,customStyleMap:{},plugins:[],decorators:[]};var T=function(){var e=this;this.onChange=function(t){var n=t;e.resolvePlugins().forEach(function(t){t.onChange&&(n=t.onChange(n,e.getPluginMethods()))}),e.props.onChange&&e.props.onChange(n,e.getPluginMethods())},this.getPlugins=function(){return e.props.plugins.slice(0)},this.getProps=function(){return u({},e.props)},this.getReadOnly=function(){return e.props.readOnly},this.setReadOnly=function(t){t!==e.state.readOnly&&e.setState({readOnly:t})},this.getEditorRef=function(){return e.editor},this.getEditorState=function(){return e.props.editorState},this.getPluginMethods=function(){return{getPlugins:e.getPlugins,getProps:e.getProps,setEditorState:e.onChange,getEditorState:e.getEditorState,getReadOnly:e.getReadOnly,setReadOnly:e.setReadOnly,getEditorRef:e.getEditorRef}},this.createEventHooks=function(t,n){return function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];var s=[].slice.apply(o);return s.push(e.getPluginMethods()),n.some(function(e){return"function"==typeof e[t]&&!0===e[t].apply(e,a(s))})}},this.createHandleHooks=function(t,n){return function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];var s=[].slice.apply(o);return s.push(e.getPluginMethods()),n.some(function(e){return"function"==typeof e[t]&&"handled"===e[t].apply(e,a(s))})?"handled":"not-handled"}},this.createFnHooks=function(t,n){return function(){for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];var c=[].slice.apply(i);if(c.push(e.getPluginMethods()),"blockRendererFn"===t){var l={props:{}};return n.forEach(function(e){if("function"==typeof e[t]){var n=e[t].apply(e,a(c));if(void 0!==n&&null!==n){var r=n.props,i=o(n,["props"]),s=l,f=s.props,p=o(s,["props"]);l=u({},p,i,{props:u({},f,r)})}}}),!!l.component&&l}if("blockStyleFn"===t){var f=void 0;return n.forEach(function(e){if("function"==typeof e[t]){var n=e[t].apply(e,a(c));void 0!==n&&null!==n&&(f=(f?f+" ":"")+n)}}),f||""}var p=void 0;return!!n.some(function(e){return"function"==typeof e[t]&&void 0!==(p=e[t].apply(e,a(c)))})&&p}},this.createPluginHooks=function(){var t={},n=[],r=[],o=[],i=[e.props].concat(a(e.resolvePlugins()));return i.forEach(function(e){Object.keys(e).forEach(function(e){if("onChange"!==e&&-1===n.indexOf(e)&&-1===o.indexOf(e)){if(0===e.indexOf("on"))return void n.push(e);if(0===e.indexOf("handle"))return void r.push(e);e.length-2===e.indexOf("Fn")&&o.push(e)}})}),n.forEach(function(n){t[n]=e.createEventHooks(n,i)}),r.forEach(function(n){t[n]=e.createHandleHooks(n,i)}),o.forEach(function(n){t[n]=e.createFnHooks(n,i)}),t},this.resolvePlugins=function(){var t=e.props.plugins.slice(0);return e.props.defaultKeyBindings&&t.push(S),t},this.resolveDecorators=function(){var t=e.props,n=t.decorators,r=t.plugins;return(0,v.List)([{decorators:n}].concat(a(r))).filter(function(e){return void 0!==e.decorators}).flatMap(function(e){return e.decorators})},this.decoratorIsCustom=function(e){return"function"==typeof e.getDecorations&&"function"==typeof e.getComponentForKey&&"function"==typeof e.getPropsForKey},this.resolveCustomStyleMap=function(){return e.props.plugins.filter(function(e){return void 0!==e.customStyleMap}).map(function(e){return e.customStyleMap}).concat([e.props.customStyleMap]).reduce(function(e,t){return u({},e,t)},{})},this.resolveblockRenderMap=function(){var t=e.props.plugins.filter(function(e){return void 0!==e.blockRenderMap}).reduce(function(e,t){return e.merge(t.blockRenderMap)},(0,v.Map)({}));return e.props.defaultBlockRenderMap&&(t=m.DefaultDraftBlockRenderMap.merge(t)),e.props.blockRenderMap&&(t=t.merge(e.props.blockRenderMap)),t},this.resolveAccessibilityProps=function(){var t={};return[e.props].concat(a(e.resolvePlugins())).forEach(function(e){if("function"==typeof e.getAccessibilityProps){var n=e.getAccessibilityProps(),r={};void 0===t.ariaHasPopup?r.ariaHasPopup=n.ariaHasPopup:"true"===n.ariaHasPopup&&(r.ariaHasPopup="true"),void 0===t.ariaExpanded?r.ariaExpanded=n.ariaExpanded:"true"===n.ariaExpanded&&(r.ariaExpanded="true"),t=u({},t,n,r)}}),t}};t.default=x},1113:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(726),i=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(t){r(this,e),this.decorators=i.default.List(t)}return o(e,[{key:"getDecorations",value:function(e,t){var n=new Array(e.getText().length).fill(null);return this.decorators.forEach(function(r,o){r.getDecorations(e,t).forEach(function(e,t){e&&(n[t]=o+"-"+e)})}),i.default.List(n)}},{key:"getComponentForKey",value:function(t){return this.getDecoratorForKey(t).getComponentForKey(e.getInnerKey(t))}},{key:"getPropsForKey",value:function(t){return this.getDecoratorForKey(t).getPropsForKey(e.getInnerKey(t))}},{key:"getDecoratorForKey",value:function(e){var t=e.split("-"),n=Number(t[0]);return this.decorators.get(n)}}],[{key:"getInnerKey",value:function(e){return e.split("-").slice(1).join("-")}}]),e}();e.exports=s},1114:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(726),a=n(728),i=n(939),s=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(e,t,n){var i=(0,o.List)(e).map(function(e){return r({},e,{component:(0,s.default)(e.component,{getEditorState:t,setEditorState:n})})}).toJS();return new a.CompositeDecorator(i)}},1115:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(728),o=function(e){var t=e.getCurrentContent(),n=t.getBlockMap(),o=n.last().getKey(),a=n.last().getLength(),i=new r.SelectionState({anchorKey:o,anchorOffset:a,focusKey:o,focusOffset:a});return r.EditorState.acceptSelection(e,i)};t.default=o},1116:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["focus","blur","setMode","exitCurrentMode","restoreEditorDOM","setRenderGuard","removeRenderGuard","setClipboard","getClipboard","getEditorKey","update","onDragEnter","onDragLeave"];t.default=r},1117:function(e,t,n){"use strict";function r(e){return(0,o.getDefaultKeyBinding)(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.keyBindingFn=r;var o=n(728)},1118:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(82),a=r(o),i=n(0),s=r(i),c=n(267),u=r(c),l=n(728),f=n(1119),p=r(f),d=n(1120),h=r(d),m=n(1121),v=r(m),y=n(944),g=r(y),b=n(1124),w=r(b),_=n(1125),E=r(_),O=n(1126),C=r(O),k=n(1127),S=r(k),x=["ordered-list-item","unordered-list-item"],T=function(e,t){return t},j=function(e){var t=e.styleToHTML,n=void 0===t?{}:t,r=e.blockToHTML,o=void 0===r?{}:r,i=e.entityToHTML,c=void 0===i?T:i;return function(e){(0,a.default)(null!==e&&void 0!==e,"Expected contentState to be non-null");var t=void 0;t=!0===o.__isMiddleware?o((0,w.default)(S.default)):(0,g.default)((0,w.default)(o),(0,w.default)(S.default));var r=(0,l.convertToRaw)(e),i=[],f=r.blocks.map(function(e){var o=e.type,a=e.depth,l="",f="";if(-1===x.indexOf(o))l=i.reduceRight(function(e,n){return e+(0,C.default)(t(n)).nestEnd},""),i=[];else for(;a+1!==i.length||o!==i[a].type;)if(a+1===i.length){var d=i[a];l+=(0,C.default)(t(d)).nestEnd,f+=(0,C.default)(t(e)).nestStart,i[a]=e}else if(a+1<i.length){var m=i[i.length-1];l+=(0,C.default)(t(m)).nestEnd,i=i.slice(0,-1)}else f+=(0,C.default)(t(e)).nestStart,i.push(e);var y=(0,v.default)((0,h.default)((0,p.default)(e),r.entityMap,c),n),g=(0,E.default)(t(e)),b=g.start+y+g.end;return 0===y.length&&g.hasOwnProperty("empty")&&(b=s.default.isValidElement(g.empty)?u.default.renderToStaticMarkup(g.empty):g.empty),l+f+b}).join("");return f=i.reduce(function(e,n){return e+(0,C.default)(t(n)).nestEnd},f)}};t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 1===t.length&&t[0].hasOwnProperty("_map")&&null!=t[0].getBlockMap?j({}).apply(void 0,t):j.apply(void 0,t)}},1119:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(942),a=r(o),i=n(800),s=r(i),c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};t.default=function(e){for(var t=e.text,n=e.entityRanges.sort(s.default),r=e.inlineStyleRanges.sort(s.default),o="",i=0;i<t.length;i++)!function(e){var i=t[e];void 0!==c[i]?function(){var e=c[i],t=o.length;o+=e;var s=function(n){return(0,a.default)(n,t,i.length,e.length)};n=n.map(s),r=r.map(s)}():o+=i}(i);return Object.assign({},e,{text:o,inlineStyleRanges:r,entityRanges:n})}},1120:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(942),a=r(o),i=n(800),s=r(i),c=n(943),u=r(c),l=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return arguments[1]};t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,r=e.text,o=n;if(n.__isMiddleware&&(o=n(l)),e.hasOwnProperty("entityRanges")&&e.entityRanges.length>0){for(var i=e.entityRanges.sort(s.default),c=e.inlineStyleRanges,f=0;f<i.length;f++)!function(e){var n=i[e],s=t[n.key],l=r.substr(n.offset,n.length),f=(0,u.default)(o(s,l),l)||l,p=function(t,r){return r>=e||t.hasOwnProperty("style")?(0,a.default)(t,n.offset,n.length,f.length):t};i=i.map(p),c=c.map(p),r=r.substring(0,n.offset)+f+r.substring(n.offset+n.length)}(f);return Object.assign({},e,{text:r,inlineStyleRanges:c,entityRanges:i})}return e}},1121:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(82),a=r(o),i=n(1122),s=r(i),c=n(944),u=r(c),l=n(943),f=r(l),p=n(800),d=r(p),h=n(1123),m=r(h),v=function(e,t){return e.filter(function(e){return!t.some(function(t){return t.style===e.style})})},y=function(e,t){return t.reduceRight(function(e,t){var n=e[e.length-1];return(0,a.default)(n.style===t.style,"Style "+n.style+" to be removed doesn't match expected "+t.style),e.slice(0,-1)},e)},g=function(e,t){return t.filter(function(t){return e>=t.offset&&e<t.offset+t.length})},b=function(e,t){var n=e.offset<=t.offset,r=e.offset+e.length>=t.offset+t.length;return n&&r},w=function(e,t){return t.offset+t.length-(e.offset+e.length)},_=function(e,t){for(var n=0;n<e.length;){if(!t.every(b.bind(null,e[n])))return e.slice(n);n++}return[]},E=function(e,t,n){return t+(0,f.default)(e(n.style)).start},O=function(e,t,n){return(0,f.default)(e(n.style)).end+t},C=function(e){return function(t){return e(t)}};C.__isMiddleware=!0,t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C;(0,a.default)(null!==e&&void 0!==e,"Expected raw block to be non-null");var n=void 0;n=!0===t.__isMiddleware?t(m.default):(0,u.default)((0,s.default)(t),(0,s.default)(m.default));for(var r="",o=[],i=e.inlineStyleRanges.sort(d.default),c=0;c<e.text.length;c++){var l=g(c,i),p=v(o,l),h=v(l,o),b=v(o,p),k=_(b,h),S=k.concat(h).sort(w),x=S.reduce(E.bind(null,n),"");r+=p.concat(k).reduce(O.bind(null,n),"")+x+e.text[c],o=y(o,k.concat(p)),o=o.concat(S),(0,a.default)(o.length===l.length,"Character "+c+": "+(o.length-l.length)+" styles left on stack that should no longer be there")}return r=o.reduceRight(function(e,t){return e+(0,f.default)(n(t.style)).end},r)}},1122:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t){return"function"==typeof e?e(t):e[t]}}},1123:function(e,t,n){"use strict";function r(e){switch(e){case"BOLD":return a.default.createElement("strong",null);case"ITALIC":return a.default.createElement("em",null);case"UNDERLINE":return a.default.createElement("u",null);case"CODE":return a.default.createElement("code",null);default:return{start:"",end:""}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(o)},1124:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t){return"function"==typeof e?e(t):e[t.type]}}},1125:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return(0,i.default)(null!==e&&void 0!==e,"Expected block HTML value to be non-null"),c.default.isValidElement(e)?(0,l.default)(e):e.hasOwnProperty("element")&&c.default.isValidElement(e.element)?Object.assign({},e,(0,l.default)(e.element)):((0,i.default)(e.hasOwnProperty("start")&&e.hasOwnProperty("end"),"convertToHTML: received block information without either a ReactElement or an object with start/end tags"),e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(82),i=r(a),s=n(0),c=r(s),u=n(847),l=r(u)},1126:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if((0,i.default)(null!==e&&void 0!==e,"Expected block HTML value to be non-null"),c.default.isValidElement(e.nest)){var t=(0,l.default)(e.nest),n=t.start,r=t.end;return Object.assign({},e,{nestStart:n,nestEnd:r})}return(0,i.default)(e.hasOwnProperty("nestStart")&&e.hasOwnProperty("nestEnd"),"convertToHTML: received block information without either a ReactElement or an object with start/end tags"),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(82),i=r(a),s=n(0),c=r(s),u=n(847),l=r(u)},1127:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default={unstyled:o.default.createElement("p",null),paragraph:o.default.createElement("p",null),"header-one":o.default.createElement("h1",null),"header-two":o.default.createElement("h2",null),"header-three":o.default.createElement("h3",null),"header-four":o.default.createElement("h4",null),"header-five":o.default.createElement("h5",null),"header-six":o.default.createElement("h6",null),"unordered-list-item":{element:o.default.createElement("li",null),nest:o.default.createElement("ul",null)},"ordered-list-item":{element:o.default.createElement("li",null),nest:o.default.createElement("ol",null)},media:o.default.createElement("figure",null)}},1128:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){return{text:"",inlines:[],entities:[],blocks:[]}}function a(e){var t=new Array(1);return e&&(t[0]=e),{text:k,inlines:[(0,g.OrderedSet)()],entities:t,blocks:[]}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,g.Map)();return{text:"\r",inlines:[(0,g.OrderedSet)()],entities:new Array(1),blocks:[{type:e,data:n,depth:Math.max(0,Math.min(S,t))}],isNewline:!0}}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,g.Map)();return{text:"\r",inlines:[(0,g.OrderedSet)()],entities:new Array(1),blocks:[{type:e,data:n,depth:Math.max(0,Math.min(S,t))}]}}function c(e,t){switch(e){case"h1":return"header-one";case"h2":return"header-two";case"h3":return"header-three";case"h4":return"header-four";case"h5":return"header-five";case"h6":return"header-six";case"li":return"ol"===t?"ordered-list-item":"unordered-list-item";case"blockquote":return"blockquote";case"pre":return"code-block";case"div":case"p":return"unstyled";default:return null}}function u(e,t,n){return c(e,n)}function l(e,t,n){var r=A[e];return r?n=n.add(r).toOrderedSet():t instanceof HTMLElement&&function(){var e=t;n=n.withMutations(function(t){"bold"===e.style.fontWeight&&t.add("BOLD"),"italic"===e.style.fontStyle&&t.add("ITALIC"),"underline"===e.style.textDecoration&&t.add("UNDERLINE"),"line-through"===e.style.textDecoration&&t.add("STRIKETHROUGH")}).toOrderedSet()}(),n}function f(e,t){return l(e,t,(0,g.OrderedSet)())}function p(e,t){var n=t.text.slice(0,1),r=e.text.slice(-1),o="\r"===r&&"\r"===n,a="\r"!==e.text&&"\r"!==t.text,i="\r"===e.text&&!e.isNewline&&t.isNewline;if(o&&(a||i)&&(e.text=e.text.slice(0,-1),e.inlines.pop(),e.entities.pop(),e.blocks.pop()),"\r"===e.text.slice(-1)){if(t.text===k||"\n"===t.text)return e;n!==k&&"\n"!==n||(t.text=t.text.slice(1),t.inlines.shift(),t.entities.shift())}var s=0===e.text.length&&t.isNewline;return{text:e.text+t.text,inlines:e.inlines.concat(t.inlines),entities:e.entities.concat(t.entities),blocks:e.blocks.concat(t.blocks),isNewline:s}}function d(e){return P.some(function(t){return-1!==e.indexOf("<"+t)})}function h(e,t,n,r,u,f,d,m,v,b,w){var _=e.nodeName.toLowerCase(),E=!1,O="unstyled";if("#text"===_){var k=function(){var n=e.textContent;if(""===n.trim()&&"code-block"!==r)return{v:a(w)};I=_;var o=Array(n.length).fill(w),i=0;return v(n).sort(C.default).forEach(function(e){var t=e.entity,r=e.offset,a=e.length,s=e.result,c=r+i;null!==s&&void 0!==s||(s=n.substr(c,a));var u=n.split("");u.splice.bind(u,c,a).apply(u,s.split("")),n=u.join(""),o.splice.bind(o,c,a).apply(o,Array(s.length).fill(t)),i+=s.length-a}),{v:{text:n,inlines:Array(n.length).fill(t),entities:o,blocks:[]}}}();if("object"===(void 0===k?"undefined":y(k)))return k.v}if(I=_,"br"===_){return i(r||"unstyled",f)}var S=o(),x=null;t=l(_,e,t),t=d(_,e,t),"ul"!==_&&"ol"!==_||(n&&(f+=1),n=_,r=null);var T=b(_,e,n,r)||{},j=void 0,P=void 0;if("string"==typeof T?(j=T,P=(0,g.Map)()):(j="string"==typeof T?T:T.type,P=T.data?(0,g.Map)(T.data):(0,g.Map)()),r||-1===u.indexOf(_)&&!j)if(!n||"ordered-list-item"!==r&&"unordered-list-item"!==r||"li"!==_)r&&"atomic"!==r&&"atomic"===j&&(r=j,E=!0,S=i(j,f,P));else{var A=c(_,n);S=s(A,f),r=A,E=!0,O="ul"===n?"unordered-list-item":"ordered-list-item"}else S=s(j||c(_,n),f,P),r=j||c(_,n),E=!0;var M=e.firstChild;null!=M||!w||"atomic"!==j&&"atomic"!==r||(M=document.createTextNode("a")),null!=M&&(_=M.nodeName.toLowerCase());for(var N=null;M;){N=m(_,M),x=h(M,t,n,r,u,f,d,m,v,b,N||w),S=p(S,x);var R=M.nextSibling;if(R&&u.indexOf(_)>=0&&r){var D=b(_,e,n,r)||{},L=void 0,F=void 0;"string"==typeof D?(L=D,F=(0,g.Map)()):(L=D.type||c(_,n),F=D.data?(0,g.Map)(D.data):(0,g.Map)()),S=p(S,i(L,f,F))}R&&(_=R.nodeName.toLowerCase()),M=R}return E&&(S=p(S,s(O,f,(0,g.Map)()))),S}function m(e,t,n,r,o,a){e=e.trim().replace(x,"").replace(T,k);var i=a(e);if(!i)return null;I=null;var s=d(e)?P.concat(["div"]):["div"],c=h(i,(0,g.OrderedSet)(),"ul",null,s,-1,t,n,r,o);return 0===c.text.indexOf("\r")&&(c={text:c.text.slice(1),inlines:c.inlines.slice(1),entities:c.entities.slice(1),blocks:c.blocks}),"\r"===c.text.slice(-1)&&(c.text=c.text.slice(0,-1),c.inlines=c.inlines.slice(0,-1),c.entities=c.entities.slice(0,-1),c.blocks.pop()),0===c.blocks.length&&c.blocks.push({type:"unstyled",data:(0,g.Map)(),depth:0}),c.text.split("\r").length===c.blocks.length+1&&c.blocks.unshift({type:"unstyled",data:(0,g.Map)(),depth:0}),c}function v(e,t,n,r,o,a){var i=m(e,t,n,r,o,a);if(null==i)return[];var s=0;return i.text.split("\r").map(function(e,t){e=U(e);var n=s+e.length,r=F(i).inlines.slice(s,n),o=F(i).entities.slice(s,n),a=(0,g.List)(r.map(function(e,t){var n={style:e,entity:null};return o[t]&&(n.entity=o[t]),w.CharacterMetadata.create(n)}));return s=n+1,new w.ContentBlock({key:(0,w.genKey)(),type:F(i).blocks[t].type,data:F(i).blocks[t].data,depth:F(i).blocks[t].depth,text:e,characterList:a})})}Object.defineProperty(t,"__esModule",{value:!0});var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g=n(726),b=n(82),w=(r(b),n(728)),_=n(945),E=r(_),O=n(800),C=r(O),k=" ",S=4,x=new RegExp("\r","g"),T=(new RegExp("\n","g"),new RegExp("&nbsp;","g")),j=new RegExp("\r","g"),P=["p","h1","h2","h3","h4","h5","h6","li","blockquote","pre"],A={b:"BOLD",code:"CODE",del:"STRIKETHROUGH",em:"ITALIC",i:"ITALIC",s:"STRIKETHROUGH",strike:"STRIKETHROUGH",strong:"BOLD",u:"UNDERLINE"},I=void 0,M=function(e,t){return e&&!0===e.__isMiddleware?e(t):e},N=function(e,t,n){},R=function(e,t,n){return n},D=function(e,t){},L=function(e){return[]},F=function(e){if(null!=e)return e;throw new Error("Got unexpected null or undefined")},U=function(e){return e.replace(j,"")},B=function(e){var t=e.htmlToStyle,n=void 0===t?R:t,r=e.htmlToEntity,o=void 0===r?D:r,a=e.textToEntity,i=void 0===a?L:a,s=e.htmlToBlock,c=void 0===s?N:s;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E.default;return w.ContentState.createFromBlockArray(v(e,M(n,f),M(o,D),M(i,L),M(c,u),t))}};t.default=function(){return arguments.length>=1&&"string"==typeof(arguments.length<=0?void 0:arguments[0])?B({}).apply(void 0,arguments):B.apply(void 0,arguments)}},1129:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),c=n(2),u=n.n(c),l=n(138),f=n(6),p=n.n(f),d=n(33),h=n(11),m=n(3),v=n(275),y=n(828),g=n(1130),b=(n.n(g),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),w=function(e){return new Promise(function(t){setTimeout(t,e)})},_=function(e){return new Promise(function(t,n){var r=new Image;r.onload=t,r.onerror=n,r.src=e})},E=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.handleStart=function(){var e=a.props,t=e.session.value,n=e.data,r=n.rawWidth,o=n.rawHeight,i=a.imgNode;"file"===t.type&&"image/gif"===t.value.type&&(p.a.setModule(i,{module:"GifItem"},{card:{content:{type:"Gif"}}}),p.a.trackEvent(i,{action:"Upload"},{gif:{gif_bytes:t.value.size,gif_hight:o,gif_width:r}}))},a.handleError=function(e){a.props.onImageUploadError&&a.props.onImageUploadError(e)},a.handleComplete=function(e){var t=a.props.session.value,n=e.url,r=e.rawWidth,o=e.rawHeight,i=e.watermark,s=e.originalSrc,c=e.watermarkSrc,u=e.privateWatermarkSrc,f=a.imgNode;"file"===t.type&&"image/gif"===t.value.type&&p.a.trackEvent(f,{action:"StatusReport"},{status:{event:{action:"Upload",path:[{module:"GifItem"}]},result:"Success"},gif:{gif_bytes:t.value.size,gif_hight:o,gif_width:r}});var h=Object(l.a)(n,{quality:Object(d.default)(navigator.userAgent).Mobile?50:80,size:"hd"});Promise.race([_(h),w(500)]).catch(function(){}).then(function(){a.props.onImageUploaded&&a.props.onImageUploaded({src:h,rawWidth:r,rawHeight:o,watermark:i,originalSrc:s,watermarkSrc:c,privateWatermarkSrc:u})})},a.handleRetry=function(){a.props.session.start()},i=n,o(a,i)}return a(t,e),b(t,[{key:"componentDidMount",value:function(){var e=this.props.session;e.addListener("start",this.handleStart),e.addListener("error",this.handleError),e.addListener("complete",this.handleComplete),e.state.error||e.start()}},{key:"componentWillUnmount",value:function(){var e=this.props.session;e.removeListener("start",this.handleStart),e.removeListener("error",this.handleError),e.removeListener("complete",this.handleComplete),e.abort()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.onClick,o=t.onMouseDown,a=t.session,i=a.state;return i.imageReady?s.a.createElement("div",{className:"Editable-imageUploader",ref:function(t){return e.imgNode=t}},s.a.createElement("div",{className:u()("Editable-imageUploader-layout",{"is-fullWidth":!i.image},n),onClick:r,onMouseDown:o},i.image?s.a.createElement("img",{className:"Editable-imageUploader-image",src:i.image,alt:"图片"}):s.a.createElement("div",{className:"Editable-imageUploader-placeholder"}),s.a.createElement("div",{className:u()("Editable-imageUploader-status",{"is-error":i.error})},s.a.createElement("div",{className:"Editable-imageUploader-statusText"},i.uploading&&"图片上传中",i.error&&"图片上传失败"),i.error&&s.a.createElement("div",{className:"Editable-imageUploader-retry"},s.a.createElement(m.default,{preset:"link",icon:h.Refresh,label:"重试",onClick:this.handleRetry}))),i.uploading&&s.a.createElement("div",{className:"Editable-imageUploader-progress"},s.a.createElement(v.a,{active:!0})),i.error&&s.a.createElement("div",{className:"Editable-imageUploader-progress is-error"}))):s.a.createElement("div",{className:"Editable-imageUploader",ref:function(t){return e.imgNode=t}})}}]),t}(i.Component);t.a=Object(y.a)(function(e){return{type:"image",value:e.data.upload}})(E)},1130:function(e,t){},1131:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e/1e3/1e3;return(t=t<10?t.toPrecision(1):Math.round(t))+"M"}var s,c,u=n(0),l=n.n(u),f=n(2),p=n.n(f),d=n(6),h=n.n(d),m=n(275),v=n(156),y=n(828),g=n(1132),b=(n.n(g),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),w={upload:"视频上传失败",convert:"视频上传失败"},_=(c=s=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.handleStart=function(){a.trackEvent("Upload")},a.handleAbort=function(){a.trackEvent("Cancel")},a.handleError=function(){a.trackEvent("StatusReport",{status:{event:{action:"Upload",path:[{module:"VideoItem"}],url:location.href},result:"Fail"}}),a.props.onVideoUploadError&&a.props.onVideoUploadError(a.props.entityKey)},a.handleComplete=function(e){var t=a.props.session.state,n=t.uploadTime,r=t.transcodeTime;a.trackEvent("StatusReport",{status:{event:{action:"Upload",path:[{module:"VideoItem"}],url:location.href},result:"Success"},play:{upload_time:n,transcode_time:r}}),a.handleVideoUploadComplete(e)},a.handleLensPlay=function(){return!0},a.handleUploadVideoPosterButtonClick=function(){a.props.onVideoPosterButtonClick("",a.handleUploadVideoPoster)},a.handleUploadVideoPoster=function(e){a.props.handleVideoPosterChange(e)},i=n,o(a,i)}return a(t,e),b(t,[{key:"componentDidMount",value:function(){this.pendingEvents=[];var e=this.props.session;this.video=e.video,this.setModule(),e.addListener("start",this.handleStart),e.addListener("abort",this.handleAbort),e.addListener("error",this.handleError),e.addListener("complete",this.handleComplete),e.state.error||e.start()}},{key:"componentWillReceiveProps",value:function(e){this.video!==e.session.video&&(this.video=e.session.video,this.setModule(),this.flushPendingEvents())}},{key:"componentWillUnmount",value:function(){var e=this.props.session;e.removeListener("start",this.handleStart),e.removeListener("abort",this.handleAbort),e.removeListener("error",this.handleError),e.removeListener("complete",this.handleComplete),e.abort()}},{key:"setModule",value:function(){h.a.setModule(this,{module:"VideoItem"},{card:{content:{type:"Video",video_id:this.video?this.video.id:null}}})}},{key:"trackEvent",value:function(e,t){if(!this.video)return void this.pendingEvents.push({action:e,extra:t});h.a.trackEvent(this,{action:e},t)}},{key:"flushPendingEvents",value:function(){var e=this,t=this.pendingEvents;this.pendingEvents=[],t.forEach(function(t){var n=t.action,r=t.extra;e.trackEvent(n,r)})}},{key:"handleVideoUploadComplete",value:function(e){if(this.props.onVideoUploaded){var t=this.props.data.thumbnail;this.props.onVideoUploaded(this.props.entityKey,{isLens:!0,id:e.id,isPlayable:!0,title:"",thumbnail:t||e.thumbnail,url:"https://www.zhihu.com/video/"+e.id,playerUrl:"https://www.zhihu.com/video/"+e.id}),t&&this.props.handleUpdateVideoContent(e.id,t)}}},{key:"renderThumbnail",value:function(){var e=this.props,t=e.allowVideoPosterChange,n=e.session,r=e.data,o=n.state,a=o.uploading,s=o.uploadingType,c=o.error,u=o.errorData,f=o.fileSize,d=o.uploadedSize,h=r.thumbnail,v=t()?l.a.createElement("div",{className:"Editable-videoUploader-uploadPosterButton",onClick:this.handleUploadVideoPosterButtonClick},l.a.createElement("p",null,"上传视频封面")):null;return l.a.createElement("div",{className:"Editable-videoUploader-thumbnail"},h&&l.a.createElement("img",{src:h,alt:"视频封面",className:"Editable-videoUploader-image"}),h&&l.a.createElement("div",{className:"Editable-videoUploader-imageMask"}),l.a.createElement("div",{className:"Editable-videoUploader-text"},l.a.createElement("div",{className:"Editable-videoUploader-status"},a&&"upload"===s&&"视频上传中",a&&"convert"===s&&"视频转码中",c&&(w[u.type]||u.payload&&u.payload.message||"未知错误")),a&&l.a.createElement("div",{className:"Editable-videoUploader-size"},i(d)," / ",i(f)),v),l.a.createElement("div",{className:"Editable-videoUploader-progress"},l.a.createElement("div",{className:p()("Editable-videoUploader-progress-bar",{"is-error":c}),style:{width:c?"100%":d/f*100+"%"}}),a&&"convert"===s&&l.a.createElement(m.a,{active:!0})))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.onClick,r=e.onMouseDown;return l.a.createElement("div",{className:p()("Editable-videoUploader",t),onClick:n,onMouseDown:r},l.a.createElement(v.a,{isLens:!0,id:"0",isPlayable:!0,url:"https://www.zhihu.com/video/0",playerUrl:"https://www.zhihu.com/video/0",thumbnail:this.renderThumbnail(),showPlayButton:!1,onLensPlay:this.handleLensPlay}))}}]),t}(u.Component),s.defaultProps={allowVideoPosterChange:function(){return!1}},c);t.a=Object(y.a)(function(e){return{type:"video",value:e.data.upload.file}})(_)},1132:function(e,t){},1133:function(e,t,n){"use strict";function r(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){t&&Object.keys(t).forEach(function(n){e[n]=t[n]})}),e}function o(e){return Object.prototype.toString.call(e)}function a(e){return"[object String]"===o(e)}function i(e){return"[object Object]"===o(e)}function s(e){return"[object RegExp]"===o(e)}function c(e){return"[object Function]"===o(e)}function u(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function l(e){return Object.keys(e||{}).reduce(function(e,t){return e||g.hasOwnProperty(t)},!1)}function f(e){e.__index__=-1,e.__text_cache__=""}function p(e){return function(t,n){var r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function d(){return function(e,t){t.normalize(e)}}function h(e){function t(e){return e.replace("%TLDS%",o.src_tlds)}function r(e,t){throw new Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}var o=e.re=n(1134)(e.__opts__),l=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||l.push(w),l.push(o.src_xn),o.src_tlds=l.join("|"),o.email_fuzzy=RegExp(t(o.tpl_email_fuzzy),"i"),o.link_fuzzy=RegExp(t(o.tpl_link_fuzzy),"i"),o.link_no_ip_fuzzy=RegExp(t(o.tpl_link_no_ip_fuzzy),"i"),o.host_fuzzy_test=RegExp(t(o.tpl_host_fuzzy_test),"i");var h=[];e.__compiled__={},Object.keys(e.__schemas__).forEach(function(t){var n=e.__schemas__[t];if(null!==n){var o={validate:null,link:null};return e.__compiled__[t]=o,i(n)?(s(n.validate)?o.validate=p(n.validate):c(n.validate)?o.validate=n.validate:r(t,n),void(c(n.normalize)?o.normalize=n.normalize:n.normalize?r(t,n):o.normalize=d())):a(n)?void h.push(t):void r(t,n)}}),h.forEach(function(t){e.__compiled__[e.__schemas__[t]]&&(e.__compiled__[t].validate=e.__compiled__[e.__schemas__[t]].validate,e.__compiled__[t].normalize=e.__compiled__[e.__schemas__[t]].normalize)}),e.__compiled__[""]={validate:null,normalize:d()};var m=Object.keys(e.__compiled__).filter(function(t){return t.length>0&&e.__compiled__[t]}).map(u).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+o.src_ZPCc+"))("+m+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+o.src_ZPCc+"))("+m+")","ig"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),f(e)}function m(e,t){var n=e.__index__,r=e.__last_index__,o=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=o,this.text=o,this.url=o}function v(e,t){var n=new m(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function y(e,t){if(!(this instanceof y))return new y(e,t);t||l(e)&&(t=e,e={}),this.__opts__=r({},g,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=r({},b,e),this.__compiled__={},this.__tlds__=_,this.__tlds_replaced__=!1,this.re={},h(this)}var g={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1},b={"http:":{validate:function(e,t,n){var r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){var r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&":"===e[t-3]?0:t>=3&&"/"===e[t-3]?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){var r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},w="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",_="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");y.prototype.add=function(e,t){return this.__schemas__[e]=t,h(this),this},y.prototype.set=function(e){return this.__opts__=r(this.__opts__,e),this},y.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var t,n,r,o,a,i,s,c;if(this.re.schema_test.test(e))for(s=this.re.schema_search,s.lastIndex=0;null!==(t=s.exec(e));)if(o=this.testSchemaAt(e,t[2],s.lastIndex)){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+o;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=e.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||c<this.__index__)&&null!==(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(a=n.index+n[1].length,(this.__index__<0||a<this.__index__)&&(this.__schema__="",this.__index__=a,this.__last_index__=n.index+n[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&e.indexOf("@")>=0&&null!==(r=e.match(this.re.email_fuzzy))&&(a=r.index+r[1].length,i=r.index+r[0].length,(this.__index__<0||a<this.__index__||a===this.__index__&&i>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=a,this.__last_index__=i)),this.__index__>=0},y.prototype.pretest=function(e){return this.re.pretest.test(e)},y.prototype.testSchemaAt=function(e,t,n){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,n,this):0},y.prototype.match=function(e){var t=0,n=[];this.__index__>=0&&this.__text_cache__===e&&(n.push(v(this,t)),t=this.__last_index__);for(var r=t?e.slice(t):e;this.test(r);)n.push(v(this,t)),r=r.slice(this.__last_index__),t+=this.__last_index__;return n.length?n:null},y.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(e,t,n){return e!==n[t-1]}).reverse(),h(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,h(this),this)},y.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},y.prototype.onCompile=function(){},e.exports=y},1134:function(e,t,n){"use strict";e.exports=function(e){var t={};t.src_Any=n(1135).source,t.src_Cc=n(1136).source,t.src_Z=n(1137).source,t.src_P=n(1138).source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");return t.src_pseudo_letter="(?:(?![><｜]|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|[><｜]|"+t.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|[><｜]|[()[\\]{}.,\"'?!\\-]).|\\[(?:(?!"+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-]).|\\.{2,3}[a-zA-Z0-9%/]|\\.(?!"+t.src_ZCc+"|[.]).|"+(e&&e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+t.src_ZCc+").|\\!(?!"+t.src_ZCc+"|[!]).|\\?(?!"+t.src_ZCc+"|[?]).)+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]+',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-(?!-)|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|[><｜]|\\(|"+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}},1135:function(e,t){e.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},1136:function(e,t){e.exports=/[\0-\x1F\x7F-\x9F]/},1137:function(e,t){e.exports=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/},1138:function(e,t){e.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E44\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD807[\uDC41-\uDC45\uDC70\uDC71]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},1139:function(e,t){e.exports=["aaa","aarp","abarth","abb","abbott","abbvie","abc","able","abogado","abudhabi","ac","academy","accenture","accountant","accountants","aco","active","actor","ad","adac","ads","adult","ae","aeg","aero","aetna","af","afamilycompany","afl","africa","ag","agakhan","agency","ai","aig","aigo","airbus","airforce","airtel","akdn","al","alfaromeo","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","am","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","ao","aol","apartments","app","apple","aq","aquarelle","ar","arab","aramco","archi","army","arpa","art","arte","as","asda","asia","associates","at","athleta","attorney","au","auction","audi","audible","audio","auspost","author","auto","autos","avianca","aw","aws","ax","axa","az","azure","ba","baby","baidu","banamex","bananarepublic","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bb","bbc","bbt","bbva","bcg","bcn","bd","be","beats","beauty","beer","bentley","berlin","best","bestbuy","bet","bf","bg","bh","bharti","bi","bible","bid","bike","bing","bingo","bio","biz","bj","black","blackfriday","blanco","blockbuster","blog","bloomberg","blue","bm","bms","bmw","bn","bnl","bnpparibas","bo","boats","boehringer","bofa","bom","bond","boo","book","booking","boots","bosch","bostik","boston","bot","boutique","box","br","bradesco","bridgestone","broadway","broker","brother","brussels","bs","bt","budapest","bugatti","build","builders","business","buy","buzz","bv","bw","by","bz","bzh","ca","cab","cafe","cal","call","calvinklein","cam","camera","camp","cancerresearch","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","cartier","casa","case","caseih","cash","casino","cat","catering","catholic","cba","cbn","cbre","cbs","cc","cd","ceb","center","ceo","cern","cf","cfa","cfd","cg","ch","chanel","channel","chase","chat","cheap","chintai","chloe","christmas","chrome","chrysler","church","ci","cipriani","circle","cisco","citadel","citi","citic","city","cityeats","ck","cl","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","cm","cn","co","coach","codes","coffee","college","cologne","com","comcast","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cookingchannel","cool","coop","corsica","country","coupon","coupons","courses","cr","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","csc","cu","cuisinella","cv","cw","cx","cy","cymru","cyou","cz","dabur","dad","dance","data","date","dating","datsun","day","dclk","dds","de","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dj","dk","dm","dnp","do","docs","doctor","dodge","dog","doha","domains","dot","download","drive","dtv","dubai","duck","dunlop","duns","dupont","durban","dvag","dvr","dz","earth","eat","ec","eco","edeka","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","epost","epson","equipment","er","ericsson","erni","es","esq","estate","esurance","et","etisalat","eu","eurovision","eus","events","everbank","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fi","fiat","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","fj","fk","flickr","flights","flir","florist","flowers","fly","fm","fo","foo","food","foodnetwork","football","ford","forex","forsale","forum","foundation","fox","fr","free","fresenius","frl","frogans","frontdoor","frontier","ftr","fujitsu","fujixerox","fun","fund","furniture","futbol","fyi","ga","gal","gallery","gallo","gallup","game","games","gap","garden","gb","gbiz","gd","gdn","ge","gea","gent","genting","george","gf","gg","ggee","gh","gi","gift","gifts","gives","giving","gl","glade","glass","gle","global","globo","gm","gmail","gmbh","gmo","gmx","gn","godaddy","gold","goldpoint","golf","goo","goodhands","goodyear","goog","google","gop","got","gov","gp","gq","gr","grainger","graphics","gratis","green","gripe","grocery","group","gs","gt","gu","guardian","gucci","guge","guide","guitars","guru","gw","gy","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hgtv","hiphop","hisamitsu","hitachi","hiv","hk","hkt","hm","hn","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","honeywell","horse","hospital","host","hosting","hot","hoteles","hotels","hotmail","house","how","hr","hsbc","ht","htc","hu","hughes","hyatt","hyundai","ibm","icbc","ice","icu","id","ie","ieee","ifm","ikano","il","im","imamat","imdb","immo","immobilien","in","industries","infiniti","info","ing","ink","institute","insurance","insure","int","intel","international","intuit","investments","io","ipiranga","iq","ir","irish","is","iselect","ismaili","ist","istanbul","it","itau","itv","iveco","iwc","jaguar","java","jcb","jcp","je","jeep","jetzt","jewelry","jio","jlc","jll","jm","jmp","jnj","jo","jobs","joburg","jot","joy","jp","jpmorgan","jprs","juegos","juniper","kaufen","kddi","ke","kerryhotels","kerrylogistics","kerryproperties","kfh","kg","kh","ki","kia","kim","kinder","kindle","kitchen","kiwi","km","kn","koeln","komatsu","kosher","kp","kpmg","kpn","kr","krd","kred","kuokgroup","kw","ky","kyoto","kz","la","lacaixa","ladbrokes","lamborghini","lamer","lancaster","lancia","lancome","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lb","lc","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","li","liaison","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","linde","link","lipsy","live","living","lixil","lk","loan","loans","locker","locus","loft","lol","london","lotte","lotto","love","lpl","lplfinancial","lr","ls","lt","ltd","ltda","lu","lundbeck","lupin","luxe","luxury","lv","ly","ma","macys","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","maserati","mattel","mba","mc","mcd","mcdonalds","mckinsey","md","me","med","media","meet","melbourne","meme","memorial","men","menu","meo","merckmsd","metlife","mg","mh","miami","microsoft","mil","mini","mint","mit","mitsubishi","mk","ml","mlb","mls","mm","mma","mn","mo","mobi","mobile","mobily","moda","moe","moi","mom","monash","money","monster","montblanc","mopar","mormon","mortgage","moscow","moto","motorcycles","mov","movie","movistar","mp","mq","mr","ms","msd","mt","mtn","mtr","mu","museum","mutual","mv","mw","mx","my","mz","na","nab","nadex","nagoya","name","nationwide","natura","navy","nba","nc","ne","nec","net","netbank","netflix","network","neustar","new","newholland","news","next","nextdirect","nexus","nf","nfl","ng","ngo","nhk","ni","nico","nike","nikon","ninja","nissan","nissay","nl","no","nokia","northwesternmutual","norton","now","nowruz","nowtv","np","nr","nra","nrw","ntt","nu","nyc","nz","obi","observer","off","office","okinawa","olayan","olayangroup","oldnavy","ollo","om","omega","one","ong","onl","online","onyourside","ooo","open","oracle","orange","org","organic","origins","osaka","otsuka","ott","ovh","pa","page","pamperedchef","panasonic","panerai","paris","pars","partners","parts","party","passagens","pay","pccw","pe","pet","pf","pfizer","pg","ph","pharmacy","phd","philips","phone","photo","photography","photos","physio","piaget","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","pk","pl","place","play","playstation","plumbing","plus","pm","pn","pnc","pohl","poker","politie","porn","post","pr","pramerica","praxi","press","prime","pro","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","ps","pt","pub","pw","pwc","py","qa","qpon","quebec","quest","qvc","racing","radio","raid","re","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","rightathome","ril","rio","rip","rmit","ro","rocher","rocks","rodeo","rogers","room","rs","rsvp","ru","rugby","ruhr","run","rw","rwe","ryukyu","sa","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sapo","sarl","sas","save","saxo","sb","sbi","sbs","sc","sca","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scjohnson","scor","scot","sd","se","search","seat","secure","security","seek","select","sener","services","ses","seven","sew","sex","sexy","sfr","sg","sh","shangrila","sharp","shaw","shell","shia","shiksha","shoes","shop","shopping","shouji","show","showtime","shriram","si","silk","sina","singles","site","sj","sk","ski","skin","sky","skype","sl","sling","sm","smart","smile","sn","sncf","so","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","space","spiegel","spot","spreadbetting","sr","srl","srt","st","stada","staples","star","starhub","statebank","statefarm","statoil","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","su","sucks","supplies","supply","support","surf","surgery","suzuki","sv","swatch","swiftcover","swiss","sx","sy","sydney","symantec","systems","sz","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tc","tci","td","tdk","team","tech","technology","tel","telecity","telefonica","temasek","tennis","teva","tf","tg","th","thd","theater","theatre","tiaa","tickets","tienda","tiffany","tips","tires","tirol","tj","tjmaxx","tjx","tk","tkmaxx","tl","tm","tmall","tn","to","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","tr","trade","trading","training","travel","travelchannel","travelers","travelersinsurance","trust","trv","tt","tube","tui","tunes","tushu","tv","tvs","tw","tz","ua","ubank","ubs","uconnect","ug","uk","unicom","university","uno","uol","ups","us","uy","uz","va","vacations","vana","vanguard","vc","ve","vegas","ventures","verisign","versicherung","vet","vg","vi","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","vista","vistaprint","viva","vivo","vlaanderen","vn","vodka","volkswagen","volvo","vote","voting","voto","voyage","vu","vuelos","wales","walmart","walter","wang","wanggou","warman","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","wf","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","ws","wtc","wtf","xbox","xerox","xfinity","xihuan","xin","कॉम","セール","佛山","ಭಾರತ","慈善","集团","在线","한국","ଭାରତ","大众汽车","点看","คอม","ভাৰত","ভারত","八卦","موقع","বাংলা","公益","公司","香格里拉","网站","移动","我爱你","москва","қаз","католик","онлайн","сайт","联通","срб","бг","бел","קום","时尚","微博","淡马锡","ファッション","орг","नेट","ストア","삼성","சிங்கப்பூர்","商标","商店","商城","дети","мкд","ею","ポイント","新闻","工行","家電","كوم","中文网","中信","中国","中國","娱乐","谷歌","భారత్","ලංකා","電訊盈科","购物","クラウド","ભારત","通販","भारतम्","भारत","भारोत","网店","संगठन","餐厅","网络","ком","укр","香港","诺基亚","食品","飞利浦","台湾","台灣","手表","手机","мон","الجزائر","عمان","ارامكو","ایران","العليان","اتصالات","امارات","بازار","پاکستان","الاردن","موبايلي","بارت","بھارت","المغرب","ابوظبي","السعودية","ڀارت","كاثوليك","سودان","همراه","عراق","مليسيا","澳門","닷컴","政府","شبكة","بيتك","عرب","გე","机构","组织机构","健康","ไทย","سورية","рус","рф","珠宝","تونس","大拿","みんな","グーグル","ελ","世界","書籍","ഭാരതം","ਭਾਰਤ","网址","닷넷","コム","天主教","游戏","vermögensberater","vermögensberatung","企业","信息","嘉里大酒店","嘉里","مصر","قطر","广东","இலங்கை","இந்தியா","հայ","新加坡","فلسطين","政务","xperia","xxx","xyz","yachts","yahoo","yamaxun","yandex","ye","yodobashi","yoga","yokohama","you","youtube","yt","yun","za","zappos","zara","zero","zip","zippo","zm","zone","zuerich","zw"]},1140:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}var f=n(1141),p=n.n(f),d=n(939),h=n.n(d),m=n(1006),v=n(57),y=n(728),g=function(e,t){var n=e.getCurrentContent(),r=n,o=e.getSelection(),a=n.getBlockForKey(o.focusKey).getText();if("@"===(a&&a.charAt(o.focusOffset-1))){r=n.createEntity("mention-cancel-token","IMMUTABLE");var i=r.getLastCreatedEntityKey();o=o.merge({anchorOffset:o.anchorOffset-1}),r=y.Modifier.replaceText(n,o,"@"+(t||""),null,i)}var s=y.EditorState.push(e,r,"cancel-mention");return document.activeElement!==document.body&&(s=y.EditorState.forceSelection(s,r.getSelectionAfter())),s},b=g,w=/^[?,.;:!？，。；：、！]$/,_=function(e,t){var n=e.getCurrentContent(),r=n,o=e,a=e.getSelection(),i=n.getBlockForKey(a.focusKey).getText(),s=function(e){return!!i&&i.charAt(e)},c=s(a.focusOffset-1),u=s(a.focusOffset-2),l=s(a.focusOffset);"@"===c&&(a=a.merge({anchorKey:a.focusKey,anchorOffset:a.focusOffset-1,focusOffset:a.focusOffset}),r=y.Modifier.replaceText(n,a,""));var f=0!==a.anchorOffset&&("@"!==c&&" "!==c||"@"===c&&" "!==u);r=y.Modifier.replaceText(n,a,f?" ":""),r=r.createEntity("mention","IMMUTABLE",t);var p=r.getLastCreatedEntityKey();return r=y.Modifier.insertText(r,r.getSelectionAfter(),"@"+t.name,null,p),w.test(l)||(r=y.Modifier.insertText(r,r.getSelectionAfter()," ")),o=y.EditorState.push(e,r,"insert-mention"),o=y.EditorState.forceSelection(o,r.getSelectionAfter())},E=_,O=n(1),C=n.n(O),k=n(0),S=n.n(k),x=function(e){var t=e.contentState,n=e.entityKey,r=e.children,o=t.getEntity(n).getData(),a=o.id,i=o.urlToken,s=o.isOrg;return S.a.createElement("a",{className:"member_mention",target:"_blank","data-hash":a,href:"/"+(s?"org":"people")+"/"+i},r)};x.propTypes={entityKey:C.a.string.isRequired,contentState:C.a.object.isRequired,children:C.a.node.isRequired};var T=x,j=function(e){var t=e.children;return S.a.createElement("span",null,t)};j.propTypes={children:C.a.node.isRequired};var P,A,I=j,M=n(85),N=n(1005),R=n(56),D=(n(1142),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),L=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),F=(A=P=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.state={value:"",userItems:[],styles:{}},a.handleKeyDown=function(e){var t=a.state.value,n=a.props.onCancelMention;8!==e.keyCode&&13!==e.keyCode&&32!==e.keyCode||t?27===e.keyCode&&n(t):(e.preventDefault(),n())},a.handleChange=function(e){a.safeSetState({value:e});var t=a.props,n=t.source,r=t.itemsFilter;n(e).then(function(e){a.safeSetState({userItems:r(e,a)})})},a.handleSelect=function(e,t){a.props.onSelectItem(t)},a.handleBlur=function(){a.props.onCancelMention(a.state.value)},i=n,o(a,i)}return a(t,e),L(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.updateStyles(),e.autoComplete.inputNode.focus()})}},{key:"componentWillUnmount",value:function(){this.isUnmouted=!0}},{key:"safeSetState",value:function(e){this.isUnmouted||this.setState(e)}},{key:"updateStyles",value:function(){this.safeSetState({styles:D({},this.calcInputPosition(),this.calcTargetFontStyles())})}},{key:"calcTargetFontStyles",value:function(){var e=this.props.target;return{fontSize:e?window.getComputedStyle(e).fontSize:"inherit"}}},{key:"calcInputPosition",value:function(){var e=this.element,t=this.props.target;if(!e||!t)return null;var n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return{left:n.right+1,top:window.pageYOffset+n.top+(n.height-r.height)/2}}},{key:"render",value:function(){var e=this,t=this.state,n=t.value,r=t.userItems,o=t.styles;return S.a.createElement("div",{className:"MentionSuggestions",style:o,ref:function(t){e.element=t}},S.a.createElement(R.b,{value:n,ref:function(t){e.autoComplete=t},onChange:this.handleChange,items:r,menuProps:{targetContainerMinHeight:300,menuClassName:"MentionSuggestions-menu"},inputProps:{placeholder:"想用 @ 提到谁？",className:"MentionSuggestions-input",onKeyDown:this.handleKeyDown},onSelect:this.handleSelect,onBlur:this.handleBlur,renderItem:function(e){return S.a.createElement(R.a,e)}}))}}]),t}(k.Component),P.contextTypes={currentUser:C.a.object},P.propTypes={source:C.a.func.isRequired,target:C.a.object,onSelectItem:C.a.func.isRequired,onCancelMention:C.a.func.isRequired},P.defaultProps={itemsFilter:function(e,t){var n=t.currentUser,r=void 0===n?{}:n;return e.filter(function(e){return e.urlToken!==r.urlToken}).slice(0,6)}},A),U=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),B=function(e){function t(){return s(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),U(t,[{key:"componentDidMount",value:function(){this.forceUpdate()}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=i(t,["children"]);return S.a.createElement("span",null,S.a.createElement("span",{ref:function(t){e.target=t}},n),this.target&&S.a.createElement(M.default,null,S.a.createElement(N.a,null,S.a.createElement(F,l({},r,{target:this.target})))))}}]),t}(k.Component);B.propTypes={children:C.a.node};var z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K=/@/g,q={source:v.a},H=function(e){e=z({},q,e);var t={},n=function(e){var n=z({},e),r=t.getEditorState();t.setEditorState(E(r,n))},r=function(e){var n=t.getEditorState();t.setEditorState(b(n,e))};return{decorators:[{strategy:Object(m.a)("mention"),component:T},{strategy:Object(m.a)("mention-cancel-token"),component:I},{strategy:function(e,n){var r=t.getEditorState(),o=r.getSelection();o.hasFocus&&o.focusKey===e.key&&o.focusOffset===o.anchorOffset&&p()(K,e,function(e,t){o.focusOffset===t-1&&n(e,t)})},component:h()(B,{source:e.source,onSelectItem:n,onCancelMention:r})}],initialize:function(e){var n=e.getEditorState,r=e.setEditorState;t.getEditorState=n,t.setEditorState=r}}},V=H;n.d(t,"a",function(){return V})},1141:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){for(var r=t.getText(),o=void 0,a=void 0;null!==(o=e.exec(r));)a=o.index,n(a,a+o[0].length)};t.default=r},1142:function(e,t){},1143:function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(1004),a=n(1144),i=n.n(a),s=n(1161),c=n.n(s),u=n(1162),l=n.n(u),f=i()(["",""],["",""]),p=function(){function e(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return c()(this,e),n.length&&Array.isArray(n[0])&&(n=n[0]),this.transformers=n.map(function(e){return"function"==typeof e?e():e}),this.tag.bind(this)}return l()(e,[{key:"tag",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return"function"==typeof t[0]?this.interimTag.bind(this,t.shift()):this.transformEndResult(t.shift().reduce(this.processSubstitutions.bind(this,t)))}},{key:"interimTag",value:function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return this.tag(f,e.apply(void 0,[t].concat(r)))}},{key:"processSubstitutions",value:function(e,t,n){return t+this.transformSubstitution(e.shift(),t)+n}},{key:"transformSubstitution",value:function(e,t){var n=function(e,n){return n.onSubstitution?n.onSubstitution(e,t):e};return this.transformers.reduce(n,e)}},{key:"transformEndResult",value:function(e){var t=function(e,t){return t.onEndResult?t.onEndResult(e):e};return this.transformers.reduce(t,e)}}]),e}(),d=p,h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{onEndResult:function(t){if("left"===(e=e.toLowerCase())||"right"===e)e=e.charAt(0).toUpperCase()+e.slice(1);else if(""!==e)throw new Error("Side not supported: "+e);return t["trim"+e]()}}},m=h,v=n(1166),y=n.n(v),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"initial";return{onEndResult:function(t){if("initial"===e){var n=t.match(/^[ \t]*(?=\S)/gm);if(null===n)return t;var r=Math.min.apply(Math,y()(n.map(function(e){return e.length}))),o=new RegExp("^[ \\t]{"+r+"}","gm");t=r>0?t.replace(o,""):t}else{if("all"!==e)throw new Error("Unknown type: "+e);t=t.split("\n").map(function(e){return e.trimLeft()}).join("\n")}return t}}},b=g,w=function(e,t){return{onEndResult:function(n){if(null==e||null==t)throw new Error("replaceResultTransformer requires at least 2 arguments.");return n.replace(e,t)}}},_=w,E=function(e,t){return{onSubstitution:function(n,r){if(null==e||null==t)throw new Error("replaceSubstitutionTransformer requires at least 2 arguments.");return null==n?n:n.toString().replace(e,t)}}},O=E,C={separator:"",conjunction:"",serial:!1},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return{onSubstitution:function(t,n){if(Array.isArray(t)){var r=e.separator,o=e.conjunction,a=e.serial,i=n.match(/(\s+)$/);if(t=i?t.join(r+i[1]):t.join(r+" "),o){var s=t.lastIndexOf(r);t=t.substr(0,s)+(a?r:"")+" "+o+t.substr(s+1)}}return t}}},S=k,x=function(e){return{onSubstitution:function(t,n){if(null==e||"string"!=typeof e)throw new Error("You need to specify a string character to split by.");return"string"==typeof t&&t.includes(e)&&(t=t.split(e)),t}}},T=x,j=n(1185),P=n.n(j),A=function(e){return null!=e&&!P()(e)&&"boolean"!=typeof e},I=function(){return{onSubstitution:function(e){return Array.isArray(e)?e.filter(A):A(e)?e:""}}},M=I,N=(new d(S({separator:","}),b,m),new d(S({separator:",",conjunction:"and"}),b,m),new d(S({separator:",",conjunction:"or"}),b,m),new d(T("\n"),M,S,b,m),new d(T("\n"),S,b,m,O(/&/g,"&amp;"),O(/</g,"&lt;"),O(/>/g,"&gt;"),O(/"/g,"&quot;"),O(/'/g,"&#x27;"),O(/`/g,"&#x60;"))),R=N,D=new d(_(/(?:\s+)/g," "),m),L=D,F=(new d(_(/(?:\n\s+)/g,""),m),new d(S({separator:","}),_(/(?:\s+)/g," "),m),new d(S({separator:",",conjunction:"or"}),_(/(?:\s+)/g," "),m),new d(S({separator:",",conjunction:"and"}),_(/(?:\s+)/g," "),m),new d(S,b,m),new d(S,_(/(?:\s+)/g," "),m),new d(b,m),new d(b("all"),m),r(["<",">"],["<",">"])),U=r(["</",">"],["</",">"]),B=r(['<pre lang="','">'],['<pre lang="','">']),z=r(['\n                <a\n                  href="','"\n                  data-draft-node="block"\n                  data-draft-type="link-card">'],['\n                <a\n                  href="','"\n                  data-draft-node="block"\n                  data-draft-type="link-card">']),K=r(['\n                <a\n                  href="','"\n                  data-draft-node="block"\n                  data-draft-type="link-card"\n                  data-image="','"\n                  data-image-width="','"\n                  data-image-height="','">'],['\n                <a\n                  href="','"\n                  data-draft-node="block"\n                  data-draft-type="link-card"\n                  data-image="','"\n                  data-image-width="','"\n                  data-image-height="','">']),q=r(['<a href="','">'],['<a href="','">']),H=r(['<a\n          class="member_mention"\n          href="','"\n          data-hash="','">',"</a>"],['<a\n          class="member_mention"\n          href="','"\n          data-hash="','">',"</a>"]),V=r(['<img\n              src="','"\n              data-caption="','"\n              data-size="','"\n              data-rawwidth="','"\n              data-rawheight="','"\n              data-watermark="','"\n              data-original-src="','"\n              data-watermark-src="','"\n              data-private-watermark-src="','"\n            />'],['<img\n              src="','"\n              data-caption="','"\n              data-size="','"\n              data-rawwidth="','"\n              data-rawheight="','"\n              data-watermark="','"\n              data-original-src="','"\n              data-watermark-src="','"\n              data-private-watermark-src="','"\n            />']),W=r(['<img\n            src="','"\n            data-caption="','"\n            data-size="','" />'],['<img\n            src="','"\n            data-caption="','"\n            data-size="','" />']),G=r(['<a\n            class="unprocessable_video"\n            data-lens-id="','"\n            data-lens-status="','"\n            data-description="','"\n          ></a>'],['<a\n            class="unprocessable_video"\n            data-lens-id="','"\n            data-lens-status="','"\n            data-description="','"\n          ></a>']),Y=r(['<a\n          class="video-link"\n          href="','"\n          data-src="','"\n          data-name="','"\n          data-poster="','"\n          data-video-id="','"\n          data-lens-id="','"\n          data-video-playable="','">',"</a>"],['<a\n          class="video-link"\n          href="','"\n          data-src="','"\n          data-name="','"\n          data-poster="','"\n          data-video-id="','"\n          data-lens-id="','"\n          data-video-playable="','">',"</a>"]),Z=r(['<img\n          eeimg="1"\n          src="//www.zhihu.com/equation?tex=','"\n          alt="','" />'],['<img\n          eeimg="1"\n          src="//www.zhihu.com/equation?tex=','"\n          alt="','" />']);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"p";return e.hasText()?Object(o.convertToHTML)({styleToHTML:{BOLD:{start:"<b>",end:"</b>"},ITALIC:{start:"<i>",end:"</i>"},UNDERLINE:{start:"<u>",end:"</u>"},CODE:{start:"<code>",end:"</code>"}},blockToHTML:function(e){return{unstyled:{start:R(F,t),end:R(U,t),empty:"<p><br></p>"},header:{start:"<h2>",end:"</h2>"},blockquote:{start:"<blockquote>",end:"</blockquote>"},"code-block":{start:R(B,e.data.language?e.data.language.id:""),end:"</pre>"},"ordered-list-item":{start:"<li>",end:"</li>",nestStart:"<ol>",nestEnd:"</ol>"},"unordered-list-item":{start:"<li>",end:"</li>",nestStart:"<ul>",nestEnd:"</ul>"},atomic:{start:"",end:""}}[e.type]},entityToHTML:function(e,t){var n=t,r=e.type,o=e.data;if("link"===r.toLowerCase())n=o.isCard?o.image?L(R)(K,o.url,o.image,o.imageWidth,o.imageHeight)+t+"</a>":L(R)(z,o.url)+t+"</a>":R(q,o.url)+t+"</a>";else if("mention"===e.type)n=L(R)(H,"/"+(e.data.isOrg?"org":"people")+"/"+e.data.urlToken,e.data.id,t);else if("image"===e.type){if(e.data.upload)return" ";n=e.data.rawWidth&&e.data.rawHeight?L(R)(V,e.data.src,e.data.caption||"",e.data.size||"normal",e.data.rawWidth,e.data.rawHeight,e.data.watermark||"",e.data.originalSrc||"",e.data.watermarkSrc||"",e.data.privateWatermarkSrc||""):L(R)(W,e.data.src,e.data.caption||"",e.data.size||"normal")}else if("video"===e.type||"embedded-video"===e.type){if(e.data.upload)return" ";if(e.data.error&&e.data.isLens)return L(R)(G,e.data.id,e.data.error.status,e.data.error.message);n=L(R)(Y,e.data.url,e.data.src||"",e.data.title||"",e.data.thumbnail||"",!e.data.isLens&&e.data.id||"",e.data.isLens&&e.data.id||"",e.data.isPlayable||!1,e.data.title||"")}else"formula"===e.type?n=L(R)(Z,encodeURIComponent(e.data.value),e.data.value):"divider"===e.type&&(n="<hr />");return n}})(e).replace(/<\/blockquote><blockquote>|<\/pre><pre( lang="[^"]*")?>/g,"<br>").replace(/\n/g,"<br>"):""}},1144:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(1145),a=r(o),i=n(1156),s=r(i);t.default=function(e,t){return(0,s.default)((0,a.default)(e,{raw:{value:(0,s.default)(t)}}))}},1145:function(e,t,n){e.exports={default:n(1146),__esModule:!0}},1146:function(e,t,n){n(1147);var r=n(743).Object;e.exports=function(e,t){return r.defineProperties(e,t)}},1147:function(e,t,n){var r=n(760);r(r.S+r.F*!n(762),"Object",{defineProperties:n(950)})},1148:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},1149:function(e,t,n){e.exports=!n(762)&&!n(803)(function(){return 7!=Object.defineProperty(n(949)("div"),"a",{get:function(){return 7}}).a})},1150:function(e,t,n){var r=n(778);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},1151:function(e,t,n){var r=n(1152),o=n(955);e.exports=Object.keys||function(e){return r(e,o)}},1152:function(e,t,n){var r=n(779),o=n(951),a=n(1154)(!1),i=n(852)("IE_PROTO");e.exports=function(e,t){var n,s=o(e),c=0,u=[];for(n in s)n!=i&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~a(u,n)||u.push(n));return u}},1153:function(e,t,n){var r=n(952);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},1154:function(e,t,n){var r=n(951),o=n(953),a=n(1155);e.exports=function(e){return function(t,n,i){var s,c=r(t),u=o(c.length),l=a(i,u);if(e&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}}},1155:function(e,t,n){var r=n(851),o=Math.max,a=Math.min;e.exports=function(e,t){return e=r(e),e<0?o(e+t,0):a(e,t)}},1156:function(e,t,n){e.exports={default:n(1157),__esModule:!0}},1157:function(e,t,n){n(1158),e.exports=n(743).Object.freeze},1158:function(e,t,n){var r=n(778),o=n(1159).onFreeze;n(1160)("freeze",function(e){return function(t){return e&&r(t)?e(o(t)):t}})},1159:function(e,t,n){var r=n(853)("meta"),o=n(778),a=n(779),i=n(761).f,s=0,c=Object.isExtensible||function(){return!0},u=!n(803)(function(){return c(Object.preventExtensions({}))}),l=function(e){i(e,r,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,r)){if(!c(e))return"F";if(!t)return"E";l(e)}return e[r].i},p=function(e,t){if(!a(e,r)){if(!c(e))return!0;if(!t)return!1;l(e)}return e[r].w},d=function(e){return u&&h.NEED&&c(e)&&!a(e,r)&&l(e),e},h=e.exports={KEY:r,NEED:!1,fastKey:f,getWeak:p,onFreeze:d}},1160:function(e,t,n){var r=n(760),o=n(743),a=n(803);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],i={};i[e]=t(n),r(r.S+r.F*a(function(){n(1)}),"Object",i)}},1161:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},1162:function(e,t,n){"use strict";t.__esModule=!0;var r=n(1163),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},1163:function(e,t,n){e.exports={default:n(1164),__esModule:!0}},1164:function(e,t,n){n(1165);var r=n(743).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},1165:function(e,t,n){var r=n(760);r(r.S+r.F*!n(762),"Object",{defineProperty:n(761).f})},1166:function(e,t,n){"use strict";t.__esModule=!0;var r=n(1167),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,o.default)(e)}},1167:function(e,t,n){e.exports={default:n(1168),__esModule:!0}},1168:function(e,t,n){n(1169),n(1178),e.exports=n(743).Array.from},1169:function(e,t,n){"use strict";var r=n(1170)(!0);n(1171)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},1170:function(e,t,n){var r=n(851),o=n(850);e.exports=function(e){return function(t,n){var a,i,s=String(o(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(a=s.charCodeAt(c),a<55296||a>56319||c+1===u||(i=s.charCodeAt(c+1))<56320||i>57343?e?s.charAt(c):a:e?s.slice(c,c+2):i-56320+(a-55296<<10)+65536)}}},1171:function(e,t,n){"use strict";var r=n(1172),o=n(760),a=n(1173),i=n(801),s=n(779),c=n(854),u=n(1174),l=n(956),f=n(1177),p=n(755)("iterator"),d=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,n,m,v,y,g){u(n,t,m);var b,w,_,E=function(e){if(!d&&e in S)return S[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},O=t+" Iterator",C="values"==v,k=!1,S=e.prototype,x=S[p]||S["@@iterator"]||v&&S[v],T=x||E(v),j=v?C?E("entries"):T:void 0,P="Array"==t?S.entries||x:x;if(P&&(_=f(P.call(new e)))!==Object.prototype&&(l(_,O,!0),r||s(_,p)||i(_,p,h)),C&&x&&"values"!==x.name&&(k=!0,T=function(){return x.call(this)}),r&&!g||!d&&!k&&S[p]||i(S,p,T),c[t]=T,c[O]=h,v)if(b={values:C?T:E("values"),keys:y?T:E("keys"),entries:j},g)for(w in b)w in S||a(S,w,b[w]);else o(o.P+o.F*(d||k),t,b);return b}},1172:function(e,t){e.exports=!0},1173:function(e,t,n){e.exports=n(801)},1174:function(e,t,n){"use strict";var r=n(1175),o=n(849),a=n(956),i={};n(801)(i,n(755)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(i,{next:o(1,n)}),a(e,t+" Iterator")}},1175:function(e,t,n){var r=n(802),o=n(950),a=n(955),i=n(852)("IE_PROTO"),s=function(){},c=function(){var e,t=n(949)("iframe"),r=a.length;for(t.style.display="none",n(1176).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;r--;)delete c.prototype[a[r]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[i]=e):n=c(),void 0===t?n:o(n,t)}},1176:function(e,t,n){e.exports=n(777).document&&document.documentElement},1177:function(e,t,n){var r=n(779),o=n(957),a=n(852)("IE_PROTO"),i=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?i:null}},1178:function(e,t,n){"use strict";var r=n(948),o=n(760),a=n(957),i=n(1179),s=n(1180),c=n(953),u=n(1181),l=n(1182);o(o.S+o.F*!n(1184)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,o,f,p=a(e),d="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,v=void 0!==m,y=0,g=l(p);if(v&&(m=r(m,h>2?arguments[2]:void 0,2)),void 0==g||d==Array&&s(g))for(t=c(p.length),n=new d(t);t>y;y++)u(n,y,v?m(p[y],y):p[y]);else for(f=g.call(p),n=new d;!(o=f.next()).done;y++)u(n,y,v?i(f,m,[o.value,y],!0):o.value);return n.length=y,n}})},1179:function(e,t,n){var r=n(802);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var a=e.return;throw void 0!==a&&r(a.call(e)),t}}},1180:function(e,t,n){var r=n(854),o=n(755)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||a[o]===e)}},1181:function(e,t,n){"use strict";var r=n(761),o=n(849);e.exports=function(e,t,n){t in e?r.f(e,t,o(0,n)):e[t]=n}},1182:function(e,t,n){var r=n(1183),o=n(755)("iterator"),a=n(854);e.exports=n(743).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||a[r(e)]}},1183:function(e,t,n){var r=n(952),o=n(755)("toStringTag"),a="Arguments"==r(function(){return arguments}()),i=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=i(t=Object(e),o))?n:a?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},1184:function(e,t,n){var r=n(755)("iterator"),o=!1;try{var a=[7][r]();a.return=function(){o=!0},Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var a=[7],i=a[r]();i.next=function(){return{done:n=!0}},a[r]=function(){return i},e(a)}catch(e){}return n}},1185:function(e,t,n){e.exports={default:n(1186),__esModule:!0}},1186:function(e,t,n){n(1187),e.exports=n(743).Number.isNaN},1187:function(e,t,n){var r=n(760);r(r.S,"Number",{isNaN:function(e){return e!=e}})},1188:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.account;return{unBlockInfo:{isAppealed:t.isAppealed,spamLevel:t.spamLevel}}}n.d(t,"a",function(){return _});var s,c,u,l,f=n(1),p=n.n(f),d=n(0),h=n.n(d),m=n(5),v=(n.n(m),n(10)),y=n(16),g=n(301),b=n(1189),w=(n.n(b),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),_=(s=Object(m.connect)(i))((l=u=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.state={warnText:null},a.buildWarnText=function(e){var t=a.context.currentUser,n=e||a.props,r=n.user,o=n.unBlockInfo,i=r||t;if(i){var s=i.accountStatus,c=i.isForceRenamed,u=i.isActive,l=t&&i.urlToken===t.urlToken;a.setState({warnText:(s&&Boolean(s.length)||c||!u)&&Object(g.a)(i,l,l&&o)})}},i=n,o(a,i)}return a(t,e),w(t,[{key:"componentWillMount",value:function(){Object(y.isNode)()||this.buildWarnText()}},{key:"componentWillReceiveProps",value:function(e){var t=e.unBlockInfo,n=t.isAppealed,r=t.unBlockInfo,o=e.user,a=void 0===o?{}:o,i=a.urlToken,s=this.props,c=s.unBlockInfo,u=c.prevIsAppealed,l=c.prevUnBlockInfo,f=s.user;f=void 0===f?{}:f;var p=f.urlToken;(i&&i!==p||n!==u||r!==l)&&this.buildWarnText(e)}},{key:"render",value:function(){var e=this.state.warnText;return e?h.a.createElement("div",{className:"UserStatus"},h.a.createElement(v.a,{name:"alert",width:16,fill:"#f75659"}),h.a.createElement("span",{className:"UserStatus-warnText"},e)):null}}]),t}(d.Component),u.contextTypes={currentUser:p.a.object},u.propTypes={user:p.a.object},c=l))||c},1189:function(e,t){},1194:function(e,t){},1195:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,s,c,u,l=n(1),f=n.n(l),p=n(0),d=n.n(p),h=n(138),m=n(81),v=n(727),y=(n(833),n(735)),g=n(736),b=n(732),w=n(765),_=n(899),E=n(80),O=n(1196),C=(n.n(O),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),S=(i=Object(E.a)(function(e){var t=e.trackCardShow;return{module:"EBookItem",trackCardShow:void 0===t||t}}))((u=c=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.state={commentsShown:!1,commentPattern:"fixed"},a.handleCommentsShown=function(e,t){a.setState(t)},a.handleCommentsHide=function(){a.setState({commentsShown:!1})},i=n,o(a,i)}return a(t,e),k(t,[{key:"render",value:function(){var e=this.props,n=e.preset,r=e.ebook,o=e.lastreadTouchable,a=r.id,i=r.type,s=r.url,c=r.title,u=r.cover,l=r.authors,f=r.price,p=r.promotionPrice,h=r.description,E=r.relationship,O=void 0===E?{}:E,k=r.voteupCount,S=r.commentCount,x=(r.score,this.state),T=x.commentsShown,j=x.commentPattern;if(n!==v.c.interactive)return d.a.createElement(v.e,{title:d.a.createElement("a",{href:s,target:"_blank"},c),data:r});var P={id:a,type:i},A=l.slice(0,2);return d.a.createElement(v.e,{className:"EBookItem",data:r,title:d.a.createElement("a",{className:"EBookItem-title",href:s,target:"_blank"},c),image:d.a.createElement(t.Cover,{url:s,title:c,cover:u}),meta:d.a.createElement("div",null,d.a.createElement("div",{className:"EBookItem-description"},h),d.a.createElement(v.b,null,d.a.createElement("div",null,d.a.createElement("span",null,"作者："),A.map(function(e,t){return d.a.createElement("span",{key:t},d.a.createElement(m.a,{user:e}),t<A.length-1&&"、")})),d.a.createElement("div",null,d.a.createElement("span",null,"知乎价："),"number"==typeof p?d.a.createElement("span",{className:"EBookItem-price"},Object(_.a)(p),d.a.createElement("del",null,Object(_.a)(f))):Object(_.a)(f)))),lastreadTouchable:o},d.a.createElement(v.a,{className:"EBookItem-actions"},d.a.createElement(w.a,C({},P,{liked:Boolean(O.voting),count:k})),d.a.createElement(y.a,{onClick:this.handleCommentsShown,commentsShown:T,count:S}),d.a.createElement(b.a,C({},P,{title:c,authorName:l[0]&&l[0].name,href:s}))),d.a.createElement(g.a,{parent:r,commentPattern:j,shown:T,onClose:this.handleCommentsHide}))}}]),t}(p.Component),c.propTypes={preset:f.a.oneOf(Object.values(v.c))},c.defaultProps={preset:v.c.default},c.Cover=function(e){var t=e.url,n=e.cover,r=e.title;return d.a.createElement("a",{href:t,target:"_blank"},d.a.createElement("img",{className:"EBookItem-image",style:{width:"78px",height:"104px"},src:Object(h.a)(n,"100w"),srcSet:Object(h.a)(n,"xld")+" 2x",alt:r}))},s=u))||s;t.a=S},1196:function(e,t){},1197:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){var n=Date.now()/1e3;return n>t?"已结束":n<e?Object(g.d)(e)+" 开始":Object(g.d)(t)+" 结束"}var s,c,u,l,f=n(1),p=n.n(f),d=n(0),h=n.n(d),m=n(10),v=n(51),y=n(36),g=n(243),b=n(727),w=n(735),_=n(736),E=n(244),O=n(732),C=n(1008),k=n(81),S=n(80),x=n(1198),T=(n.n(x),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),j=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),P=(s=Object(S.a)(function(e){var t=e.roundtable,n=e.trackCardShow,r=void 0===n||n;return{module:"RoundtableItem",card:{content:{type:"Roundtable",token:t.id,item_num:t.questionsCount,follower_num:t.followers,publish_timestamp:1e3*t.stopTime}},trackCardShow:r}}))((l=u=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.state={commentsShown:!1,commentPattern:"fixed"},a.handleCommentsShown=function(e,t){a.setState(t)},a.handleCommentsHide=function(){a.setState({commentsShown:!1})},i=n,o(a,i)}return a(t,e),j(t,[{key:"render",value:function(){var e=this.props,t=e.preset,n=e.roundtable,r=e.lastreadTouchable,o=n||{},a=o.id,s=o.logo,c=o.type,u=o.guests,l=void 0===u?[]:u,f=o.stopTime,p=o.startTime,d=o.followers,g=o.commentCount,S=o.isFollowing,x=this.state,j=x.commentsShown,P=x.commentPattern,A=h.a.createElement(C.a,{roundtable:n,target:"_blank"});if(t!==b.c.interactive)return h.a.createElement(b.e,{data:n,title:A});var I={id:a,type:c};return h.a.createElement(b.e,{data:n,title:h.a.createElement("div",{className:"RoundtableItem-title"},A,h.a.createElement("div",{className:"RoundtableItem-badge"},h.a.createElement(m.a,{width:12,name:"time"}),i(p,f))),image:h.a.createElement(v.default,{url:s,size:60}),meta:h.a.createElement("div",{className:"RoundtableItem-meta"},Object(y.b)(d)," 人关注","了该圆桌"),lastreadTouchable:r},l.length>0&&h.a.createElement(b.b,null,h.a.createElement("div",null,h.a.createElement("span",null,"嘉宾："),l.map(function(e,t){return h.a.createElement("span",{key:t},h.a.createElement(k.a,{user:e}),t<l.length-1&&"、")}))),h.a.createElement(b.a,null,h.a.createElement(E.a,T({},I,{isFollowing:S})),h.a.createElement(w.a,{onClick:this.handleCommentsShown,commentsShown:j,count:g}),h.a.createElement(O.a,T({},I,{title:n.name}))),h.a.createElement(_.a,{parent:n,commentPattern:P,shown:j,onClose:this.handleCommentsHide}))}}]),t}(d.Component),u.propTypes={preset:p.a.oneOf(Object.values(b.c))},u.defaultProps={preset:b.c.default},c=l))||c;t.a=P},1198:function(e,t){},1199:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,s,c,u,l=n(1),f=n.n(l),p=n(0),d=n.n(p),h=n(243),m=n(138),v=(n(36),n(965)),y=n(727),g=n(765),b=n(739),w=n(732),_=n(80),E=n(899),O=n(822),C=n(967),k=(n.n(C),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),S=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),x=(i=Object(_.a)(function(e){var t=e.live,n=e.trackCardShow,r=void 0===n||n;return{module:"LiveItem",card:{content:{type:"Live",id:t.id,author_member_hash_id:t.speaker.member.id}},trackCardShow:r}}))((u=c=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),S(t,[{key:"render",value:function(){var e=this.props,t=e.preset,n=e.live,r=e.live,o=r.id,a=r.type,i=r.subject,s=r.speaker.member,c=r.startsAt,u=r.price,l=r.promotionPrice,f=r.description,p=void 0===f?"":f,_=r.image,C=r.isLiked,S=r.likedNum,x=r.seats.taken,T=e.lastreadTouchable,j="/lives/"+o;if(t!==y.c.interactive)return d.a.createElement(y.e,{data:n,title:d.a.createElement("a",{href:j,target:"_blank"},i)});var P=(d.a.createElement(v.a,{className:"LiveItem-avatar",speakers:[s],size:60}),{id:o,type:a});return d.a.createElement("div",{className:"LiveItem"},_&&d.a.createElement("a",{className:"LiveItem-cover",href:j,target:"_blank"},d.a.createElement("img",{src:Object(m.a)(_,"640w"),srcSet:Object(m.a)(_,"r")+" 2x",alt:i})),d.a.createElement(y.e,{image:!1,data:n,title:d.a.createElement("span",null,s.name,"：",d.a.createElement("a",{href:j,target:"_blank"},i)),meta:!1,lastreadTouchable:T},d.a.createElement(b.b,{className:"LiveItem-description",excerpt:Object(O.b)(p,60),limit:60,limitWithImage:60,html:p,data:n,extra:d.a.createElement(y.b,null,Boolean(x)&&d.a.createElement("div",null,d.a.createElement("span",null,"参与人数："),x),d.a.createElement("div",null,d.a.createElement("span",null,"时间："),Object(h.e)(c)),d.a.createElement("div",null,d.a.createElement("span",null,"特价："),"number"==typeof l?d.a.createElement("span",{className:"LiveItem-price"},Object(E.a)(l),d.a.createElement("del",null,Object(E.a)(u))):Object(E.a)(u)))},d.a.createElement(g.a,k({},P,{liked:C,count:S,icon:"thank"})),d.a.createElement(w.a,k({},P,{title:i,authorName:s&&s.name,url:j})))))}}]),t}(p.Component),c.propTypes={preset:f.a.oneOf(Object.values(y.c))},s=u))||s;t.a=x},1285:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function m(e){var t=e.topstory;t=void 0===t?{}:t;var n=t.sidebar;if(!n)return{categoryData:Z,navData:Y,isDrained:!1};var r=n.latestAddedBookCount,o=n.latestRoundtableCount,a=n.needShowBalance,i=n.needShowGiftCertificate,s=n.publicEditCount,c=n.questionInvitedCount,u=n.unreadItemCountOfFollowedFavlist,l=Object(V.c)(e),f=l&&l.userType;return{categoryData:$(Z,[{key:"pub",number:r},{key:"org",number:o},{key:"infinity",visible:"organization"!==f}]),navData:$(Y,[{key:"star",number:u},{key:"questionList",url:"/people/"+l.urlToken+"/following/questions",number:l.followingQuestionCount},{key:"invite",number:c},{key:"balance",visible:a},{key:"coupon",visible:i},{key:"publicEdit",number:s}]),userType:f,isDrained:!0}}var v,y,g,b,w,_=n(1),E=n.n(_),O=n(0),C=n.n(O),k=n(5),S=n(89),x=n(771),T=n(242),j=n(6),P=n.n(j),A=n(49),I=(n(1286),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),M=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.handleLog=function(e,t,n){P.a.trackEvent(e.target,{action:"OpenUrl",element:"Link",name:t},{link:{url:n}})},i=n,o(a,i)}return a(t,e),I(t,[{key:"render",value:function(){var e=this,t=this.props.categoryData,n=t.filter(function(e){return e.visible}).map(function(t){var n=t.key,r=t.label,o=t.url,a=t.color,i=t.icon;return C.a.createElement("li",{key:n,className:"GlobalSideBar-categoryItem"},C.a.createElement(A.a,{preset:"plain",href:o,target:"_blank",title:r,onClick:function(t){return e.handleLog(t,n,o)},style:{color:a}},C.a.createElement("span",{className:"GlobalSideBar-categoryIcon"},C.a.createElement(i,null)),C.a.createElement("span",{className:"GlobalSideBar-categoryLabel"},r)))});return C.a.createElement(T.c,null,C.a.createElement("ul",{className:"GlobalSideBar-categoryList"},n))}}]),t}(O.Component),N=n(2),R=n.n(N),D=n(36),L=(n(1003),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),F=function(e){function t(){return i(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),L(t,[{key:"componentDidUpdate",value:function(e){var t=function(e){return e.navData.filter(function(e){return e.visible}).length};this.props.onLoad&&t(e)!==t(this.props)&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props.navData,t=e.filter(function(e){return e.visible}).map(function(e){var t=e.key,n=e.label,r=e.icon,o=e.url,a=e.number;return C.a.createElement("li",{key:t,className:R()("GlobalSideBar-navItem","GlobalSideBar-"+t+"Item")},C.a.createElement(A.a,{preset:"plain",href:o,target:"_blank",className:"GlobalSideBar-navLink"},C.a.createElement(r,{className:"GlobalSideBar-navIcon",size:18}),C.a.createElement("span",{className:"GlobalSideBar-navText"},n),0!==a&&C.a.createElement("span",{className:"GlobalSideBar-navNumber"},Object(D.b)(a))))});return C.a.createElement(T.c,null,C.a.createElement("ul",{className:"GlobalSideBar-navList"},t))}}]),t}(O.Component),U=n(902),B=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),z=function(e){function t(){return u(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),B(t,[{key:"render",value:function(){var e=this.props,t=e.position,n=e.onHeightChange;return C.a.createElement(U.a,{id:"",location:t,onHeightChange:n})}}]),t}(O.Component),K=n(904),q=n(794),H=n(270),V=n(34),W=n(80),G=n(11),Y=[{key:"star",number:0,label:"我的收藏",url:"/collections",icon:G.Star,visible:!0},{key:"questionList",number:0,label:"我关注的问题",icon:G.HelpBubble,visible:!0},{key:"invite",number:0,label:"我的邀请",url:"/question/invited",icon:G.Invite,visible:!0},{key:"balance",number:0,label:"我的余额",url:"/balance",icon:G.Balance,visible:!1},{key:"coupon",number:0,label:"我的礼券",url:"/coupon",icon:G.Coupon,visible:!1},{key:"service",number:0,label:"社区服务中心",url:"/community",icon:G.Community,visible:!0},{key:"copyright",number:0,label:"版权服务中心",url:"/copyright",icon:G.Copyright,visible:!0},{key:"publicEdit",number:0,label:"公共编辑动态",url:"/watch",icon:G.EditRounded,visible:!0}],Z=[{key:"live",number:0,label:"Live",url:"/lives",icon:G.Live,color:"#ffcf00",visible:!0},{key:"pub",number:0,label:"书店",url:"/pub/",icon:G.Ebook,color:"#43d480",visible:!0},{key:"org",number:0,label:"圆桌",url:"/roundtable",icon:G.Org,color:"#0084ff",visible:!0},{key:"edit",number:0,label:"专栏",url:"//zhuanlan.zhihu.com",icon:G.Edit,color:"#0f88eb",visible:!0},{key:"infinity",number:0,label:"付费咨询",url:"/zhi",icon:G.Infinity,color:"#5478f0",visible:!0}],X=n(13),J=(n(1287),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$=function(e,t){return e.map(function(e){var n=t.find(function(t){return t.key===e.key});return n?Q({},e,n):e})},ee=(v=Object(W.a)({module:"RightSideBar"}),y=Object(k.connect)(m,{loadAsideData:H.b,loadCurrentUserFollowingQuestionCount:V.h}),v(g=y((w=b=function(e){function t(){var e,n,r,o;p(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onHeightChange=function(){r.dynamicSticky&&r.dynamicSticky.check()},o=n,d(r,o)}return h(t,e),J(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isDrained,n=e.loadAsideData,r=e.loadCurrentUserFollowingQuestionCount;!t&&this.context.currentUser&&(n(),r())}},{key:"render",value:function(){var e=this,t=this.props,n=t.categoryData,r=t.navData,o=t.userType,a=t.omit;a=void 0===a?{}:a;var i=a.noCategory,s=a.noAd,c=a.noNav,u=a.noFooter,l=a.noBanner;return C.a.createElement(q.a,{className:"GlobalSideBar",offset:X.f+10,ref:function(t){e.dynamicSticky=t}},!i&&C.a.createElement(M,{categoryData:n}),!s&&C.a.createElement(z,{position:"new_home_up",onHeightChange:this.onHeightChange}),"organization"!==o&&!c&&C.a.createElement(F,{navData:r,onHeightChange:this.onHeightChange}),"organization"!==o&&!s&&C.a.createElement(z,{position:"new_home_bottom",onHeightChange:this.onHeightChange}),!l&&C.a.createElement(K.a,{type:"home"}),!u&&C.a.createElement(S.a,null,C.a.createElement(x.a,null)))}}]),t}(O.Component),b.contextTypes={currentUser:E.a.object},g=w))||g)||g),te=ee;n.d(t,"a",function(){return te})},1286:function(e,t){},1287:function(e,t){},1521:function(e,t){e.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},content:'<path d="M12.63 2.02V0h1.35v2.02H16v1.35h-2.02V5.4h-1.35V3.36H10.6V2.02h2.03zm-.17 4.9h1.7v4.76c0 1.5-.17 2.05-.46 2.6-.3.55-.73.98-1.28 1.27-.54.3-1.1.45-2.6.45h-5.5c-1.5 0-2.05-.16-2.6-.45-.55-.3-.98-.72-1.27-1.27-.3-.55-.45-1.1-.45-2.6v-5.5c0-1.5.16-2.06.45-2.6.3-.55.72-.98 1.27-1.28.55-.3 1.1-.45 2.6-.45H9.1v1.7H4.3c-1.12 0-1.46.05-1.8.24-.26.1-.45.3-.58.55-.2.35-.26.7-.26 1.8v5.5c0 1.13.07 1.47.26 1.8.13.27.32.46.58.6.34.18.68.25 1.8.25h5.5c1.12 0 1.46-.06 1.8-.25.27-.13.46-.32.6-.58.18-.34.24-.68.24-1.8V6.9zM8.6 6.7c.7-.16 1.45.06 1.98.6.83.83.83 2.2 0 3.04l-.03.03c-.84.85-2.2.85-3.04 0l-1.92-2c-.25-.24-.64-.24-.88 0l-.04.04c-.25.28-.25.7 0 .95.15.16.37.22.57.17.4-.1.82.18.9.58.1.4-.16.82-.57.9-.7.17-1.46-.04-1.98-.58-.83-.85-.83-2.2 0-3.06l.03-.02c.86-.85 2.2-.85 3.05 0L8.6 9.3c.24.25.63.25.87 0l.03-.02c.25-.26.25-.67 0-.93-.16-.15-.37-.2-.58-.17-.4.1-.8-.16-.9-.57-.1-.4.16-.8.57-.9z"/>'}},2129:function(e,t){},2130:function(e,t){},2131:function(e,t){},2132:function(e,t){},2133:function(e,t){},2134:function(e,t){},2135:function(e,t){},2136:function(e,t){},2137:function(e,t){},2138:function(e,t){},2139:function(e,t){},2140:function(e,t){},2141:function(e,t){},2142:function(e,t){},2143:function(e,t){},2144:function(e,t){},2157:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function v(e){return{currentUser:Object(tt.c)(e),isDraftCountDrained:Object(tt.f)(e)}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function P(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function A(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function R(e){try{return JSON.stringify(e)}catch(e){return""}}function D(e){try{return JSON.parse(e)}catch(e){return null}}function L(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function H(e){return e.closest(".TopstoryItem").querySelector(".ContentItem")}function V(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function W(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function $(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function ee(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function te(e){var t=e.entities,n=e.entities,r=n.feeds,o=n.actionCards,a=n.feedAdverts,i=e.topstory.topstorys,s=i||{isFetching:!1,items:[],isDrained:!1},c=s.isFetching,u=s.isDrained,l=s.items;return{experimentItem:"group_3"===e.env.experiment.nwebFeedUi,isFetching:c,isDrained:u,items:l.map(function(e){var n=e.id;switch(e.schema){case"actionCard":var i=o[n],s=i.card,c=i.card.topicList;return c?Xr({},i,{card:Xr({},s,{topicList:c.map(function(e){return t.topics[e]})})}):null;case"feed":var u=r[n],l=u.target,f=(t[l.schema+"s"]||{})[l.id];return Xr({},u,f&&{target:f});case"feedAdvert":var p=a[n],d=p.ad,h=p.ad,m=h.brand,v=h.creatives,y=t.advertCreatives[v[0]],g=y.target,b=ee(y,["target"]);return Xr({},p,{ad:Xr({},d,{brand:Xr({},m,{target:t.users[m.target]}),creatives:[Xr({},b,g&&{target:Xr({},t[g.schema+"s"][g.id])})].concat($(v.slice(1)))})});default:return e}}).filter(Boolean)}}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function oe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function se(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function le(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function fe(){var e=to.a.get(oo),t=!!e&&Date.now()-Number(e)<So,n=to.a.get(ao);return{igorePrelude:t,ignoreTopic:!!n&&Date.now()-Number(n)<So}}function pe(e){var t=Object(tt.c)(e),n=t.editorInfo,r=t.urlToken,o=e.guide.guide.data;return{showTopics:n.indexOf("topic")>=0,showPrelude:n.indexOf("bio")>=0,urlToken:r,topics:ko({},o)}}function de(e){return{guideActions:Object(eo.bindActionCreators)({updateProfile:Eo.n,changeSelectTopic:Oo.a,getRecommendationTopics:Oo.c,submitRecommendationTopics:Oo.d},e)}}function he(e,t,n){return ko({},n,e,t)}function me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ve(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ye(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ge(e){var t=Object(tt.c)(e);if(!t)return{guideShow:!1};var n=e.guide,r=t.userType,o=t.editorInfo;return{guideShown:"organization"!==r&&Boolean(o&&o.length)&&"done"!==n.guide.isSubmitTopic}}Object.defineProperty(t,"__esModule",{value:!0});var be,we,_e,Ee,Oe,Ce,ke,Se,xe,Te,je,Pe,Ae,Ie,Me,Ne,Re,De,Le,Fe,Ue=n(0),Be=n.n(Ue),ze=n(15),Ke=n(1),qe=n.n(Ke),He=n(5),Ve=n(91),We=n.n(Ve),Ge=n(89),Ye=n(1188),Ze=n(242),Xe=n(10),Je=n(6),Qe=n.n(Je),$e=n(36),et=n(54),tt=n(34),nt=n(167),rt=n(2),ot=n.n(rt),at=n(3),it=n(1143),st=n(728),ct=n(51),ut=n(140),lt=n(29),ft=n(1109),pt=n.n(ft),dt=n(1140),ht=n(941),mt=n(946),vt=n(947),yt=function(e,t){return e.getCurrentContent().getBlockMap().findKey(function(e){return e.characterList.find(function(e){return e.getEntity()===t})})},gt=function(e){var t=e.performAction,n=e.scrapeUrl;return{handlePastedText:function(e,r,o,a){var i=a.getEditorState,s=a.setEditorState;if(r)return"not-handled";if(!mt.a.test(e))return"not-handled";var c=st.ContentState.createFromText(e),u=[];c.getBlocksAsArray().forEach(function(e){var t=e.getText(),n=mt.a.match(t);n&&n.forEach(function(t){c=c.createEntity("LINK","MUTABLE",{url:t.url});var n=c.getLastCreatedEntityKey();c=st.Modifier.applyEntity(c,st.SelectionState.createEmpty(e.key).merge({anchorOffset:t.index,focusOffset:t.lastIndex}),n),u.push({entityKey:n,url:t.url})})});var l=Object(ht.a)(o,c.blockMap,c.entityMap);s(l);var f=function(e){return n(e.url).then(function(t){if(t.url){var n=i(),r=Object(vt.a)(n,"",{url:""},e.entityKey,yt(n,e.entityKey));s(r)}}).catch(function(){})};return t(function(){return Promise.all(u.map(f))}),"handled"}}},bt=gt,wt=n(828),_t=n(1129),Et=n(138),Ot=n(146),Ct=(n(2129),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),kt=(be=Object(He.connect)(null,{uploadImage:Ot.b}))(we=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleImageUploadError=function(e,t){var r=n.props.onImageUploadError;r&&r(e,t)},n.handleClickImageUpload=function(e){var t=n.props.onClickImageUpload;Qe.a.trackEvent(e.target,{action:"Add",is_intent:!0,element_name:"Plus"}),t&&setTimeout(function(){t()})},n.handleDelUploadImage=function(e){n.props.onDelUploadImage(e)},n.handleImageUploaded=function(e,t){var r=e||{},o=r.src,a=r.rawWidth,i=r.rawHeight,s=r.watermark,c=r.originalSrc,u=r.watermarkSrc;o?n.props.onImageUploaded({url:o,width:a,height:i,watermark:s,originalSrc:c,watermarkSrc:u},t):n.handleImageUploadError({},t)},n.state={images:[],file:""},n.uploadManager=new wt.b({uploadImage:function(e){return n.props.uploadImage(e,n.props.uploadType,n.props.sourceType).then(function(e){return e.payload}).then(function(e){return{url:e.src,originalSrc:e.originalSrc,watermarkSrc:e.watermarkSrc,watermark:e.watermark,rawWidth:e.dataRawwidth,rawHeight:e.dataRawheight,id:e.hash}}).catch(function(e){return e})}}),n}return a(t,e),Ct(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.file,r=t.className,o=this.props.images;return n||0!==o.length?Be.a.createElement("div",{className:ot()("uploadImage-container",r)},Be.a.createElement("ul",null,o.map(function(t){if(t.url){var n=/\.gif$/.test(t.url),r="";return r=Object(Et.a)(t.url,"xl"),n&&(r=r.replace(/\.gif$/,".jpg")),Be.a.createElement("li",{key:t.uid},Be.a.createElement("img",{src:r,width:"64",height:"64",alt:"图片"}),n&&Be.a.createElement("em",null,"GIF"),Be.a.createElement("span",{className:"uploadImage-cancel",onClick:function(){return e.handleDelUploadImage(t.uid)}},Be.a.createElement(Xe.a,{width:6,height:6,name:"captchaPointCancel",fill:"#fff"})))}return t.file?Be.a.createElement("li",{key:t.uid},Be.a.createElement(_t.a,{uploadManager:e.uploadManager,onImageUploaded:function(n){e.handleImageUploaded(n,t.uid)},onImageUploadError:function(n){e.handleImageUploadError(n,t.uid)},data:{upload:{type:"file",value:t.file}}}),Be.a.createElement("span",{className:"uploadImage-cancel",onClick:function(){return e.handleDelUploadImage(t.uid)}},Be.a.createElement(Xe.a,{width:6,height:6,name:"captchaPointCancel",fill:"#fff"}))):null}),o.length>0&&o.length<9&&Be.a.createElement("li",{className:"uploadImage-upload"},Be.a.createElement("span",{onClick:this.handleClickImageUpload},"+")))):null}}]),t}(Ue.Component))||we,St=n(1131),xt=n(285),Tt=(n(2130),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),jt=(_e=Object(He.connect)(null,{uploadVideo:Ot.c}))(Ee=function(e){function t(e){i(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleVideoUploadError=function(){n.props.onVideoUploadError()},n.handleDelUploadVideo=function(){n.props.onDelUploadVideo()},n.handleVideoUploaded=function(e,t){n.props.onVideoUploaded(t)},n.renderVideoContents=function(){var e=n.props.video,t=e.thumbnail,r=e.id,o={interactive:!1,title:"",thumbnail:t,isLens:!0,id:r,isPlayable:!0,url:"https://www.zhihu.com/video/"+r};return Be.a.createElement(xt.a,{data:o})},n.state={images:[],file:""},n.uploadManager=new wt.b({}),n}return c(t,e),Tt(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.video,r=t.className;return n?Be.a.createElement("div",{className:ot()("uploadVideo-container",r)},n.url?Be.a.createElement("div",{className:"uploadVideo-content"},this.renderVideoContents()):Be.a.createElement(St.a,{className:"uploadVideo-plugin",uploadManager:this.uploadManager,onVideoUploaded:this.handleVideoUploaded,onVideoUploadError:this.handleVideoUploadError,data:{upload:{file:n.file}}}),Be.a.createElement("span",{className:"uploadVideo-cancel",onClick:function(){return e.handleDelUploadVideo()}},Be.a.createElement(Xe.a,{width:6,height:6,name:"captchaPointCancel",fill:"#fff"}))):null}}]),t}(Ue.Component))||Ee,Pt=n(1521),At=n.n(Pt),It=n(247),Mt=n(14),Nt=n(13),Rt=(n(2131),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Dt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Lt={IMAGE:[".png",".jpeg",".gif",".jpg"],VIDEO:[".3gp",".asf",".avi",".dat",".f4v",".flv",".m4v",".mkv",".mov",".mp4",".mp4v",".mpe",".mpeg",".mpg",".ra",".ram",".rm",".rmvb",".vob",".webm",".wm",".wmv"]},Ft={IMAGE:1024*Nt.z*1024,VIDEO:1073741824},Ut=function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},Bt=(Oe=Object(He.connect)(function(e){return{isOffice:e.env.experiment.isOffice}},{showNotification:Mt.h,getLinkScraper:It.d,createPins:It.a}))((Se=ke=function(e){function t(e){l(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setZaPinEditViewModule=function(e){e&&Qe.a.setModule(e,{module:"PinEditView"})},n.setZaPinEditCardDialogModule=function(e){e&&Qe.a.setModule(e,{module:"PinEditCardDialog"})},n.setZaPinItemModule=function(e){e&&Qe.a.setModule(e,{module:"ToolBar"})},n.closeSuccessModal=function(){var e=n.props.onChangeStatus;n.setState({successModal:!1}),e("close")},n.handleBeforeunload=function(){var e=n.state,t=e.text,r=e.link,o=e.images,a=e.video;return t||r.url||o.length>0||a?"想法尚未发布，确定离开此页？":void 0},n.handleTransEnd=function(){var e=n.props.onChangeStatus,t=n.state,r=t.translate,o=t.text,a=t.link,i=t.images,s=t.video;!r&&e&&e(o||a.url||i.length>0||s?"normal":"close")},n.handleCloseWrite=function(){n.setState({translate:!1,richTextHide:!0}),Qe.a.trackEvent(n.menuEl,{action:"Collapse"})},n.handleChange=function(e,t){var r=e.getCurrentContent(),o=n.state.editorState.getCurrentContent();r.equals(o)&&"apply-entity"!==e.getLastChangeType()||n.setState({text:Object(it.a)(r,"p"),editorText:r.getPlainText("")}),n.setState({editorState:e},function(){"function"==typeof t&&t()})},n.handleDelLinkBox=function(){n.setState({link:{isFetching:!1,title:"",url:"",imageUrl:""}})},n.handleUploadClick=function(){n.state.images.length&&Qe.a.trackEvent(n.uploadInput,{action:"Add",is_intent:!0,element_name:"ContinueAdd"})},n.handleUploadChange=function(){var e=n.state.images,t=n.checkUploadFiles(n.uploadInput.files),r=t.flag,o=t.imageFiles,a=t.videoFiles;r&&(a?(n.setState({video:a}),n.updateUploadFetching("add"),Qe.a.trackEvent(n.uploadInput,{action:"Add",element:"Video"})):o.length>0&&(o.forEach(function(e){Qe.a.trackEvent(n.uploadInput,{action:"Add",element:"image/gif"===e.file.type?"Gif":"Image"})}),n.setState({images:[].concat(u(e),u(o))}),n.updateUploadFetching("add",o.length))),n.resetFileInput()},n.handleImageUploaded=function(e,t){var r=n.state.images,o=-1;r.find(function(e,n){return!(e.uid!==t||!e.file)&&(o=n,!0)}),-1!==o&&r.splice(o,1,Rt({},e,{uid:t,file:null})),n.updateUploadFetching("minus"),n.setState({images:[].concat(u(r))})},n.handleImageUploadError=function(){n.updateUploadFetching("minus")},n.handleClickImageUpload=function(){var e=n.state,t=e.link,r=e.video;t.url||r||n.uploadInput.click()},n.handleDelUploadImage=function(e){var t=[].concat(u(n.state.images)),r=-1;t.find(function(t,n){return t.uid===e&&(r=n,!0)}),-1!==r&&(t.splice(r,1),n.setState({images:t}))},n.handleDelUploadVideo=function(){n.updateUploadFetching("minus"),n.setState({video:null})},n.handleVideoUploaded=function(e){n.updateUploadFetching("minus"),n.setState({video:{id:e.id,url:e.url,thumbnail:e.thumbnail}})},n.handleVideoUploadError=function(){n.updateUploadFetching("minus")},n.handleOpenWritePin=function(e){var t=n.props,r=t.status,o=t.onChangeStatus;"normal"===r&&(o("dialog"),Qe.a.setModule(n.writePinEl,{module:"PinEditCard"}),Qe.a.trackEvent(n.writePinContentEl,{action:"Expand",element_name:e}))},n.resetFileInput=function(){n.uploadInput.value=null},n.handleSubmitForm=function(){var e=n.state,t=e.text,r=e.link,o=e.images,a=e.video,i=n.props,s=i.onChangeStatus,c=i.createPins,u=[];n.submiting||(n.submiting=!0,setTimeout(function(){n.submiting=!1},6e3),u.push({type:"text",content:t||""}),r.url?u.push(Rt({type:"link"},r)):o.length>0?o.filter(function(e){return e.url}).forEach(function(e){u.push({type:"image",url:e.url,width:e.width||0,height:e.height||0,watermark:e.watermark||"",original_url:e.originalSrc||"",watermark_url:e.watermarkSrc||""})}):a&&u.push({type:"video",video_id:a.id}),Qe.a.trackEvent(n.submitEl,{action:"Pin"}),c(JSON.stringify(u)).then(function(e){var t=e||{},r=t.payload,o=void 0===r?{}:r;Qe.a.setModule(n.writePinContentEl,{module:"PinEditView",result:"Success",action:"Pin"},{card:{content:{type:"Pin",id:o.id||""}}}),Qe.a.trackEvent(n.submitEl,{action:"StatusReport"},{status:{event:{action:"Pin",path:[{module:"PinEditView"},{module:"PinEditCardDialog"}]},result:"Success"}}),n.setState({successModal:!0,pinId:o.id||"",author:o.author||{},text:"",link:{isFetching:!1,title:"",url:"",imageUrl:""},editorText:"",images:[],video:null}),n.reset(),s("success"),n.submiting=!1}).catch(function(){n.submiting=!1}))},n.performActionBegin=function(){var e=n.state.link;n.setState({link:Rt({},e,{isFetching:!0})})},n.performAction=function(e){var t=n.state,r=t.link,o=r.url,a=r.isFetching,i=t.images,s=t.video;if(!o&&0===i.length&&!a&&!s){n.performActionBegin();return e()}return null},n.plugins=[Object(dt.a)(),bt({performAction:function(e){return n.performAction(e)},scrapeUrl:function(e){return n.scrapeUrl(e)},replaceLinkType:"remove"})],n.scrapeUrl=function(e){return(0,n.props.getLinkScraper)(e).then(function(t){var r=t.payload||{},o=r.title,a=r.url,i=r.image;return n.setState({link:{isFetching:!1,title:o||"",url:a||e,imageUrl:i||""}}),t.payload||{}},function(){return n.setState({link:{isFetching:!1}}),!0})},n.updateUploadFetching=function(e,t){var r=n.state.uploadIsFetchingNum,o="add"===e?r+(t||1):Math.max(r-1,0);n.setState({uploadIsFetchingNum:o})},n.state={translate:!1,images:[],text:"",link:{title:"",url:"",imageUrl:"",isFetching:!1},video:null,uploadIsFetchingNum:0,editorCount:0,editorText:"",editorState:st.EditorState.createEmpty(),pinId:"",successModal:!1,author:{},richTextHide:!1},n}return p(t,e),Dt(t,[{key:"componentDidMount",value:function(){window.onbeforeunload=this.handleBeforeunload}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props.status,r=e.status;"dialog"!==n&&"dialog"===r&&setTimeout(function(){t.setState({translate:!0})},0),"dialog"===r&&this.setState({richTextHide:!1})}},{key:"componentWillUnmount",value:function(){window.onbeforeunload=null}},{key:"checkUploadFiles",value:function(e){var t=this.props.showNotification,n=this.state,r=n.images,o=n.video,a=!0,i=[],s=null;return r.length+e.length>9?(t("最多只能上传9张图片","red"),this.resetFileInput(),{flag:!1}):(Array.from(e).find(function(e){if(!a)return!0;if(Lt.VIDEO.some(function(t){return e.name.toLowerCase().endsWith(t)})){if(s)return t("视频暂时只支持上传一个","red"),a=!1,!0;if(r.length>0||i.length>0)return t("图片、视频暂时无法同时上传","red"),a=!1,!0;if(e.size>Ft.VIDEO)return t("请上传小于 1 GB 的视频","red"),a=!1,!0;s={file:e,uid:Ut()}}else{if(!Lt.IMAGE.some(function(t){return e.name.toLowerCase().endsWith(t)}))return t("暂不支持该文件格式！","red"),a=!1,!0;if(o||s)return t("图片、视频暂时无法同时上传","red"),a=!1,!0;if(e.size>Ft.IMAGE)return t("请上传小于 "+Nt.z+"M 的文件","red"),a=!1,!0;i.push({file:e,uid:Ut()})}return!1}),{flag:a,imageFiles:i,videoFiles:s})}},{key:"reset",value:function(){var e=st.EditorState.createEmpty();this.setState({editorState:e})}},{key:"renderTitle",value:function(){return Be.a.createElement("div",{className:"writePin-contentTitle"},Be.a.createElement("span",null,Be.a.createElement(et.default,{src:At.a,width:16,height:16})," 写想法"))}},{key:"renderEditor",value:function(){var e=this,t=this.context.currentUser,n=void 0===t?{}:t,r=this.props.status;return Be.a.createElement("div",{className:ot()("writePin-contentWrite",{"writePin-contentWrite-disabled":"normal"===r}),onClick:function(){return e.handleOpenWritePin("TextArea")}},Be.a.createElement("div",{className:"writePin-user"},Be.a.createElement(ct.default,{className:"AppHeader-profileAvatar",size:30,url:n.avatarUrl})),Be.a.createElement("div",{className:"writePin-content-editor"},Be.a.createElement(pt.a,{ref:function(t){e.editor=t},editorState:this.state.editorState,onChange:this.handleChange,plugins:this.plugins,placeholder:n.name+"，分享你的想法"})))}},{key:"renderLink",value:function(){var e=this.state,t=e.link,n=t.url,r=t.title,o=t.imageUrl,a=t.isFetching,i=e.richTextHide;return n||a?Be.a.createElement("div",{className:ot()("writePin-link",{"writePin-link-status":i})},a?Be.a.createElement(ut.PlaceHolder,{className:"writePin-placeHolder"}):Be.a.createElement("a",{className:"writePin-linkBox",href:n,target:"_blank"},Be.a.createElement("span",{className:"writePin-linkBoxContent"},Be.a.createElement("span",null,r||n),r&&Be.a.createElement("span",null,(n.match(/^https?:\/\/([^\/?#]+)(?:[\/?#]|$)/i)||[])[1])),o&&Be.a.createElement("img",{className:"writePin-linkBoxContentThumbnail",src:o,alt:"头像"})),!a&&Be.a.createElement("span",{className:"writePin-cancel",onClick:this.handleDelLinkBox},Be.a.createElement(Xe.a,{width:8,name:"captchaPointCancel",fill:"#fff"}))):null}},{key:"renderUpload",value:function(){var e=this,t=this.state,n=t.images,r=t.link,o=t.uploadIsFetchingNum,a=t.editorText,i=t.video,s=this.props.status,c=[];c.push(n.length>0&&0===o?"继续":""),c.push(o>0?"上传中":"上传照片"),c.push(0===n.length&&0===o?"或视频":""),c.push(n.length>0?"("+n.length+"/9)":"");var u=0,l=a.length;return n.find(function(e){return e.url&&(u=1),e.url}),Be.a.createElement("div",{className:"writePin-buttonMenu"},Be.a.createElement("div",{className:ot()("writePin-upload",{"writePin-upload-disabled":n.length>8||r.url||r.isFetching||"normal"===s||i}),onClick:function(){return e.handleOpenWritePin("ContinueAdd")}},Be.a.createElement(at.default,{color:"blue",className:"writePin-uploadButton",onClick:this.handleClickImageUpload},Be.a.createElement(Xe.a,{name:"camera",left:!0,fill:"#0D79D1"}),c)),Be.a.createElement("div",null,l>1990&&Be.a.createElement("span",{className:ot()("writePin-editorCount",{"writePin-editorCountError":l>2e3})}," ",l+"/2000"),Be.a.createElement(at.default,{preset:"primary",color:"blue",ref:function(t){e.submitEl=t},onClick:this.handleSubmitForm,disabled:o>0||r.isFetching||l>2e3||0===a.replace(/\s/g,"").length&&!r.url&&0===u&&(!i||i&&!i.url)},"发布")))}},{key:"render",value:function(){var e=this,t=this.props.status,n=this.state,r=n.images,o=n.translate,a=n.successModal,i=n.pinId,s=n.author,c=n.richTextHide,u=n.video,l=n.link;if("close"===t)return null;return Be.a.createElement("div",{className:"writePin",ref:function(t){e.writePinEl=t,e.setZaPinEditCardDialogModule(t)}},"normal"===t&&Be.a.createElement("span",{className:"writePin-sign-arrow"}),"normal"!==t&&Be.a.createElement("div",{className:ot()("writePin-menu",{"writePin-menu-translate":o}),ref:function(t){e.menuEl=t,e.setZaPinEditViewModule(t)},onTransitionEnd:this.handleTransEnd,onClick:this.handleCloseWrite}),"success"!==t&&Be.a.createElement("div",{className:ot()("writePin-content",{"writePin-content-status":"normal"===t}),ref:function(t){e.writePinContentEl=t,e.setZaPinEditViewModule(t)}},"normal"!==t&&this.renderTitle(),this.renderEditor(),this.renderLink(),r.length<9&&!u&&!l.url&&!l.isFetching&&Be.a.createElement("input",{type:"file",className:"writePin-fileInput",multiple:"multiple",ref:function(t){e.uploadInput=t},onClick:this.handleUploadClick,onChange:this.handleUploadChange}),Be.a.createElement(kt,{className:c?"writePin-uploadImage-status":"",images:r,sourceType:null,onClickImageUpload:this.handleClickImageUpload,onDelUploadImage:this.handleDelUploadImage,onImageUploaded:this.handleImageUploaded,onImageUploadError:this.handleImageUploadError}),Be.a.createElement(jt,{className:c?"writePin-uploadVideo-status":"",video:u,onDelUploadVideo:this.handleDelUploadVideo,onVideoUploaded:this.handleVideoUploaded,onVideoUploadError:this.handleVideoUploadError}),this.renderUpload()),Be.a.createElement(lt.default,{size:"default",onClose:this.closeSuccessModal,className:"writePin-modalSucsess",title:"发布成功！"},a&&Be.a.createElement("div",{ref:function(t){e.successModalEl=t}},Be.a.createElement("div",{className:"writePin-modalSucsessTip"},"你可以到「",Be.a.createElement("a",{href:"https://www.zhihu.com/people/"+(s.urlToken||s.id)+"/pins",target:"_blank",onClick:this.closeSuccessModal},"我的主页"),"」中查看刚刚发布的内容，也可以打开「知乎 App」查看「想法」。"),Be.a.createElement("div",{className:"writePin-pinDetail"},Be.a.createElement("a",{href:"https://www.zhihu.com/pin/"+i,target:"_blank",onClick:this.closeSuccessModal},"查看详情")))))}}]),t}(Ue.Component),ke.contextTypes={currentUser:qe.a.object},ke.propTypes={status:qe.a.string},Ce=Se))||Ce,zt=(n(2132),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Kt=(xe=Object(He.connect)(v,{loadDraftCount:tt.i}))((Pe=je=function(e){function t(e,n){d(this,t);var r=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.setZaToolBarModule=function(e){e&&Qe.a.setModule(e,{module:"ToolBar"})},r.openWritePin=r.context.authRequired(function(){Qe.a.trackEvent(r.writePinEl,{action:"Pin",is_intent:!0}),r.setState({writePinStatus:"dialog"})}),r.changeWritePinStatus=function(e){r.setState({writePinStatus:e})},r.state={writePinStatus:"close"},r}return m(t,e),zt(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isDraftCountDrained,n=e.loadDraftCount;t||n()}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentUser,r=t.currentUser;r=void 0===r?{}:r;var o=r.draftCount,a=t.location,i=this.state.writePinStatus;return Be.a.createElement(Ze.c,null,"dialog"!==i&&Be.a.createElement("div",{className:"TopstoryHeader"},Be.a.createElement("div",{className:"TopstoryHeader-nav"},n&&Be.a.createElement(nt.a,{className:"TopstoryHeader-navItem",location:a,preset:"plain"},Be.a.createElement(Xe.a,{width:16,name:"question"}),"提问"),Be.a.createElement("a",{href:"/question",target:"_blank",title:"回答",className:"TopstoryHeader-navItem"},Be.a.createElement(Xe.a,{width:16,name:"paper"}),"回答"),Be.a.createElement("a",{href:"//zhuanlan.zhihu.com/write",target:"_blank",rel:"noopener noreferrer",title:"写文章",className:"TopstoryHeader-navItem TopstoryHeader-navItemArticle"},Be.a.createElement(Xe.a,{width:16,name:"write"}),"写文章"),n&&(!n.isOrg||n.isOrg&&n.isOrgCreatepinWhiteUser)&&Be.a.createElement("span",{onClick:this.openWritePin,title:"写想法",ref:function(t){e.writePinEl=t,e.setZaToolBarModule(t)},className:"TopstoryHeader-navItem TopstoryHeader-navItemPin"},Be.a.createElement(et.default,{src:At.a,width:16,height:16})," 写想法")),Be.a.createElement("a",{className:"TopstoryHeader-rightItem",href:"/draft",target:"_blank",title:"草稿"},"草稿",Boolean(o)&&" ("+Object($e.b)(o)+")")),Be.a.createElement(Bt,{onChangeStatus:this.changeWritePinStatus,status:i}))}}]),t}(Ue.Component),je.contextTypes={authRequired:qe.a.func},Te=Pe))||Te,qt=n(731),Ht=n(862),Vt=n(772),Wt=n(885),Gt=n(963),Yt=n(1195),Zt=n(888),Xt=n(1197),Jt=n(1199),Qt=n(727),$t=n(739),en=n(765),tn=n(732),nn=n(80),rn=n(899),on=(n(2133),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),an=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),sn=(Ae=Object(nn.a)(function(e){var t=e.liveCourse,n=e.trackCardShow,r=void 0===n||n;return{module:"LiveCourseItem",card:{content:{type:"LiveCourse",id:t.id}},trackCardShow:r}}))((Ne=Me=function(e){function t(){return y(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,e),an(t,[{key:"render",value:function(){var e=this.props,t=e.preset,n=e.liveCourse,r=e.liveCourse,o=r.id,a=r.type,i=r.subject,s=r.courseMemberCount,c=r.liveCount,u=r.price,l=r.promotionPrice,f=r.headImageMobile,p=r.likedNum,d=r.isLiked,h=r.description,m=r.speakers,v=void 0===m?[]:m,y=e.lastreadTouchable,g="/lives/courses/"+o;if(t!==Qt.c.interactive)return Be.a.createElement(Qt.e,{data:n,title:Be.a.createElement("a",{href:g,target:"_blank"},i)});var b=(Boolean(v.length)&&(v[0].member.name,v.length),{id:o,type:a});return Be.a.createElement("div",{className:"LiveCourseItem"},f&&Be.a.createElement("a",{className:"LiveCourseItem-cover",href:g,target:"_blank"},Be.a.createElement("img",{src:Object(Et.a)(f,"640w"),srcSet:Object(Et.a)(f,"r")+" 2x",alt:i})),Be.a.createElement(Qt.e,{data:n,title:Be.a.createElement("a",{href:g,target:"_blank"},i),lastreadTouchable:y},Be.a.createElement($t.b,{excerpt:"",limit:60,limitWithImage:60,html:h||"",data:n,extra:Be.a.createElement(Qt.b,null,Be.a.createElement("div",null,Be.a.createElement("span",null,"参与人数："),Object($e.b)(s)),Be.a.createElement("div",null,Be.a.createElement("span",null,"课程节数："),Object($e.b)(c)),Be.a.createElement("div",null,Be.a.createElement("span",null,"特价："),"number"==typeof l?Be.a.createElement("span",{className:"LiveItem-price"},Object(rn.a)(l),Be.a.createElement("del",null,Object(rn.a)(u))):Object(rn.a)(u)))},Be.a.createElement(en.a,on({},b,{liked:d,count:p,icon:"thank"})),Be.a.createElement(tn.a,on({},b,{url:g,title:i})))))}}]),t}(Ue.Component),Me.propTypes={preset:qe.a.oneOf(Object.values(Qt.c))},Ie=Ne))||Ie,cn=sn,un=n(900),ln=n(49),fn=(n(2134),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),pn=(Re=Object(nn.a)(function(e){var t=e.trackCardShow;return{module:"EventItem",trackCardShow:void 0===t||t}}))((Fe=Le=function(e){function t(){return w(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),fn(t,[{key:"render",value:function(){var e=this.props,t=e.eventcard,n=t.linkTitle,r=t.linkUrl,o=t.title,a=t.eventUrl,i=t.extraInfo,s=t.content,c=t.bannerUrl,u=e.eventcard,l=e.lastreadTouchable;return Be.a.createElement("div",{className:"EventcardItem"},c&&Be.a.createElement("a",{className:"EventcardItem-cover",href:a,target:"_blank"},Be.a.createElement("img",{src:c,srcSet:c+" 2x",alt:o})),Be.a.createElement(Qt.e,{data:u,title:Be.a.createElement("a",{href:a,target:"_blank"},o),lastreadTouchable:l},Be.a.createElement("div",{className:"EventcardItem-content"},s),Be.a.createElement(Qt.a,null,Boolean(n)&&Be.a.createElement(ln.a,{color:"blue",to:r},n),Be.a.createElement("span",null,i))))}}]),t}(Ue.Component),Le.propTypes={preset:qe.a.oneOf(Object.values(Qt.c))},De=Fe))||De,dn=pn,hn=n(254),mn=n(253),vn=n(243),yn=function(){return Be.a.createElement("span",null," · ")},gn=yn,bn=n(142),wn=n(81),_n=["MEMBER_ANSWER_QUESTION","MEMBER_PUBLISH_EBOOK","MEMBER_CREATE_ARTICLE","MEMBER_ASK_QUESTION","MEMBER_CREATE_PIN","MEMBER_PUBLISH_LIVE_COURSE"],En=function(e){return _n.includes(e.verb)},On=n(898),Cn=n(766),kn=n(1008),Sn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xn=/({})/,Tn={people:{Component:wn.a,type:"user"},topic:{Component:Cn.a},column:{Component:On.a},roundtable:{Component:kn.a}},jn=function(e){var t=e.actors,n=e.template,r=t.slice(0,5),o=function(){return r.map(function(e,t){if(!Tn[e.type])return Be.a.createElement("span",{key:e.id},e.title,t<r.length-1&&"、");var n=Tn[e.type],o=n.Component,a=n.type,i=void 0===a?e.type:a,s=Sn(O({},i,e),"people"===e.type&&{noBadge:!0});return Be.a.createElement("span",{key:e.id},Be.a.createElement(o,s,e.name||e.title),t<r.length-1&&"、")})};return Be.a.createElement(mn.CJKSpace,null,n.split(xn).map(function(e){return"{}"===e?o():e}))},Pn=jn,An=(n(2135),/{}/),In=["pin","answer","article"],Mn=function(e,t){var n=e.feed,r=e.experimentTitle,o=n.actionTextTpl,a=void 0===o?"":o,i=n.createdTime,s=n.actors,c=void 0===s?[]:s,u=n.verb,l=void 0===u?"":u,f=l.includes("MEMBER"),p=f&&Object(vn.d)(i);if(En(n)&&!r){var d=c[0],h=a.replace(An,"");return Be.a.createElement("div",{className:"FeedSource"},Be.a.createElement("div",{className:"FeedSource-firstline"},Be.a.createElement(mn.CJKSpace,null,Be.a.createElement(wn.a,{user:d,noHoverCard:!1},d.name),h),p&&[Be.a.createElement(gn,{key:"bull"}),p]))}return Be.a.createElement("div",{className:"FeedSource"},Be.a.createElement("div",{className:"FeedSource-firstline"},Be.a.createElement(Pn,{actors:c,template:a}),p&&[Be.a.createElement(gn,{key:"bull"}),p]),!r&&n.target&&In.includes(n.target.type)&&Be.a.createElement(bn.a,{className:"FeedSource-byline",author:n.target.author,preset:"plain",extra:!1}))};Mn.contextTypes={currentUser:qe.a.object};var Nn,Rn,Dn,Ln,Fn,Un,Bn,zn,Kn,qn,Hn,Vn,Wn,Gn,Yn,Zn,Xn,Jn,Qn,$n,er,tr,nr=Mn,rr=(n(2136),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),or=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ar=(Nn=Object(He.connect)(function(e){var t=e.env.experiment.nwebFeedUi;return{experimentAuthor:"group_2"===t,experimentTitle:"title"===t,experimentExcerpt:"excerpt"===t}}),Rn=Object(nn.a)(function(e){var t=e.item,n=t.id,r=t.attachedInfo,o=t.target,a=t.target,i=a.id,s=a.type,c=t.dataZaIndex,u=void 0===c?0:c;return{module:"FeedItem",index:String(u),isAd:!1,attachedInfoBytes:r,card:{card_type:"Feed",feed_id:n,has_image:Boolean(o.thumbnailExtraInfo&&"image"===o.thumbnailExtraInfo.type),has_video:Boolean(o.thumbnailExtraInfo&&"video"===o.thumbnailExtraInfo.type),content:or({type:Nt.E[s]},Object(hn.a)(s,i),{video_id:o.thumbnailExtraInfo&&o.thumbnailExtraInfo.videoId})},trackCardShow:!0}}),Nn(Dn=Rn(Dn=function(e){function t(){var e,n,r,o;C(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=k(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.renderItem=function(e){var t=r.props,n=t.experimentAuthor,o=t.experimentTitle,a=t.experimentExcerpt,i=e.target,s=e.actor,c=e.actionText;switch(i.type){case"question":return Be.a.createElement(Ht.a,{preset:Qt.c.interactive,question:i,detailShown:En(e),trackCardShow:!1,lastreadTouchable:!0});case"answer":return Be.a.createElement(Vt.a,{answer:i,action:"赞了文章"===c&&"voted",actor:s,preset:"special-plain",lessExcerpt:!0,experimentTitle:o,experimentAuthor:n,experimentExcerpt:a,trackCardShow:!1,lastreadTouchable:!0});case"article":return Be.a.createElement(Wt.a,{article:i,action:"赞了文章"===c&&"voted",actor:s,preset:"special-plain",lessExcerpt:!0,experimentAuthor:n,experimentTitle:o,experimentExcerpt:a,trackCardShow:!1,lastreadTouchable:!0});case"column":return Be.a.createElement(Gt.a,{preset:Qt.c.interactive,column:i,trackCardShow:!1,lastreadTouchable:!0});case"collection":return Be.a.createElement(Zt.a,{preset:Qt.c.interactive,favlist:i,trackCardShow:!1,lastreadTouchable:!0});case"roundtable":return Be.a.createElement(Xt.a,{preset:Qt.c.interactive,roundtable:i,trackCardShow:!1,lastreadTouchable:!0});case"live_course":return Be.a.createElement(cn,{liveCourse:i,preset:Qt.c.interactive,trackCardShow:!1,lastreadTouchable:!0});case"live":return Be.a.createElement(Jt.a,{live:i,preset:Qt.c.interactive,trackCardShow:!1,lastreadTouchable:!0});case"ebook":return Be.a.createElement(Yt.a,{ebook:i,preset:Qt.c.interactive,trackCardShow:!1,lastreadTouchable:!0});case"pin":return Be.a.createElement(un.a,{action:"赞了想法"===c&&"voted",actor:s,pin:i,preset:"plain",experimentTitle:o,experimentAuthor:n,trackCardShow:!1,lastreadTouchable:!0});case"eventcard":return Be.a.createElement(dn,{trackCardShow:!1,eventcard:i,lastreadTouchable:!0});default:return null}},o=n,k(r,o)}return S(t,e),rr(t,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.className,r=e.experimentTitle;return t.target.isDelete?null:Be.a.createElement("div",{className:ot()("Feed",n)},Be.a.createElement(nr,{feed:t,experimentTitle:r}),this.renderItem(t))}}]),t}(Ue.Component))||Dn)||Dn),ir=ar,sr=n(244),cr=n(246),ur=(n(2137),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),lr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),fr=(Ln=Object(nn.a)(function(e){var t=e.item,n=t.id;return{module:"FeedItem",isAd:!1,attachedInfoBytes:t.attachedInfo,list:{feed_id:n,type:"SuggestedTopics",list_size:t.card.topicList.length},trackCardShow:!0}}))((Bn=Un=function(e){function t(){var e,n,r,o;x(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=T(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={startIndex:0,endIndex:Math.min(4,r.props.item.card.topicList.length)},r.handleChange=function(){var e=r.state.endIndex;r.setState({startIndex:e,endIndex:Math.min(e+4,r.props.item.card.topicList.length)})},r.handleShowAll=function(){r.setState({startIndex:0,endIndex:r.props.item.card.topicList.length})},o=n,T(r,o)}return j(t,e),lr(t,[{key:"render",value:function(){var e=this.state,n=e.startIndex,r=e.endIndex,o=this.props,a=o.className,i=o.item.card.topicList,s=r>=i.length;return Be.a.createElement("div",{className:ot()(a,"ActionCard")},Be.a.createElement("div",{className:"ActionCard-meta"},Be.a.createElement("span",{className:"ActionCard-title"},"你可能感兴趣的话题"),Be.a.createElement(ln.a,{preset:"link",to:"/topics",target:"_blank"},"查看全部"),Be.a.createElement("span",{className:"ActionCard-dot"}),Be.a.createElement(at.default,{preset:"link",onClick:this.handleChange,disabled:s},"换一换")),Be.a.createElement("div",{className:"ActionCard-topicsContainer"},Be.a.createElement("div",{className:"ActionCard-topics"},i.slice(n,r).map(function(e,n){return Be.a.createElement(t.Topic,ur({key:n},e))}))))}}]),t}(Ue.Component),Un.Topic=function(e){var t=e.avatarUrl,n=e.reasonText,r=e.name,o=e.id,a=e.isFollowing;return Be.a.createElement(cr.a,{module:"TopicItem",trackCardShow:!0},Be.a.createElement("div",{className:"ActionCard-topic"},Be.a.createElement("a",{href:"/topic/"+o,target:"_blank"},Be.a.createElement(ct.default,{size:50,url:t,round:!0}),Be.a.createElement("div",{className:"ActionCard-topic-name",title:r},r),Be.a.createElement("div",{className:"ActionCard-topic-reason",title:n},n)),Be.a.createElement(sr.a,{className:"ActionCard-topic-button",id:o,type:"topic",isFollowing:a},"关注")))},Fn=Bn))||Fn,pr=fr,dr=n(143),hr=n(735),mr=n(736),vr=n(261),yr=n(87),gr=n(25),br=n.n(gr),wr=n(903),_r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Er=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Or=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Cr=function(e){if(!document.body.contains(e))return!1;var t=e.getBoundingClientRect(),n=document.documentElement;return t.top<(window.innerHeight||n.clientHeight)},kr=function(e,t,n){if(Cr(e))return t.call(n),null;var r=Object(yr.subscribe)("scroll",function(){if(Cr(e))return t.call(n),void r.unsubscribe()});return r},Sr=(Kn=zn=function(e){function t(){var e,n,r,o;I(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=M(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleRef=function(e){r.node=e},r.handleClick=function(e){var t=r.props,n=t.onClick,o=t.ad;n&&n(e);var a=o.creatives[0],i=a.landingUrl,s=a.externalClickUrl,c=a.clickTracks,u=e.target.closest("a");if(u&&u.href===i){var l=[s].concat(A(c||[])).filter(Boolean);if(l.length){e.preventDefault();var f=u.href;l.forEach(function(e){return Object(hn.c)(e)});var p=document.createElement("a");p.href=f,p.click()}}},o=n,M(r,o)}return N(t,e),Or(t,[{key:"componentDidMount",value:function(){var e=this.props.experiment,t=this.props.ad,n=t.loadTracks,r=t.debugTracks,o=Er(t.creatives,1),a=o[0],i={trackName:"impressionTrack",plugin:Object(wr.b)(),debugTracks:r&&r.filter(Boolean),experiment:e};(n||[]).filter(Boolean).forEach(function(e){return Object(wr.a)(e,i)});var s=(a.impressionTracks||[]).filter(Boolean);s.length&&(this.scrollSubscription=kr(this.node,function(){s.map(function(e){return Object(hn.c)(e)})}))}},{key:"componentWillUnmount",value:function(){this.scrollSubscription&&this.scrollSubscription.unsubscribe()}},{key:"render",value:function(){var e=br()(this.props,["onRef","onClick","ad","experiment"]),t=e.children,n=P(e,["children"]);return t&&Be.a.createElement("div",_r({},n,{ref:this.handleRef,onClick:this.handleClick}),t)}}]),t}(Ue.Component),zn.propTypes={ad:qe.a.object.isRequired,children:qe.a.node},Kn),xr=Sr,Tr=xr,jr={stringify:R,parse:D},Pr=(n(2138),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Ar=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ir=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Mr={PROMOTE_ARTICLE:"发表了一篇文章",PROMOTE_QUESTION:"提了一个问题",PROMOTE_MEMBER:"帐号推荐"},Nr=function(e){var t=e.brand,n=e.adVerb,r=Ir(e.creatives,1),o=r[0];return{template:e.template,creative:o,brand:t,adVerb:n,target:o.target}},Rr=function(e){var t=e.logo,n=e.name,r=e.target,o=e.size,a=void 0===o?20:o,i=e.extra,s=ot()("Advert-brand-name",{"Advert-brand-name--hasExtra":i});return Be.a.createElement("div",{className:"Advert-brand"},r&&r.urlToken?[Be.a.createElement(wn.a,{key:"avatar",className:"Advert-brand-avatar",user:r,avatar:!0}),Be.a.createElement(wn.a,{key:"name",className:s,user:r})]:[Be.a.createElement(ct.default,{key:"avatar",size:a,url:t}),Be.a.createElement("span",{key:"name",className:s},n)],i)},Dr=function(e){var t=e.landingUrl,n=e.image,r=e.alt;return n&&Be.a.createElement("a",{className:"Advert-cover",target:"_blank",href:t},Be.a.createElement("img",{src:Object(Et.a)(n,"640w"),srcSet:Object(Et.a)(n,"r")+" 2x",alt:r}))},Lr=(qn=Object(nn.a)(function(e){var t=e.item,n=t.id,r=t.ad,o=t.attachedInfo,a=Nr(r),i=a.target,s=a.creative.zaAdInfoJson;return{module:"FeedItem",isAd:!0,attachInfoBytes:o,card:{card_type:"Feed",feed_id:n,content:Ar({ad_info:s&&jr.parse(s)},i&&Ar({type:Nt.E[i.type]},Object(hn.a)(i.type,i.id)))},trackCardShow:!0}}))((Wn=Vn=function(e){function t(){var e,n,r,o;F(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=U(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={commentsShown:!1,commentPattern:"fixed"},r.handleLog=function(e){var t=e.target,n=t.classList,o=t.tagName,a=[].concat(L(n));if("A"===o){var i=void 0;i=a.includes("Advert-title")?"Title":a.includes("Advert-button")?"ViewAll":"Body",Qe.a.trackEvent(r,{action:"OpenUrl",element:"Link",element_name:i})}},r.handleCommentsShown=function(e,t){r.setState(t)},r.handleCommentsHide=function(){r.setState({commentsShown:!1})},o=n,U(r,o)}return B(t,e),Pr(t,[{key:"renderItem",value:function(e){var n=e.creative,r=e.target,o=e.brand,a=e.adVerb,i=this.state.commentsShown;switch(a){case"PROMOTE_IMAGE":return Be.a.createElement(t.Image,{brand:o,creative:n});case"PROMOTE_URL_CARD":case"PROMOTE_PROMOTION_PAGE":return Be.a.createElement(t.Card,{brand:o,creative:n,target:r,commentsShown:i,handleCommentsShown:this.handleCommentsShown});case"PROMOTE_MEMBER":return Be.a.createElement(t.Account,{target:r});case"PROMOTE_ARTICLE":return Be.a.createElement(t.Article,{adVerb:a,brand:o,target:r,creative:n,commentsShown:i,handleCommentsShown:this.handleCommentsShown});case"PROMOTE_QUESTION":return Be.a.createElement(t.Question,{adVerb:a,brand:o,target:r,creative:n,commentsShown:i,handleCommentsShown:this.handleCommentsShown});default:return null}}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.item.ad,r=this.state,o=r.commentsShown,a=r.commentPattern,i=Nr(n),s=i.creative,c=i.target,u=i.brand,l=i.adVerb;return Be.a.createElement(Tr,{className:t,onClick:this.handleLog,ad:n},Be.a.createElement(cr.a,{module:"AdItem"},this.renderItem({creative:s,target:c,brand:u,adVerb:l})),Be.a.createElement(mr.a,{parent:c,shown:o,onClose:this.handleCommentsHide,commentPattern:a}))}}]),t}(Ue.Component),Vn.Image=function(e){var t=e.brand,n=e.creative,r=n.image,o=n.name,a=n.title,i=n.landingUrl;return Be.a.createElement("div",{className:"Advert--image"},Be.a.createElement("div",{className:"Advert-head"},Be.a.createElement(Rr,t)),Be.a.createElement("a",{href:i,target:"_blank"},Be.a.createElement("h2",{className:"Advert-title"},a)),Be.a.createElement("div",{className:"Advert-content"},Be.a.createElement(Dr,{landingUrl:i,image:r,alt:o})))},Vn.Card=function(e){var t=e.brand,n=e.creative,r=e.target,o=e.commentsShown,a=e.handleCommentsShown,i=n.image,s=n.image2x,c=n.name,u=n.title,l=n.description,f=n.landingUrl,p=n.button,d=void 0===p?"阅读全文":p;return Be.a.createElement("div",{className:"Advert--card"},Be.a.createElement("div",{className:"Advert-head"},Be.a.createElement(Rr,t)),Be.a.createElement("a",{target:"_blank",href:f},Be.a.createElement("h2",{className:"Advert-title"},u),Be.a.createElement("div",{className:"Advert-content Advert-content--cover"},Be.a.createElement("img",{className:"Advert--card-cover",src:i,srcSet:s+" 2x",alt:c}),Be.a.createElement("div",{className:"Advert--card-detail"},Be.a.createElement(dr.default,{className:"Advert-description",tag:"span",html:l}),d&&Be.a.createElement("span",{className:"Advert-button"},d,Be.a.createElement(Xe.a,{height:10,name:"arrowRight"}))))),r&&Be.a.createElement(Qt.a,null,Be.a.createElement(en.a,{id:r.id,type:r.type,liked:Boolean(r.voting),count:r.voteupCount}),Be.a.createElement(hr.a,{count:r.commentCount,commentsShown:o,onClick:a})))},Vn.Account=function(e){var t=e.target,n=t.coverUrl,r=t.name,o=t.avatarUrl,a=t.headline,i=t.urlToken,s=t.type,c=t.lastestUpdateArticle;return Be.a.createElement("div",{className:"Advert-account"},Be.a.createElement("div",{className:"Advert-meta"},"帐号推荐"),Be.a.createElement("div",{className:"Advert-account-inner"},n?Be.a.createElement("img",{className:"Advert-account-cover",src:Object(Et.a)(n,"640w"),srcSet:Object(Et.a)(n,"r")+" 2x",alt:r}):Be.a.createElement("div",{className:"Advert-account-cover"}),Be.a.createElement("div",{className:"Advert-account-body"},Be.a.createElement("div",{className:"Advert-account-user"},Be.a.createElement(ct.default,{className:"Advert-account-user-avatar",size:88,url:o}),Be.a.createElement("div",{className:"Advert-account-user-content"},Be.a.createElement(wn.a,{className:"Advert-account-user-link",user:t}),Be.a.createElement(dr.default,{html:a})),Be.a.createElement("div",null,Be.a.createElement(sr.a,{id:i,isFollowing:t.isFollowing,type:s,gender:t.gender}))),Be.a.createElement("div",{className:"Advert-account-description"},Be.a.createElement("span",null,"最近更新："),c))))},Vn.Article=function(e){var t=e.adVerb,n=e.target,r=e.brand,o=e.creative,a=e.commentsShown,i=e.handleCommentsShown,s=o.landingUrl,c=o.title,u=o.description,l=o.actionButton,f=o.button,p=n.id,d=n.type;return Be.a.createElement("div",{className:"Advert"},Be.a.createElement(Rr,Ar({},r,{size:24,extra:Be.a.createElement("div",{className:"Advert-metaText"}," ",Mr[t])})),Be.a.createElement(Qt.e,{className:"Advert-content",title:Be.a.createElement("a",{className:"Advert-title",href:s,target:"_blank"},c)},Be.a.createElement("a",{href:s,target:"_blank"},Be.a.createElement(dr.default,{className:"Advert-description",tag:"span",html:u}),f&&Be.a.createElement("span",{className:"Advert-button"},f,Be.a.createElement(Xe.a,{height:10,name:"arrowRight"}))),Be.a.createElement(Qt.a,null,l&&Be.a.createElement(ln.a,{color:"blue",a:!0,to:s,target:"_blank"},Be.a.createElement(Xe.a,{name:"plus",className:"Advert-followIcon"}),"关注"),Be.a.createElement(en.a,{id:n.id,type:n.type,liked:Boolean(n.voting),count:n.voteupCount}),Be.a.createElement(hr.a,{count:n.commentCount,commentsShown:a,onClick:i}),Be.a.createElement(tn.a,{id:p,type:d,title:c,href:s,authorName:r&&r.name}),Be.a.createElement(vr.a,{id:p,type:d}))))},Vn.Question=function(e){var t=e.brand,n=e.adVerb,r=e.target,o=e.creative,a=e.commentsShown,i=e.handleCommentsShown,s=o.landingUrl,c=o.title,u=o.image,l=o.description,f=o.actionButton,p=o.button,d=r.id,h=r.type,m=r.relationship;return Be.a.createElement("div",{className:"Advert"},Be.a.createElement("div",{className:"Advert-head"},Be.a.createElement(Rr,Ar({},t,{size:24,extra:Be.a.createElement("div",{className:"Advert-metaText"}," ",Mr[n])}))),Be.a.createElement("a",{href:s,target:"_blank"},Be.a.createElement("h2",{className:"Advert-title"},c),Be.a.createElement("div",{className:"Advert-content Advert-content--question"},Be.a.createElement("img",{className:"Advert--card-cover",src:u,srcSet:Object(Et.a)(u,"400x224")+" 2x",alt:c}),Be.a.createElement("div",{className:"Advert--card-detail"},l,p&&Be.a.createElement("span",{className:"Advert-button"},p,Be.a.createElement(Xe.a,{height:10,name:"arrowRight"}))))),Be.a.createElement(Qt.a,null,f&&Be.a.createElement(sr.a,{id:d,type:h,isFollowing:(m&&{}.hasOwnProperty.call(m,"isFollowing")?m:r).isFollowing}),Be.a.createElement(hr.a,{count:r.commentCount,commentsShown:a,onClick:i})))},Hn=Wn))||Hn,Fr=Lr,Ur=n(39),Br=n(270),zr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Kr=(Gn=Object(He.connect)(null,{toggleUninterest:Br.d}))(Yn=function(e){function t(){var e,n,r,o;z(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=K(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleToggleUninterest=function(){var e=r.props,t=e.item,n=t.id,o=t.type,a=t.ad,i=t.isUninterest,s=e.toggleUninterest;return"feed_advert"===o&&Object(hn.c)(a.closeTrack),Qe.a.trackEvent(H(r.el),{action:i?"UnIgnore":"Ignore",element:"Button",is_intent:!0}),s(n)},o=n,K(r,o)}return q(t,e),zr(t,[{key:"render",value:function(){var e=this,t=Be.a.createElement(at.default,{onRef:function(t){e.el=t},className:"TopstoryItem-rightButton",preset:"plain",onClick:this.handleToggleUninterest,"data-tooltip":"不感兴趣","data-tooltip-position":"bottom"},Be.a.createElement(Xe.a,{width:10,height:10,name:"remove"}));return"feed_advert"===this.props.item.type?Be.a.createElement(Ur.c,{className:"TopstoryItem-rightButton",toggler:Be.a.createElement(at.default,{onRef:function(t){e.el=t},className:"TopstoryItem-advertButton",preset:"plain"},"广告",Be.a.createElement(Xe.a,{name:"arrow"}))},Be.a.createElement(Ur.b,{className:"TopstoryItem-menuItem",onClick:this.handleToggleUninterest},"不感兴趣"),Be.a.createElement(Ur.b,{className:"TopstoryItem-menuItem",tag:"a",target:"_blank",href:"/promotion-intro"},"知乎广告介绍")):t}}]),t}(Ue.Component))||Yn,qr=Kr,Hr=(n(2139),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Vr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Wr={FEED:"feed",FEED_ADVERT:"feed_advert",ACTION_CARD:"action_card"},Gr=(Zn=Object(He.connect)(function(e){var t=e.env.experiment.nwebFeedUi;return{experimentItem:"group_3"===t,experimentExpand:"expand"===t||"excerpt"===t,experimentButton:"button"===t}},{uninterestReasons:Br.e,toggleUninterest:Br.d}))((Qn=Jn=function(e){function t(){var e,n,r,o;G(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=Y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={reasons:[]},r.handleToggleUninterest=function(e){var t=r.props,n=t.item.id,o=t.toggleUninterest;return Qe.a.trackEvent(e.target,{action:"UnIgnore",element:"Button",is_intent:!0}),o(n)},r.handleSubmitUninterestReasons=function(e){var t=r.props,n=t.item.id,o=t.uninterestReasons;return Qe.a.trackEvent(e.target,{action:"Ignore",element:"Button"}),o(r.state.reasons,n)},r.handleToggleUninterestReason=function(e,t){var n=r.state.reasons,o=n.indexOf(t),a=o<0;Qe.a.trackEvent(e.target,{action:a?"Select":"Unselect",is_intent:!0,name:t.reasonText}),r.setState({reasons:a?[].concat(W(n),[t]):[].concat(W(n.slice(0,o)),W(n.slice(o+1)))})},o=n,Y(r,o)}return Z(t,e),Vr(t,[{key:"renderItem",value:function(){var e=this.props,t=e.item,n=V(e,["item"]);switch(t.type){case Wr.FEED:return Be.a.createElement(ir,Hr({item:t},n));case Wr.ACTION_CARD:return Be.a.createElement(pr,{item:t});case Wr.FEED_ADVERT:return Be.a.createElement(Fr,{item:t});default:return null}}},{key:"render",value:function(){var e=this,n=this.props,r=n.item,o=n.experimentItem,a=n.experimentExpand,i=n.experimentButton,s=r.isDelete,c=r.isUninterest,u=r.uninterestReasons,l=r.attachedInfo,f=this.state.reasons;if(s)return null;if(c){var p=Be.a.createElement("div",null,f.length?Be.a.createElement(at.default,{preset:"plain",className:ot()("TopstoryItem-actionButton","is-active"),onClick:this.handleSubmitUninterestReasons},"提交"):Be.a.createElement(at.default,{preset:"plain",className:"TopstoryItem-actionButton",onClick:this.handleToggleUninterest},"撤销"),Be.a.createElement("h2",{className:"TopstoryItem-uninterestTitle"},"已屏蔽该条。",Boolean(u.length)&&"还不想看见以下哪些内容？"),Be.a.createElement("div",null,u.map(function(n){return Be.a.createElement(t.UninterestTag,{key:n.reasonText,reason:n,isActive:f.includes(n),onToggle:e.handleToggleUninterestReason})})));return Be.a.createElement(Ze.c,{className:"TopstoryItem"},Be.a.createElement(cr.a,{module:"FeedItem",attachedInfoBytes:l},Be.a.createElement("div",null,Be.a.createElement(cr.a,{module:"IgnoreCard"},p))))}var d=r.type===Wr.ACTION_CARD,h=r.type===Wr.FEED_ADVERT,m=o?qt.a:Ze.c;return Be.a.createElement(m,{className:ot()("TopstoryItem",{"TopstoryItem--experimentExpand":a,"TopstoryItem--experimentButton":i,"TopstoryItem--experimentItem":o,"TopstoryItem--actionCard":d,"TopstoryItem--advertCard":h})},c||d||Be.a.createElement(qr,{item:r}),this.renderItem())}}]),t}(Ue.Component),Jn.UninterestTag=function(e){var t=e.reason,n=e.isActive,r=e.onToggle,o=V(e,["reason","isActive","onToggle"]);return Be.a.createElement(at.default,Hr({className:ot()("TopstoryItem-uninterestTag",{"is-active":n}),onClick:function(e){return r(e,t)}},o),t.reasonText)},Xn=Qn))||Xn,Yr=Gr,Zr=(n(2140),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Xr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jr=($n=Object(He.connect)(te,{loadTopstorys:Br.c}),er=Object(nn.a)(function(e){return{module:"TopStoryFeedList",list:{list_size:e.items.length}}}),$n(tr=er(tr=function(e){function t(){var e,n,r,o;X(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=J(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleLoad=function(){var e=r.props,t=e.isFetching,n=e.loadTopstorys;t||n()},o=n,J(r,o)}return Q(t,e),Zr(t,[{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,r=e.items,o=e.experimentItem,a=o?Ze.c:"div",i=o?"div":Ze.c;return Be.a.createElement(a,{className:"TopstoryMain","data-zop-feedlistfather":"0"},Be.a.createElement(ut.default,{isLoading:t,isDrained:n,onLoad:this.handleLoad,placeholder:Be.a.createElement(i,null,Be.a.createElement(ut.PlaceHolder,{className:"List-item"}))},r.map(function(e){return Be.a.createElement(Yr,{key:e.id,item:e})})))}}]),t}(Ue.Component))||tr)||tr),Qr=Jr,$r=n(1285),eo=n(9),to=n(24),no=n(50),ro=[{avatar:"//pic3.zhimg.com/7f5966584a3301d83ed24708d9d56aea_l.jpg",bio:"系外行星的研究生"},{avatar:"//pic2.zhimg.com/6e5a78fe9_l.jpg",bio:"onely Planet 作者，潜水员"},{avatar:"//pic2.zhimg.com/02295607d866419c478062d9bfc5a041_l.jpg",bio:"北京大学南亚学系"},{avatar:"//pic3.zhimg.com/47e67af4e15cb97d47da376d1b83cae6_l.jpg",bio:"机械工程师，pegasister"},{avatar:"//pic3.zhimg.com/f374969469745635565a63bcd36842f6_l.jpg",bio:"钛度科技/电子竞技"},{avatar:"//pic2.zhimg.com/fe9e9e6dd_l.jpg",bio:"工科女博士/专业西点师/东京时差党"}],oo="lastIgnoreTopstoryPreludeTime",ao="lastIgnoreTopstoryTopicTime",io=(n(2141),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),so=function(e){function t(){var e,n,r,o;ne(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=re(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={showTextWarning:!1},r.handleUpdateHeadline=function(){var e=r.props,t=e.urlToken,n=e.onRefresh,o=r.context.guideActions.updateProfile,a=r.input.value;r.checkInputText(a)&&o(t,{headline:a}).then(function(){to.a.get(oo)&&to.a.delete(oo)}).catch(function(){to.a.get(oo)||(to.a.set(oo,Date.now()),n())})},r.handleInputHeadline=function(){r.checkInputText(r.input.value)},o=n,re(r,o)}return oe(t,e),io(t,[{key:"checkInputText",value:function(e){return e.length>40?(this.setState({showTextWarning:!0}),!1):(this.setState({showTextWarning:!1}),!0)}},{key:"render",value:function(){var e=this,t=this.state.showTextWarning,n=ro.map(function(e,t){return Be.a.createElement("li",{key:t,className:ot()("TopstoryPrelude-user","TopstoryPrelude-userId--"+t)},Be.a.createElement("img",{className:"TopstoryPrelude-avatar",alt:e.bio,src:e.avatar}),Be.a.createElement("span",{className:"TopstoryPrelude-userBio"},e.bio))});return Be.a.createElement("div",{className:"TopstoryPrelude"},Be.a.createElement("div",{className:"TopstoryGuide-header"},Be.a.createElement("h2",{className:"TopstoryGuide-title"},"你的职业或专业是什么?"),Be.a.createElement("p",{className:"TopstoryGuide-subtitle"},"简单介绍自己，会为你挑选你可能感兴趣的话题")),Be.a.createElement("div",{className:"TopstoryGuide-container"},Be.a.createElement("div",{className:"TopstoryPrelude-field"},Be.a.createElement(no.default,{width:320,large:"large",onChange:this.handleInputHeadline,onRef:function(t){return e.input=t},placeholder:"比如医生、律师、设计师"}),Be.a.createElement(at.default,{preset:"primary",color:"blue",onClick:this.handleUpdateHeadline},"完成"),t&&Be.a.createElement("div",{className:"TopstoryPrelude-fieldTips"},"文字长度超出40个字")),Be.a.createElement("div",{className:"TopstoryPrelude-users"},Be.a.createElement("p",{className:"TopstoryPrelude-intro"},"他们是这样介绍自己的"),Be.a.createElement("ul",{className:"TopstoryPrelude-userList"},n))))}}]),t}(Ue.Component),co=so;so.contextTypes={guideActions:qe.a.object.isRequired};var uo=(n(2142),function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),lo=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),fo=function(e){function t(){var e,n,r,o;ae(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=ie(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleSelectTopic=function(e){(0,r.context.guideActions.changeSelectTopic)(e)},r.handleSubmitTopics=function(){var e=r.context.guideActions.submitRecommendationTopics,t=r.props,n=t.topics,o=t.onRefresh;e(Object.entries(n).filter(function(e){return uo(e,2)[1].isFollowing}).map(function(e){var t=uo(e,2),n=t[1];return Number(n.id)})).then(function(){to.a.get(ao)&&to.a.delete(ao)}).catch(function(){to.a.get(ao)||(to.a.set(ao,Date.now()),o())})},o=n,ie(r,o)}return se(t,e),lo(t,[{key:"componentDidMount",value:function(){var e=this.props.showTopics,t=this.context.guideActions.getRecommendationTopics;e&&t()}},{key:"render",value:function(){var e=this,t=this.props,n=t.topics,r=t.showTopics,o=Object.entries(n).map(function(t,n){var r=t[1];return Be.a.createElement("li",{key:n,className:ot()("TopstoryTopics-item",{"TopstoryGuide-fadeIn":r.isRelated}),onClick:function(){return e.handleSelectTopic(n)}},Be.a.createElement("div",{className:"TopstoryTopics-itemWrap"},Be.a.createElement("img",{className:"TopstoryTopics-itemPic",alt:r.name,src:Object(Et.a)(r.avatarUrl,"qhd"),srcSet:Object(Et.a)(r.avatarUrl,"qhd")+" 2x"}),Be.a.createElement("span",{className:"TopstoryTopics-itemLabel"},r.name),Be.a.createElement("span",{className:ot()("TopstoryTopics-selectItem",{"is--selected":r.isFollowing})},Be.a.createElement(Xe.a,{name:"check"})),Be.a.createElement("span",{className:"TopstoryTopics-itemMask"})))});return Be.a.createElement("div",{className:"TopstoryWrap"},Be.a.createElement("div",{className:"TopstoryTopics fadeInUp"},Be.a.createElement("div",{className:"TopstoryGuide-header"},Be.a.createElement("h2",{className:"TopstoryGuide-title"},"你想关注哪些话题？"),Be.a.createElement("p",{className:"TopstoryGuide-subtitle"},"我们将根据你关注的话题定制首页推荐内容")),Be.a.createElement("div",{className:"TopstoryGuide-container"},Be.a.createElement("ul",{className:"TopstoryTopics-list"},r&&o)),Be.a.createElement("p",{className:"TopstoryTopics-hint"},"可以通过搜索和「话题广场」找到更多你想要的话题")),Be.a.createElement("div",{className:"TopstoryGuide-onStage"},Be.a.createElement(at.default,{preset:"primary",color:"blue",onClick:this.handleSubmitTopics},"进入知乎")))}}]),t}(Ue.Component),po=fo;fo.contextTypes={guideActions:qe.a.object.isRequired};var ho,mo,vo,yo,go,bo,wo,_o,Eo=n(40),Oo=n(326),Co=(n(2143),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),ko=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},So=6048e5,xo=(ho=Object(He.connect)(pe,de,he))((yo=vo=function(e){function t(){var e,n,r,o;ce(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=ue(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={igorePrelude:!1,isServer:!0},r.handleRefresh=function(){r.setState(ko({},fe()))},o=n,ue(r,o)}return le(t,e),Co(t,[{key:"getChildContext",value:function(){return{guideActions:this.props.guideActions}}},{key:"componentDidMount",value:function(){this.setState(ko({isServer:!1},fe()))}},{key:"render",value:function(){var e=this.props,t=e.showPrelude,n=e.showTopics,r=e.urlToken,o=e.topics,a=this.state,i=a.igorePrelude,s=a.ignoreTopic,c=a.isServer,u=t&&!i,l=!u&&n&&!s;return(u||l)&&!c&&Be.a.createElement("div",{className:"TopstoryGuide"},u&&Be.a.createElement(co,{name:"Prelude",urlToken:r,onRefresh:this.handleRefresh}),l&&Be.a.createElement(po,{name:"Topics",showTopics:n,topics:o,onRefresh:this.handleRefresh}))}}]),t}(Ue.Component),vo.childContextTypes={guideActions:qe.a.object.isRequired},mo=yo))||mo,To=xo,jo=(n(2144),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Po=(go=Object(He.connect)(ge))((_o=wo=function(e){function t(){return me(this,t),ve(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ye(t,e),jo(t,[{key:"componentWillMount",value:function(){var e=this.context,t=e.currentUser;t=void 0===t?{}:t;var n=t.isOrg,r=e.router,o=this.props.location;n&&"/index"!==o.pathname&&r.replace("/organization")}},{key:"render",value:function(){var e=this.props,t=e.location,n=e.guideShown;return Be.a.createElement("div",{className:"Topstory"},Be.a.createElement(We.a,{title:"首页"}),Be.a.createElement(Ge.a,null,Be.a.createElement(Ye.a,null)),Be.a.createElement("div",{className:"Topstory-container"},Be.a.createElement("div",{className:"Topstory-mainColumn"},Be.a.createElement(Kt,{location:t}),Be.a.createElement(Qr,null)),Be.a.createElement($r.a,null)),n&&Be.a.createElement(To,null))}}]),t}(Ue.Component),wo.fetchData=function(){return Object(Br.c)()},wo.contextTypes={currentUser:qe.a.object,router:qe.a.object},bo=_o))||bo;t.default=Be.a.createElement(ze.Route,null,Be.a.createElement(ze.IndexRoute,{component:Po,name:"Topstory"}),Be.a.createElement(ze.Route,{path:"index",component:Po,name:"Topstory"}))},726:function(e,t,n){!function(t,n){e.exports=n()}(0,function(){"use strict";function e(e,t){t&&(e.prototype=Object.create(t.prototype)),e.prototype.constructor=e}function t(e){return a(e)?e:j(e)}function n(e){return i(e)?e:P(e)}function r(e){return s(e)?e:A(e)}function o(e){return a(e)&&!c(e)?e:I(e)}function a(e){return!(!e||!e[un])}function i(e){return!(!e||!e[ln])}function s(e){return!(!e||!e[fn])}function c(e){return i(e)||s(e)}function u(e){return!(!e||!e[pn])}function l(e){return e.value=!1,e}function f(e){e&&(e.value=!0)}function p(){}function d(e,t){t=t||0;for(var n=Math.max(0,e.length-t),r=new Array(n),o=0;o<n;o++)r[o]=e[o+t];return r}function h(e){return void 0===e.size&&(e.size=e.__iterate(v)),e.size}function m(e,t){if("number"!=typeof t){var n=t>>>0;if(""+n!==t||4294967295===n)return NaN;t=n}return t<0?h(e)+t:t}function v(){return!0}function y(e,t,n){return(0===e||void 0!==n&&e<=-n)&&(void 0===t||void 0!==n&&t>=n)}function g(e,t){return w(e,t,0)}function b(e,t){return w(e,t,t)}function w(e,t,n){return void 0===e?n:e<0?Math.max(0,t+e):void 0===t?e:Math.min(t,e)}function _(e){this.next=e}function E(e,t,n,r){var o=0===e?t:1===e?n:[t,n];return r?r.value=o:r={value:o,done:!1},r}function O(){return{value:void 0,done:!0}}function C(e){return!!x(e)}function k(e){return e&&"function"==typeof e.next}function S(e){var t=x(e);return t&&t.call(e)}function x(e){var t=e&&(En&&e[En]||e[On]);if("function"==typeof t)return t}function T(e){return e&&"number"==typeof e.length}function j(e){return null===e||void 0===e?F():a(e)?e.toSeq():z(e)}function P(e){return null===e||void 0===e?F().toKeyedSeq():a(e)?i(e)?e.toSeq():e.fromEntrySeq():U(e)}function A(e){return null===e||void 0===e?F():a(e)?i(e)?e.entrySeq():e.toIndexedSeq():B(e)}function I(e){return(null===e||void 0===e?F():a(e)?i(e)?e.entrySeq():e:B(e)).toSetSeq()}function M(e){this._array=e,this.size=e.length}function N(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}function R(e){this._iterable=e,this.size=e.length||e.size}function D(e){this._iterator=e,this._iteratorCache=[]}function L(e){return!(!e||!e[kn])}function F(){return Sn||(Sn=new M([]))}function U(e){var t=Array.isArray(e)?new M(e).fromEntrySeq():k(e)?new D(e).fromEntrySeq():C(e)?new R(e).fromEntrySeq():"object"==typeof e?new N(e):void 0;if(!t)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+e);return t}function B(e){var t=K(e);if(!t)throw new TypeError("Expected Array or iterable object of values: "+e);return t}function z(e){var t=K(e)||"object"==typeof e&&new N(e);if(!t)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+e);return t}function K(e){return T(e)?new M(e):k(e)?new D(e):C(e)?new R(e):void 0}function q(e,t,n,r){var o=e._cache;if(o){for(var a=o.length-1,i=0;i<=a;i++){var s=o[n?a-i:i];if(!1===t(s[1],r?s[0]:i,e))return i+1}return i}return e.__iterateUncached(t,n)}function H(e,t,n,r){var o=e._cache;if(o){var a=o.length-1,i=0;return new _(function(){var e=o[n?a-i:i];return i++>a?O():E(t,r?e[0]:i-1,e[1])})}return e.__iteratorUncached(t,n)}function V(e,t){return t?W(t,e,"",{"":e}):G(e)}function W(e,t,n,r){return Array.isArray(t)?e.call(r,n,A(t).map(function(n,r){return W(e,n,r,t)})):Y(t)?e.call(r,n,P(t).map(function(n,r){return W(e,n,r,t)})):t}function G(e){return Array.isArray(e)?A(e).map(G).toList():Y(e)?P(e).map(G).toMap():e}function Y(e){return e&&(e.constructor===Object||void 0===e.constructor)}function Z(e,t){if(e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if(e=e.valueOf(),t=t.valueOf(),e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1}return!("function"!=typeof e.equals||"function"!=typeof t.equals||!e.equals(t))}function X(e,t){if(e===t)return!0;if(!a(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||i(e)!==i(t)||s(e)!==s(t)||u(e)!==u(t))return!1;if(0===e.size&&0===t.size)return!0;var n=!c(e);if(u(e)){var r=e.entries();return t.every(function(e,t){var o=r.next().value;return o&&Z(o[1],e)&&(n||Z(o[0],t))})&&r.next().done}var o=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{o=!0;var l=e;e=t,t=l}var f=!0,p=t.__iterate(function(t,r){if(n?!e.has(t):o?!Z(t,e.get(r,vn)):!Z(e.get(r,vn),t))return f=!1,!1});return f&&e.size===p}function J(e,t){if(!(this instanceof J))return new J(e,t);if(this._value=e,this.size=void 0===t?1/0:Math.max(0,t),0===this.size){if(xn)return xn;xn=this}}function Q(e,t){if(!e)throw new Error(t)}function $(e,t,n){if(!(this instanceof $))return new $(e,t,n);if(Q(0!==n,"Cannot step a Range by 0"),e=e||0,void 0===t&&(t=1/0),n=void 0===n?1:Math.abs(n),t<e&&(n=-n),this._start=e,this._end=t,this._step=n,this.size=Math.max(0,Math.ceil((t-e)/n-1)+1),0===this.size){if(Tn)return Tn;Tn=this}}function ee(){throw TypeError("Abstract")}function te(){}function ne(){}function re(){}function oe(e){return e>>>1&1073741824|3221225471&e}function ae(e){if(!1===e||null===e||void 0===e)return 0;if("function"==typeof e.valueOf&&(!1===(e=e.valueOf())||null===e||void 0===e))return 0;if(!0===e)return 1;var t=typeof e;if("number"===t){if(e!==e||e===1/0)return 0;var n=0|e;for(n!==e&&(n^=4294967295*e);e>4294967295;)e/=4294967295,n^=e;return oe(n)}if("string"===t)return e.length>Dn?ie(e):se(e);if("function"==typeof e.hashCode)return e.hashCode();if("object"===t)return ce(e);if("function"==typeof e.toString)return se(e.toString());throw new Error("Value type "+t+" cannot be hashed.")}function ie(e){var t=Un[e];return void 0===t&&(t=se(e),Fn===Ln&&(Fn=0,Un={}),Fn++,Un[e]=t),t}function se(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)|0;return oe(t)}function ce(e){var t;if(Mn&&void 0!==(t=jn.get(e)))return t;if(void 0!==(t=e[Rn]))return t;if(!In){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[Rn]))return t;if(void 0!==(t=ue(e)))return t}if(t=++Nn,1073741824&Nn&&(Nn=0),Mn)jn.set(e,t);else{if(void 0!==An&&!1===An(e))throw new Error("Non-extensible objects are not allowed as keys.");if(In)Object.defineProperty(e,Rn,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[Rn]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[Rn]=t}}return t}function ue(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}function le(e){Q(e!==1/0,"Cannot perform this action with an infinite size.")}function fe(e){return null===e||void 0===e?Ee():pe(e)&&!u(e)?e:Ee().withMutations(function(t){var r=n(e);le(r.size),r.forEach(function(e,n){return t.set(n,e)})})}function pe(e){return!(!e||!e[Bn])}function de(e,t){this.ownerID=e,this.entries=t}function he(e,t,n){this.ownerID=e,this.bitmap=t,this.nodes=n}function me(e,t,n){this.ownerID=e,this.count=t,this.nodes=n}function ve(e,t,n){this.ownerID=e,this.keyHash=t,this.entries=n}function ye(e,t,n){this.ownerID=e,this.keyHash=t,this.entry=n}function ge(e,t,n){this._type=t,this._reverse=n,this._stack=e._root&&we(e._root)}function be(e,t){return E(e,t[0],t[1])}function we(e,t){return{node:e,index:0,__prev:t}}function _e(e,t,n,r){var o=Object.create(zn);return o.size=e,o._root=t,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function Ee(){return Kn||(Kn=_e(0))}function Oe(e,t,n){var r,o;if(e._root){var a=l(yn),i=l(gn);if(r=Ce(e._root,e.__ownerID,0,void 0,t,n,a,i),!i.value)return e;o=e.size+(a.value?n===vn?-1:1:0)}else{if(n===vn)return e;o=1,r=new de(e.__ownerID,[[t,n]])}return e.__ownerID?(e.size=o,e._root=r,e.__hash=void 0,e.__altered=!0,e):r?_e(o,r):Ee()}function Ce(e,t,n,r,o,a,i,s){return e?e.update(t,n,r,o,a,i,s):a===vn?e:(f(s),f(i),new ye(t,r,[o,a]))}function ke(e){return e.constructor===ye||e.constructor===ve}function Se(e,t,n,r,o){if(e.keyHash===r)return new ve(t,r,[e.entry,o]);var a,i=(0===n?e.keyHash:e.keyHash>>>n)&mn,s=(0===n?r:r>>>n)&mn;return new he(t,1<<i|1<<s,i===s?[Se(e,t,n+dn,r,o)]:(a=new ye(t,r,o),i<s?[e,a]:[a,e]))}function xe(e,t,n,r){e||(e=new p);for(var o=new ye(e,ae(n),[n,r]),a=0;a<t.length;a++){var i=t[a];o=o.update(e,0,void 0,i[0],i[1])}return o}function Te(e,t,n,r){for(var o=0,a=0,i=new Array(n),s=0,c=1,u=t.length;s<u;s++,c<<=1){var l=t[s];void 0!==l&&s!==r&&(o|=c,i[a++]=l)}return new he(e,o,i)}function je(e,t,n,r,o){for(var a=0,i=new Array(hn),s=0;0!==n;s++,n>>>=1)i[s]=1&n?t[a++]:void 0;return i[r]=o,new me(e,a+1,i)}function Pe(e,t,r){for(var o=[],i=0;i<r.length;i++){var s=r[i],c=n(s);a(s)||(c=c.map(function(e){return V(e)})),o.push(c)}return Me(e,t,o)}function Ae(e,t,n){return e&&e.mergeDeep&&a(t)?e.mergeDeep(t):Z(e,t)?e:t}function Ie(e){return function(t,n,r){if(t&&t.mergeDeepWith&&a(n))return t.mergeDeepWith(e,n);var o=e(t,n,r);return Z(t,o)?t:o}}function Me(e,t,n){return n=n.filter(function(e){return 0!==e.size}),0===n.length?e:0!==e.size||e.__ownerID||1!==n.length?e.withMutations(function(e){for(var r=t?function(n,r){e.update(r,vn,function(e){return e===vn?n:t(e,n,r)})}:function(t,n){e.set(n,t)},o=0;o<n.length;o++)n[o].forEach(r)}):e.constructor(n[0])}function Ne(e,t,n,r){var o=e===vn,a=t.next();if(a.done){var i=o?n:e,s=r(i);return s===i?e:s}Q(o||e&&e.set,"invalid keyPath");var c=a.value,u=o?vn:e.get(c,vn),l=Ne(u,t,n,r);return l===u?e:l===vn?e.remove(c):(o?Ee():e).set(c,l)}function Re(e){return e-=e>>1&1431655765,e=(858993459&e)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,127&(e+=e>>16)}function De(e,t,n,r){var o=r?e:d(e);return o[t]=n,o}function Le(e,t,n,r){var o=e.length+1;if(r&&t+1===o)return e[t]=n,e;for(var a=new Array(o),i=0,s=0;s<o;s++)s===t?(a[s]=n,i=-1):a[s]=e[s+i];return a}function Fe(e,t,n){var r=e.length-1;if(n&&t===r)return e.pop(),e;for(var o=new Array(r),a=0,i=0;i<r;i++)i===t&&(a=1),o[i]=e[i+a];return o}function Ue(e){var t=He();if(null===e||void 0===e)return t;if(Be(e))return e;var n=r(e),o=n.size;return 0===o?t:(le(o),o>0&&o<hn?qe(0,o,dn,null,new ze(n.toArray())):t.withMutations(function(e){e.setSize(o),n.forEach(function(t,n){return e.set(n,t)})}))}function Be(e){return!(!e||!e[Wn])}function ze(e,t){this.array=e,this.ownerID=t}function Ke(e,t){function n(e,t,n){return 0===t?r(e,n):o(e,t,n)}function r(e,n){var r=n===s?c&&c.array:e&&e.array,o=n>a?0:a-n,u=i-n;return u>hn&&(u=hn),function(){if(o===u)return Zn;var e=t?--u:o++;return r&&r[e]}}function o(e,r,o){var s,c=e&&e.array,u=o>a?0:a-o>>r,l=1+(i-o>>r);return l>hn&&(l=hn),function(){for(;;){if(s){var e=s();if(e!==Zn)return e;s=null}if(u===l)return Zn;var a=t?--l:u++;s=n(c&&c[a],r-dn,o+(a<<r))}}}var a=e._origin,i=e._capacity,s=Je(i),c=e._tail;return n(e._root,e._level,0)}function qe(e,t,n,r,o,a,i){var s=Object.create(Gn);return s.size=t-e,s._origin=e,s._capacity=t,s._level=n,s._root=r,s._tail=o,s.__ownerID=a,s.__hash=i,s.__altered=!1,s}function He(){return Yn||(Yn=qe(0,0,dn))}function Ve(e,t,n){if((t=m(e,t))!==t)return e;if(t>=e.size||t<0)return e.withMutations(function(e){t<0?Ze(e,t).set(0,n):Ze(e,0,t+1).set(t,n)});t+=e._origin;var r=e._tail,o=e._root,a=l(gn);return t>=Je(e._capacity)?r=We(r,e.__ownerID,0,t,n,a):o=We(o,e.__ownerID,e._level,t,n,a),a.value?e.__ownerID?(e._root=o,e._tail=r,e.__hash=void 0,e.__altered=!0,e):qe(e._origin,e._capacity,e._level,o,r):e}function We(e,t,n,r,o,a){var i=r>>>n&mn,s=e&&i<e.array.length;if(!s&&void 0===o)return e;var c;if(n>0){var u=e&&e.array[i],l=We(u,t,n-dn,r,o,a);return l===u?e:(c=Ge(e,t),c.array[i]=l,c)}return s&&e.array[i]===o?e:(f(a),c=Ge(e,t),void 0===o&&i===c.array.length-1?c.array.pop():c.array[i]=o,c)}function Ge(e,t){return t&&e&&t===e.ownerID?e:new ze(e?e.array.slice():[],t)}function Ye(e,t){if(t>=Je(e._capacity))return e._tail;if(t<1<<e._level+dn){for(var n=e._root,r=e._level;n&&r>0;)n=n.array[t>>>r&mn],r-=dn;return n}}function Ze(e,t,n){void 0!==t&&(t|=0),void 0!==n&&(n|=0);var r=e.__ownerID||new p,o=e._origin,a=e._capacity,i=o+t,s=void 0===n?a:n<0?a+n:o+n;if(i===o&&s===a)return e;if(i>=s)return e.clear();for(var c=e._level,u=e._root,l=0;i+l<0;)u=new ze(u&&u.array.length?[void 0,u]:[],r),c+=dn,l+=1<<c;l&&(i+=l,o+=l,s+=l,a+=l);for(var f=Je(a),d=Je(s);d>=1<<c+dn;)u=new ze(u&&u.array.length?[u]:[],r),c+=dn;var h=e._tail,m=d<f?Ye(e,s-1):d>f?new ze([],r):h;if(h&&d>f&&i<a&&h.array.length){u=Ge(u,r);for(var v=u,y=c;y>dn;y-=dn){var g=f>>>y&mn;v=v.array[g]=Ge(v.array[g],r)}v.array[f>>>dn&mn]=h}if(s<a&&(m=m&&m.removeAfter(r,0,s)),i>=d)i-=d,s-=d,c=dn,u=null,m=m&&m.removeBefore(r,0,i);else if(i>o||d<f){for(l=0;u;){var b=i>>>c&mn;if(b!==d>>>c&mn)break;b&&(l+=(1<<c)*b),c-=dn,u=u.array[b]}u&&i>o&&(u=u.removeBefore(r,c,i-l)),u&&d<f&&(u=u.removeAfter(r,c,d-l)),l&&(i-=l,s-=l)}return e.__ownerID?(e.size=s-i,e._origin=i,e._capacity=s,e._level=c,e._root=u,e._tail=m,e.__hash=void 0,e.__altered=!0,e):qe(i,s,c,u,m)}function Xe(e,t,n){for(var o=[],i=0,s=0;s<n.length;s++){var c=n[s],u=r(c);u.size>i&&(i=u.size),a(c)||(u=u.map(function(e){return V(e)})),o.push(u)}return i>e.size&&(e=e.setSize(i)),Me(e,t,o)}function Je(e){return e<hn?0:e-1>>>dn<<dn}function Qe(e){return null===e||void 0===e?tt():$e(e)?e:tt().withMutations(function(t){var r=n(e);le(r.size),r.forEach(function(e,n){return t.set(n,e)})})}function $e(e){return pe(e)&&u(e)}function et(e,t,n,r){var o=Object.create(Qe.prototype);return o.size=e?e.size:0,o._map=e,o._list=t,o.__ownerID=n,o.__hash=r,o}function tt(){return Xn||(Xn=et(Ee(),He()))}function nt(e,t,n){var r,o,a=e._map,i=e._list,s=a.get(t),c=void 0!==s;if(n===vn){if(!c)return e;i.size>=hn&&i.size>=2*a.size?(o=i.filter(function(e,t){return void 0!==e&&s!==t}),r=o.toKeyedSeq().map(function(e){return e[0]}).flip().toMap(),e.__ownerID&&(r.__ownerID=o.__ownerID=e.__ownerID)):(r=a.remove(t),o=s===i.size-1?i.pop():i.set(s,void 0))}else if(c){if(n===i.get(s)[1])return e;r=a,o=i.set(s,[t,n])}else r=a.set(t,i.size),o=i.set(i.size,[t,n]);return e.__ownerID?(e.size=r.size,e._map=r,e._list=o,e.__hash=void 0,e):et(r,o)}function rt(e,t){this._iter=e,this._useKeys=t,this.size=e.size}function ot(e){this._iter=e,this.size=e.size}function at(e){this._iter=e,this.size=e.size}function it(e){this._iter=e,this.size=e.size}function st(e){var t=Tt(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=jt,t.__iterateUncached=function(t,n){var r=this;return e.__iterate(function(e,n){return!1!==t(n,e,r)},n)},t.__iteratorUncached=function(t,n){if(t===_n){var r=e.__iterator(t,n);return new _(function(){var e=r.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e})}return e.__iterator(t===wn?bn:wn,n)},t}function ct(e,t,n){var r=Tt(e);return r.size=e.size,r.has=function(t){return e.has(t)},r.get=function(r,o){var a=e.get(r,vn);return a===vn?o:t.call(n,a,r,e)},r.__iterateUncached=function(r,o){var a=this;return e.__iterate(function(e,o,i){return!1!==r(t.call(n,e,o,i),o,a)},o)},r.__iteratorUncached=function(r,o){var a=e.__iterator(_n,o);return new _(function(){var o=a.next();if(o.done)return o;var i=o.value,s=i[0];return E(r,s,t.call(n,i[1],s,e),o)})},r}function ut(e,t){var n=Tt(e);return n._iter=e,n.size=e.size,n.reverse=function(){return e},e.flip&&(n.flip=function(){var t=st(e);return t.reverse=function(){return e.flip()},t}),n.get=function(n,r){return e.get(t?n:-1-n,r)},n.has=function(n){return e.has(t?n:-1-n)},n.includes=function(t){return e.includes(t)},n.cacheResult=jt,n.__iterate=function(t,n){var r=this;return e.__iterate(function(e,n){return t(e,n,r)},!n)},n.__iterator=function(t,n){return e.__iterator(t,!n)},n}function lt(e,t,n,r){var o=Tt(e);return r&&(o.has=function(r){var o=e.get(r,vn);return o!==vn&&!!t.call(n,o,r,e)},o.get=function(r,o){var a=e.get(r,vn);return a!==vn&&t.call(n,a,r,e)?a:o}),o.__iterateUncached=function(o,a){var i=this,s=0;return e.__iterate(function(e,a,c){if(t.call(n,e,a,c))return s++,o(e,r?a:s-1,i)},a),s},o.__iteratorUncached=function(o,a){var i=e.__iterator(_n,a),s=0;return new _(function(){for(;;){var a=i.next();if(a.done)return a;var c=a.value,u=c[0],l=c[1];if(t.call(n,l,u,e))return E(o,r?u:s++,l,a)}})},o}function ft(e,t,n){var r=fe().asMutable();return e.__iterate(function(o,a){r.update(t.call(n,o,a,e),0,function(e){return e+1})}),r.asImmutable()}function pt(e,t,n){var r=i(e),o=(u(e)?Qe():fe()).asMutable();e.__iterate(function(a,i){o.update(t.call(n,a,i,e),function(e){return e=e||[],e.push(r?[i,a]:a),e})});var a=xt(e);return o.map(function(t){return Ct(e,a(t))})}function dt(e,t,n,r){var o=e.size;if(void 0!==t&&(t|=0),void 0!==n&&(n===1/0?n=o:n|=0),y(t,n,o))return e;var a=g(t,o),i=b(n,o);if(a!==a||i!==i)return dt(e.toSeq().cacheResult(),t,n,r);var s,c=i-a;c===c&&(s=c<0?0:c);var u=Tt(e);return u.size=0===s?s:e.size&&s||void 0,!r&&L(e)&&s>=0&&(u.get=function(t,n){return t=m(this,t),t>=0&&t<s?e.get(t+a,n):n}),u.__iterateUncached=function(t,n){var o=this;if(0===s)return 0;if(n)return this.cacheResult().__iterate(t,n);var i=0,c=!0,u=0;return e.__iterate(function(e,n){if(!c||!(c=i++<a))return u++,!1!==t(e,r?n:u-1,o)&&u!==s}),u},u.__iteratorUncached=function(t,n){if(0!==s&&n)return this.cacheResult().__iterator(t,n);var o=0!==s&&e.__iterator(t,n),i=0,c=0;return new _(function(){for(;i++<a;)o.next();if(++c>s)return O();var e=o.next();return r||t===wn?e:t===bn?E(t,c-1,void 0,e):E(t,c-1,e.value[1],e)})},u}function ht(e,t,n){var r=Tt(e);return r.__iterateUncached=function(r,o){var a=this;if(o)return this.cacheResult().__iterate(r,o);var i=0;return e.__iterate(function(e,o,s){return t.call(n,e,o,s)&&++i&&r(e,o,a)}),i},r.__iteratorUncached=function(r,o){var a=this;if(o)return this.cacheResult().__iterator(r,o);var i=e.__iterator(_n,o),s=!0;return new _(function(){if(!s)return O();var e=i.next();if(e.done)return e;var o=e.value,c=o[0],u=o[1];return t.call(n,u,c,a)?r===_n?e:E(r,c,u,e):(s=!1,O())})},r}function mt(e,t,n,r){var o=Tt(e);return o.__iterateUncached=function(o,a){var i=this;if(a)return this.cacheResult().__iterate(o,a);var s=!0,c=0;return e.__iterate(function(e,a,u){if(!s||!(s=t.call(n,e,a,u)))return c++,o(e,r?a:c-1,i)}),c},o.__iteratorUncached=function(o,a){var i=this;if(a)return this.cacheResult().__iterator(o,a);var s=e.__iterator(_n,a),c=!0,u=0;return new _(function(){var e,a,l;do{if(e=s.next(),e.done)return r||o===wn?e:o===bn?E(o,u++,void 0,e):E(o,u++,e.value[1],e);var f=e.value;a=f[0],l=f[1],c&&(c=t.call(n,l,a,i))}while(c);return o===_n?e:E(o,a,l,e)})},o}function vt(e,t){var r=i(e),o=[e].concat(t).map(function(e){return a(e)?r&&(e=n(e)):e=r?U(e):B(Array.isArray(e)?e:[e]),e}).filter(function(e){return 0!==e.size});if(0===o.length)return e;if(1===o.length){var c=o[0];if(c===e||r&&i(c)||s(e)&&s(c))return c}var u=new M(o);return r?u=u.toKeyedSeq():s(e)||(u=u.toSetSeq()),u=u.flatten(!0),u.size=o.reduce(function(e,t){if(void 0!==e){var n=t.size;if(void 0!==n)return e+n}},0),u}function yt(e,t,n){var r=Tt(e);return r.__iterateUncached=function(r,o){function i(e,u){var l=this;e.__iterate(function(e,o){return(!t||u<t)&&a(e)?i(e,u+1):!1===r(e,n?o:s++,l)&&(c=!0),!c},o)}var s=0,c=!1;return i(e,0),s},r.__iteratorUncached=function(r,o){var i=e.__iterator(r,o),s=[],c=0;return new _(function(){for(;i;){var e=i.next();if(!1===e.done){var u=e.value;if(r===_n&&(u=u[1]),t&&!(s.length<t)||!a(u))return n?e:E(r,c++,u,e);s.push(i),i=u.__iterator(r,o)}else i=s.pop()}return O()})},r}function gt(e,t,n){var r=xt(e);return e.toSeq().map(function(o,a){return r(t.call(n,o,a,e))}).flatten(!0)}function bt(e,t){var n=Tt(e);return n.size=e.size&&2*e.size-1,n.__iterateUncached=function(n,r){var o=this,a=0;return e.__iterate(function(e,r){return(!a||!1!==n(t,a++,o))&&!1!==n(e,a++,o)},r),a},n.__iteratorUncached=function(n,r){var o,a=e.__iterator(wn,r),i=0;return new _(function(){return(!o||i%2)&&(o=a.next(),o.done)?o:i%2?E(n,i++,t):E(n,i++,o.value,o)})},n}function wt(e,t,n){t||(t=Pt);var r=i(e),o=0,a=e.toSeq().map(function(t,r){return[r,t,o++,n?n(t,r,e):t]}).toArray();return a.sort(function(e,n){return t(e[3],n[3])||e[2]-n[2]}).forEach(r?function(e,t){a[t].length=2}:function(e,t){a[t]=e[1]}),r?P(a):s(e)?A(a):I(a)}function _t(e,t,n){if(t||(t=Pt),n){var r=e.toSeq().map(function(t,r){return[t,n(t,r,e)]}).reduce(function(e,n){return Et(t,e[1],n[1])?n:e});return r&&r[0]}return e.reduce(function(e,n){return Et(t,e,n)?n:e})}function Et(e,t,n){var r=e(n,t);return 0===r&&n!==t&&(void 0===n||null===n||n!==n)||r>0}function Ot(e,n,r){var o=Tt(e);return o.size=new M(r).map(function(e){return e.size}).min(),o.__iterate=function(e,t){for(var n,r=this.__iterator(wn,t),o=0;!(n=r.next()).done&&!1!==e(n.value,o++,this););return o},o.__iteratorUncached=function(e,o){var a=r.map(function(e){return e=t(e),S(o?e.reverse():e)}),i=0,s=!1;return new _(function(){var t;return s||(t=a.map(function(e){return e.next()}),s=t.some(function(e){return e.done})),s?O():E(e,i++,n.apply(null,t.map(function(e){return e.value})))})},o}function Ct(e,t){return L(e)?t:e.constructor(t)}function kt(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function St(e){return le(e.size),h(e)}function xt(e){return i(e)?n:s(e)?r:o}function Tt(e){return Object.create((i(e)?P:s(e)?A:I).prototype)}function jt(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):j.prototype.cacheResult.call(this)}function Pt(e,t){return e>t?1:e<t?-1:0}function At(e){var n=S(e);if(!n){if(!T(e))throw new TypeError("Expected iterable or array-like: "+e);n=S(t(e))}return n}function It(e,t){var n,r=function(a){if(a instanceof r)return a;if(!(this instanceof r))return new r(a);if(!n){n=!0;var i=Object.keys(e);Rt(o,i),o.size=i.length,o._name=t,o._keys=i,o._defaultValues=e}this._map=fe(a)},o=r.prototype=Object.create(Jn);return o.constructor=r,r}function Mt(e,t,n){var r=Object.create(Object.getPrototypeOf(e));return r._map=t,r.__ownerID=n,r}function Nt(e){return e._name||e.constructor.name||"Record"}function Rt(e,t){try{t.forEach(Dt.bind(void 0,e))}catch(e){}}function Dt(e,t){Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){Q(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}function Lt(e){return null===e||void 0===e?zt():Ft(e)&&!u(e)?e:zt().withMutations(function(t){var n=o(e);le(n.size),n.forEach(function(e){return t.add(e)})})}function Ft(e){return!(!e||!e[Qn])}function Ut(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function Bt(e,t){var n=Object.create($n);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function zt(){return er||(er=Bt(Ee()))}function Kt(e){return null===e||void 0===e?Vt():qt(e)?e:Vt().withMutations(function(t){var n=o(e);le(n.size),n.forEach(function(e){return t.add(e)})})}function qt(e){return Ft(e)&&u(e)}function Ht(e,t){var n=Object.create(tr);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function Vt(){return nr||(nr=Ht(tt()))}function Wt(e){return null===e||void 0===e?Zt():Gt(e)?e:Zt().unshiftAll(e)}function Gt(e){return!(!e||!e[rr])}function Yt(e,t,n,r){var o=Object.create(or);return o.size=e,o._head=t,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function Zt(){return ar||(ar=Yt(0))}function Xt(e,t){var n=function(n){e.prototype[n]=t[n]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}function Jt(e,t){return t}function Qt(e,t){return[t,e]}function $t(e){return function(){return!e.apply(this,arguments)}}function en(e){return function(){return-e.apply(this,arguments)}}function tn(e){return"string"==typeof e?JSON.stringify(e):String(e)}function nn(){return d(arguments)}function rn(e,t){return e<t?1:e>t?-1:0}function on(e){if(e.size===1/0)return 0;var t=u(e),n=i(e),r=t?1:0;return an(e.__iterate(n?t?function(e,t){r=31*r+sn(ae(e),ae(t))|0}:function(e,t){r=r+sn(ae(e),ae(t))|0}:t?function(e){r=31*r+ae(e)|0}:function(e){r=r+ae(e)|0}),r)}function an(e,t){return t=Pn(t,3432918353),t=Pn(t<<15|t>>>-15,461845907),t=Pn(t<<13|t>>>-13,5),t=(t+3864292196|0)^e,t=Pn(t^t>>>16,2246822507),t=Pn(t^t>>>13,3266489909),t=oe(t^t>>>16)}function sn(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}var cn=Array.prototype.slice;e(n,t),e(r,t),e(o,t),t.isIterable=a,t.isKeyed=i,t.isIndexed=s,t.isAssociative=c,t.isOrdered=u,t.Keyed=n,t.Indexed=r,t.Set=o;var un="@@__IMMUTABLE_ITERABLE__@@",ln="@@__IMMUTABLE_KEYED__@@",fn="@@__IMMUTABLE_INDEXED__@@",pn="@@__IMMUTABLE_ORDERED__@@",dn=5,hn=1<<dn,mn=hn-1,vn={},yn={value:!1},gn={value:!1},bn=0,wn=1,_n=2,En="function"==typeof Symbol&&Symbol.iterator,On="@@iterator",Cn=En||On;_.prototype.toString=function(){return"[Iterator]"},_.KEYS=bn,_.VALUES=wn,_.ENTRIES=_n,_.prototype.inspect=_.prototype.toSource=function(){return this.toString()},_.prototype[Cn]=function(){return this},e(j,t),j.of=function(){return j(arguments)},j.prototype.toSeq=function(){return this},j.prototype.toString=function(){return this.__toString("Seq {","}")},j.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},j.prototype.__iterate=function(e,t){return q(this,e,t,!0)},j.prototype.__iterator=function(e,t){return H(this,e,t,!0)},e(P,j),P.prototype.toKeyedSeq=function(){return this},e(A,j),A.of=function(){return A(arguments)},A.prototype.toIndexedSeq=function(){return this},A.prototype.toString=function(){return this.__toString("Seq [","]")},A.prototype.__iterate=function(e,t){return q(this,e,t,!1)},A.prototype.__iterator=function(e,t){return H(this,e,t,!1)},e(I,j),I.of=function(){return I(arguments)},I.prototype.toSetSeq=function(){return this},j.isSeq=L,j.Keyed=P,j.Set=I,j.Indexed=A;var kn="@@__IMMUTABLE_SEQ__@@";j.prototype[kn]=!0,e(M,A),M.prototype.get=function(e,t){return this.has(e)?this._array[m(this,e)]:t},M.prototype.__iterate=function(e,t){for(var n=this._array,r=n.length-1,o=0;o<=r;o++)if(!1===e(n[t?r-o:o],o,this))return o+1;return o},M.prototype.__iterator=function(e,t){var n=this._array,r=n.length-1,o=0;return new _(function(){return o>r?O():E(e,o,n[t?r-o++:o++])})},e(N,P),N.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},N.prototype.has=function(e){return this._object.hasOwnProperty(e)},N.prototype.__iterate=function(e,t){for(var n=this._object,r=this._keys,o=r.length-1,a=0;a<=o;a++){var i=r[t?o-a:a];if(!1===e(n[i],i,this))return a+1}return a},N.prototype.__iterator=function(e,t){var n=this._object,r=this._keys,o=r.length-1,a=0;return new _(function(){var i=r[t?o-a:a];return a++>o?O():E(e,i,n[i])})},N.prototype[pn]=!0,e(R,A),R.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var n=this._iterable,r=S(n),o=0;if(k(r))for(var a;!(a=r.next()).done&&!1!==e(a.value,o++,this););return o},R.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterable,r=S(n);if(!k(r))return new _(O);var o=0;return new _(function(){var t=r.next();return t.done?t:E(e,o++,t.value)})},e(D,A),D.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);for(var n=this._iterator,r=this._iteratorCache,o=0;o<r.length;)if(!1===e(r[o],o++,this))return o;for(var a;!(a=n.next()).done;){var i=a.value;if(r[o]=i,!1===e(i,o++,this))break}return o},D.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterator,r=this._iteratorCache,o=0;return new _(function(){if(o>=r.length){var t=n.next();if(t.done)return t;r[o]=t.value}return E(e,o,r[o++])})};var Sn;e(J,A),J.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},J.prototype.get=function(e,t){return this.has(e)?this._value:t},J.prototype.includes=function(e){return Z(this._value,e)},J.prototype.slice=function(e,t){var n=this.size;return y(e,t,n)?this:new J(this._value,b(t,n)-g(e,n))},J.prototype.reverse=function(){return this},J.prototype.indexOf=function(e){return Z(this._value,e)?0:-1},J.prototype.lastIndexOf=function(e){return Z(this._value,e)?this.size:-1},J.prototype.__iterate=function(e,t){for(var n=0;n<this.size;n++)if(!1===e(this._value,n,this))return n+1;return n},J.prototype.__iterator=function(e,t){var n=this,r=0;return new _(function(){return r<n.size?E(e,r++,n._value):O()})},J.prototype.equals=function(e){return e instanceof J?Z(this._value,e._value):X(e)};var xn;e($,A),$.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},$.prototype.get=function(e,t){return this.has(e)?this._start+m(this,e)*this._step:t},$.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},$.prototype.slice=function(e,t){return y(e,t,this.size)?this:(e=g(e,this.size),t=b(t,this.size),t<=e?new $(0,0):new $(this.get(e,this._end),this.get(t,this._end),this._step))},$.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step==0){var n=t/this._step;if(n>=0&&n<this.size)return n}return-1},$.prototype.lastIndexOf=function(e){return this.indexOf(e)},$.prototype.__iterate=function(e,t){for(var n=this.size-1,r=this._step,o=t?this._start+n*r:this._start,a=0;a<=n;a++){if(!1===e(o,a,this))return a+1;o+=t?-r:r}return a},$.prototype.__iterator=function(e,t){var n=this.size-1,r=this._step,o=t?this._start+n*r:this._start,a=0;return new _(function(){var i=o;return o+=t?-r:r,a>n?O():E(e,a++,i)})},$.prototype.equals=function(e){return e instanceof $?this._start===e._start&&this._end===e._end&&this._step===e._step:X(this,e)};var Tn;e(ee,t),e(te,ee),e(ne,ee),e(re,ee),ee.Keyed=te,ee.Indexed=ne,ee.Set=re;var jn,Pn="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){e|=0,t|=0;var n=65535&e,r=65535&t;return n*r+((e>>>16)*r+n*(t>>>16)<<16>>>0)|0},An=Object.isExtensible,In=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}(),Mn="function"==typeof WeakMap;Mn&&(jn=new WeakMap);var Nn=0,Rn="__immutablehash__";"function"==typeof Symbol&&(Rn=Symbol(Rn));var Dn=16,Ln=255,Fn=0,Un={};e(fe,te),fe.of=function(){var e=cn.call(arguments,0);return Ee().withMutations(function(t){for(var n=0;n<e.length;n+=2){if(n+1>=e.length)throw new Error("Missing value for key: "+e[n]);t.set(e[n],e[n+1])}})},fe.prototype.toString=function(){return this.__toString("Map {","}")},fe.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},fe.prototype.set=function(e,t){return Oe(this,e,t)},fe.prototype.setIn=function(e,t){return this.updateIn(e,vn,function(){return t})},fe.prototype.remove=function(e){return Oe(this,e,vn)},fe.prototype.deleteIn=function(e){return this.updateIn(e,function(){return vn})},fe.prototype.update=function(e,t,n){return 1===arguments.length?e(this):this.updateIn([e],t,n)},fe.prototype.updateIn=function(e,t,n){n||(n=t,t=void 0);var r=Ne(this,At(e),t,n);return r===vn?void 0:r},fe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Ee()},fe.prototype.merge=function(){return Pe(this,void 0,arguments)},fe.prototype.mergeWith=function(e){return Pe(this,e,cn.call(arguments,1))},fe.prototype.mergeIn=function(e){var t=cn.call(arguments,1);return this.updateIn(e,Ee(),function(e){return"function"==typeof e.merge?e.merge.apply(e,t):t[t.length-1]})},fe.prototype.mergeDeep=function(){return Pe(this,Ae,arguments)},fe.prototype.mergeDeepWith=function(e){var t=cn.call(arguments,1);return Pe(this,Ie(e),t)},fe.prototype.mergeDeepIn=function(e){var t=cn.call(arguments,1);return this.updateIn(e,Ee(),function(e){return"function"==typeof e.mergeDeep?e.mergeDeep.apply(e,t):t[t.length-1]})},fe.prototype.sort=function(e){return Qe(wt(this,e))},fe.prototype.sortBy=function(e,t){return Qe(wt(this,t,e))},fe.prototype.withMutations=function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this},fe.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new p)},fe.prototype.asImmutable=function(){return this.__ensureOwner()},fe.prototype.wasAltered=function(){return this.__altered},fe.prototype.__iterator=function(e,t){return new ge(this,e,t)},fe.prototype.__iterate=function(e,t){var n=this,r=0;return this._root&&this._root.iterate(function(t){return r++,e(t[1],t[0],n)},t),r},fe.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?_e(this.size,this._root,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},fe.isMap=pe;var Bn="@@__IMMUTABLE_MAP__@@",zn=fe.prototype;zn[Bn]=!0,zn.delete=zn.remove,zn.removeIn=zn.deleteIn,de.prototype.get=function(e,t,n,r){for(var o=this.entries,a=0,i=o.length;a<i;a++)if(Z(n,o[a][0]))return o[a][1];return r},de.prototype.update=function(e,t,n,r,o,a,i){for(var s=o===vn,c=this.entries,u=0,l=c.length;u<l&&!Z(r,c[u][0]);u++);var p=u<l;if(p?c[u][1]===o:s)return this;if(f(i),(s||!p)&&f(a),!s||1!==c.length){if(!p&&!s&&c.length>=qn)return xe(e,c,r,o);var h=e&&e===this.ownerID,m=h?c:d(c);return p?s?u===l-1?m.pop():m[u]=m.pop():m[u]=[r,o]:m.push([r,o]),h?(this.entries=m,this):new de(e,m)}},he.prototype.get=function(e,t,n,r){void 0===t&&(t=ae(n));var o=1<<((0===e?t:t>>>e)&mn),a=this.bitmap;return 0==(a&o)?r:this.nodes[Re(a&o-1)].get(e+dn,t,n,r)},he.prototype.update=function(e,t,n,r,o,a,i){void 0===n&&(n=ae(r));var s=(0===t?n:n>>>t)&mn,c=1<<s,u=this.bitmap,l=0!=(u&c);if(!l&&o===vn)return this;var f=Re(u&c-1),p=this.nodes,d=l?p[f]:void 0,h=Ce(d,e,t+dn,n,r,o,a,i);if(h===d)return this;if(!l&&h&&p.length>=Hn)return je(e,p,u,s,h);if(l&&!h&&2===p.length&&ke(p[1^f]))return p[1^f];if(l&&h&&1===p.length&&ke(h))return h;var m=e&&e===this.ownerID,v=l?h?u:u^c:u|c,y=l?h?De(p,f,h,m):Fe(p,f,m):Le(p,f,h,m);return m?(this.bitmap=v,this.nodes=y,this):new he(e,v,y)},me.prototype.get=function(e,t,n,r){void 0===t&&(t=ae(n));var o=(0===e?t:t>>>e)&mn,a=this.nodes[o];return a?a.get(e+dn,t,n,r):r},me.prototype.update=function(e,t,n,r,o,a,i){void 0===n&&(n=ae(r));var s=(0===t?n:n>>>t)&mn,c=o===vn,u=this.nodes,l=u[s];if(c&&!l)return this;var f=Ce(l,e,t+dn,n,r,o,a,i);if(f===l)return this;var p=this.count;if(l){if(!f&&--p<Vn)return Te(e,u,p,s)}else p++;var d=e&&e===this.ownerID,h=De(u,s,f,d);return d?(this.count=p,this.nodes=h,this):new me(e,p,h)},ve.prototype.get=function(e,t,n,r){for(var o=this.entries,a=0,i=o.length;a<i;a++)if(Z(n,o[a][0]))return o[a][1];return r},ve.prototype.update=function(e,t,n,r,o,a,i){void 0===n&&(n=ae(r));var s=o===vn;if(n!==this.keyHash)return s?this:(f(i),f(a),Se(this,e,t,n,[r,o]));for(var c=this.entries,u=0,l=c.length;u<l&&!Z(r,c[u][0]);u++);var p=u<l;if(p?c[u][1]===o:s)return this;if(f(i),(s||!p)&&f(a),s&&2===l)return new ye(e,this.keyHash,c[1^u]);var h=e&&e===this.ownerID,m=h?c:d(c);return p?s?u===l-1?m.pop():m[u]=m.pop():m[u]=[r,o]:m.push([r,o]),h?(this.entries=m,this):new ve(e,this.keyHash,m)},ye.prototype.get=function(e,t,n,r){return Z(n,this.entry[0])?this.entry[1]:r},ye.prototype.update=function(e,t,n,r,o,a,i){var s=o===vn,c=Z(r,this.entry[0]);return(c?o===this.entry[1]:s)?this:(f(i),s?void f(a):c?e&&e===this.ownerID?(this.entry[1]=o,this):new ye(e,this.keyHash,[r,o]):(f(a),Se(this,e,t,ae(r),[r,o])))},de.prototype.iterate=ve.prototype.iterate=function(e,t){for(var n=this.entries,r=0,o=n.length-1;r<=o;r++)if(!1===e(n[t?o-r:r]))return!1},he.prototype.iterate=me.prototype.iterate=function(e,t){for(var n=this.nodes,r=0,o=n.length-1;r<=o;r++){var a=n[t?o-r:r];if(a&&!1===a.iterate(e,t))return!1}},ye.prototype.iterate=function(e,t){return e(this.entry)},e(ge,_),ge.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var n,r=t.node,o=t.index++;if(r.entry){if(0===o)return be(e,r.entry)}else if(r.entries){if(n=r.entries.length-1,o<=n)return be(e,r.entries[this._reverse?n-o:o])}else if(n=r.nodes.length-1,o<=n){var a=r.nodes[this._reverse?n-o:o];if(a){if(a.entry)return be(e,a.entry);t=this._stack=we(a,t)}continue}t=this._stack=this._stack.__prev}return O()};var Kn,qn=hn/4,Hn=hn/2,Vn=hn/4;e(Ue,ne),Ue.of=function(){return this(arguments)},Ue.prototype.toString=function(){return this.__toString("List [","]")},Ue.prototype.get=function(e,t){if((e=m(this,e))>=0&&e<this.size){e+=this._origin;var n=Ye(this,e);return n&&n.array[e&mn]}return t},Ue.prototype.set=function(e,t){return Ve(this,e,t)},Ue.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},Ue.prototype.insert=function(e,t){return this.splice(e,0,t)},Ue.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=dn,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):He()},Ue.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations(function(n){Ze(n,0,t+e.length);for(var r=0;r<e.length;r++)n.set(t+r,e[r])})},Ue.prototype.pop=function(){return Ze(this,0,-1)},Ue.prototype.unshift=function(){var e=arguments;return this.withMutations(function(t){Ze(t,-e.length);for(var n=0;n<e.length;n++)t.set(n,e[n])})},Ue.prototype.shift=function(){return Ze(this,1)},Ue.prototype.merge=function(){return Xe(this,void 0,arguments)},Ue.prototype.mergeWith=function(e){return Xe(this,e,cn.call(arguments,1))},Ue.prototype.mergeDeep=function(){return Xe(this,Ae,arguments)},Ue.prototype.mergeDeepWith=function(e){var t=cn.call(arguments,1);return Xe(this,Ie(e),t)},Ue.prototype.setSize=function(e){return Ze(this,0,e)},Ue.prototype.slice=function(e,t){var n=this.size;return y(e,t,n)?this:Ze(this,g(e,n),b(t,n))},Ue.prototype.__iterator=function(e,t){var n=0,r=Ke(this,t);return new _(function(){var t=r();return t===Zn?O():E(e,n++,t)})},Ue.prototype.__iterate=function(e,t){for(var n,r=0,o=Ke(this,t);(n=o())!==Zn&&!1!==e(n,r++,this););return r},Ue.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?qe(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):(this.__ownerID=e,this)},Ue.isList=Be;var Wn="@@__IMMUTABLE_LIST__@@",Gn=Ue.prototype;Gn[Wn]=!0,Gn.delete=Gn.remove,Gn.setIn=zn.setIn,Gn.deleteIn=Gn.removeIn=zn.removeIn,Gn.update=zn.update,Gn.updateIn=zn.updateIn,Gn.mergeIn=zn.mergeIn,Gn.mergeDeepIn=zn.mergeDeepIn,Gn.withMutations=zn.withMutations,Gn.asMutable=zn.asMutable,Gn.asImmutable=zn.asImmutable,Gn.wasAltered=zn.wasAltered,ze.prototype.removeBefore=function(e,t,n){if(n===t?1<<t:0===this.array.length)return this;var r=n>>>t&mn;if(r>=this.array.length)return new ze([],e);var o,a=0===r;if(t>0){var i=this.array[r];if((o=i&&i.removeBefore(e,t-dn,n))===i&&a)return this}if(a&&!o)return this;var s=Ge(this,e);if(!a)for(var c=0;c<r;c++)s.array[c]=void 0;return o&&(s.array[r]=o),s},ze.prototype.removeAfter=function(e,t,n){if(n===(t?1<<t:0)||0===this.array.length)return this;var r=n-1>>>t&mn;if(r>=this.array.length)return this;var o;if(t>0){var a=this.array[r];if((o=a&&a.removeAfter(e,t-dn,n))===a&&r===this.array.length-1)return this}var i=Ge(this,e);return i.array.splice(r+1),o&&(i.array[r]=o),i};var Yn,Zn={};e(Qe,fe),Qe.of=function(){return this(arguments)},Qe.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Qe.prototype.get=function(e,t){var n=this._map.get(e);return void 0!==n?this._list.get(n)[1]:t},Qe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):tt()},Qe.prototype.set=function(e,t){return nt(this,e,t)},Qe.prototype.remove=function(e){return nt(this,e,vn)},Qe.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Qe.prototype.__iterate=function(e,t){var n=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],n)},t)},Qe.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},Qe.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),n=this._list.__ensureOwner(e);return e?et(t,n,e,this.__hash):(this.__ownerID=e,this._map=t,this._list=n,this)},Qe.isOrderedMap=$e,Qe.prototype[pn]=!0,Qe.prototype.delete=Qe.prototype.remove;var Xn;e(rt,P),rt.prototype.get=function(e,t){return this._iter.get(e,t)},rt.prototype.has=function(e){return this._iter.has(e)},rt.prototype.valueSeq=function(){return this._iter.valueSeq()},rt.prototype.reverse=function(){var e=this,t=ut(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},rt.prototype.map=function(e,t){var n=this,r=ct(this,e,t);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(e,t)}),r},rt.prototype.__iterate=function(e,t){var n,r=this;return this._iter.__iterate(this._useKeys?function(t,n){return e(t,n,r)}:(n=t?St(this):0,function(o){return e(o,t?--n:n++,r)}),t)},rt.prototype.__iterator=function(e,t){if(this._useKeys)return this._iter.__iterator(e,t);var n=this._iter.__iterator(wn,t),r=t?St(this):0;return new _(function(){var o=n.next();return o.done?o:E(e,t?--r:r++,o.value,o)})},rt.prototype[pn]=!0,e(ot,A),ot.prototype.includes=function(e){return this._iter.includes(e)},ot.prototype.__iterate=function(e,t){var n=this,r=0;return this._iter.__iterate(function(t){return e(t,r++,n)},t)},ot.prototype.__iterator=function(e,t){var n=this._iter.__iterator(wn,t),r=0;return new _(function(){var t=n.next();return t.done?t:E(e,r++,t.value,t)})},e(at,I),at.prototype.has=function(e){return this._iter.includes(e)},at.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){return e(t,t,n)},t)},at.prototype.__iterator=function(e,t){var n=this._iter.__iterator(wn,t);return new _(function(){var t=n.next();return t.done?t:E(e,t.value,t.value,t)})},e(it,P),it.prototype.entrySeq=function(){return this._iter.toSeq()},it.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){if(t){kt(t);var r=a(t);return e(r?t.get(1):t[1],r?t.get(0):t[0],n)}},t)},it.prototype.__iterator=function(e,t){var n=this._iter.__iterator(wn,t);return new _(function(){for(;;){var t=n.next();if(t.done)return t;var r=t.value;if(r){kt(r);var o=a(r);return E(e,o?r.get(0):r[0],o?r.get(1):r[1],t)}}})},ot.prototype.cacheResult=rt.prototype.cacheResult=at.prototype.cacheResult=it.prototype.cacheResult=jt,e(It,te),It.prototype.toString=function(){return this.__toString(Nt(this)+" {","}")},It.prototype.has=function(e){return this._defaultValues.hasOwnProperty(e)},It.prototype.get=function(e,t){if(!this.has(e))return t;var n=this._defaultValues[e];return this._map?this._map.get(e,n):n},It.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var e=this.constructor;return e._empty||(e._empty=Mt(this,Ee()))},It.prototype.set=function(e,t){if(!this.has(e))throw new Error('Cannot set unknown key "'+e+'" on '+Nt(this));if(this._map&&!this._map.has(e)){if(t===this._defaultValues[e])return this}var n=this._map&&this._map.set(e,t);return this.__ownerID||n===this._map?this:Mt(this,n)},It.prototype.remove=function(e){if(!this.has(e))return this;var t=this._map&&this._map.remove(e);return this.__ownerID||t===this._map?this:Mt(this,t)},It.prototype.wasAltered=function(){return this._map.wasAltered()},It.prototype.__iterator=function(e,t){var r=this;return n(this._defaultValues).map(function(e,t){return r.get(t)}).__iterator(e,t)},It.prototype.__iterate=function(e,t){var r=this;return n(this._defaultValues).map(function(e,t){return r.get(t)}).__iterate(e,t)},It.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map&&this._map.__ensureOwner(e);return e?Mt(this,t,e):(this.__ownerID=e,this._map=t,this)};var Jn=It.prototype;Jn.delete=Jn.remove,Jn.deleteIn=Jn.removeIn=zn.removeIn,Jn.merge=zn.merge,Jn.mergeWith=zn.mergeWith,Jn.mergeIn=zn.mergeIn,Jn.mergeDeep=zn.mergeDeep,Jn.mergeDeepWith=zn.mergeDeepWith,Jn.mergeDeepIn=zn.mergeDeepIn,Jn.setIn=zn.setIn,Jn.update=zn.update,Jn.updateIn=zn.updateIn,Jn.withMutations=zn.withMutations,Jn.asMutable=zn.asMutable,Jn.asImmutable=zn.asImmutable,e(Lt,re),Lt.of=function(){return this(arguments)},Lt.fromKeys=function(e){return this(n(e).keySeq())},Lt.prototype.toString=function(){return this.__toString("Set {","}")},Lt.prototype.has=function(e){return this._map.has(e)},Lt.prototype.add=function(e){return Ut(this,this._map.set(e,!0))},Lt.prototype.remove=function(e){return Ut(this,this._map.remove(e))},Lt.prototype.clear=function(){return Ut(this,this._map.clear())},Lt.prototype.union=function(){var e=cn.call(arguments,0);return e=e.filter(function(e){return 0!==e.size}),0===e.length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations(function(t){for(var n=0;n<e.length;n++)o(e[n]).forEach(function(e){return t.add(e)})}):this.constructor(e[0])},Lt.prototype.intersect=function(){var e=cn.call(arguments,0);if(0===e.length)return this;e=e.map(function(e){return o(e)});var t=this;return this.withMutations(function(n){t.forEach(function(t){e.every(function(e){return e.includes(t)})||n.remove(t)})})},Lt.prototype.subtract=function(){var e=cn.call(arguments,0);if(0===e.length)return this;e=e.map(function(e){return o(e)});var t=this;return this.withMutations(function(n){t.forEach(function(t){e.some(function(e){return e.includes(t)})&&n.remove(t)})})},Lt.prototype.merge=function(){return this.union.apply(this,arguments)},Lt.prototype.mergeWith=function(e){var t=cn.call(arguments,1);return this.union.apply(this,t)},Lt.prototype.sort=function(e){return Kt(wt(this,e))},Lt.prototype.sortBy=function(e,t){return Kt(wt(this,t,e))},Lt.prototype.wasAltered=function(){return this._map.wasAltered()},Lt.prototype.__iterate=function(e,t){var n=this;return this._map.__iterate(function(t,r){return e(r,r,n)},t)},Lt.prototype.__iterator=function(e,t){return this._map.map(function(e,t){return t}).__iterator(e,t)},Lt.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):(this.__ownerID=e,this._map=t,this)},Lt.isSet=Ft;var Qn="@@__IMMUTABLE_SET__@@",$n=Lt.prototype;$n[Qn]=!0,$n.delete=$n.remove,$n.mergeDeep=$n.merge,$n.mergeDeepWith=$n.mergeWith,$n.withMutations=zn.withMutations,$n.asMutable=zn.asMutable,$n.asImmutable=zn.asImmutable,$n.__empty=zt,$n.__make=Bt;var er;e(Kt,Lt),Kt.of=function(){return this(arguments)},Kt.fromKeys=function(e){return this(n(e).keySeq())},Kt.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Kt.isOrderedSet=qt;var tr=Kt.prototype;tr[pn]=!0,tr.__empty=Vt,tr.__make=Ht;var nr;e(Wt,ne),Wt.of=function(){return this(arguments)},Wt.prototype.toString=function(){return this.__toString("Stack [","]")},Wt.prototype.get=function(e,t){var n=this._head;for(e=m(this,e);n&&e--;)n=n.next;return n?n.value:t},Wt.prototype.peek=function(){return this._head&&this._head.value},Wt.prototype.push=function(){if(0===arguments.length)return this;for(var e=this.size+arguments.length,t=this._head,n=arguments.length-1;n>=0;n--)t={value:arguments[n],next:t};return this.__ownerID?(this.size=e,this._head=t,this.__hash=void 0,this.__altered=!0,this):Yt(e,t)},Wt.prototype.pushAll=function(e){if(e=r(e),0===e.size)return this;le(e.size);var t=this.size,n=this._head;return e.reverse().forEach(function(e){t++,n={value:e,next:n}}),this.__ownerID?(this.size=t,this._head=n,this.__hash=void 0,this.__altered=!0,this):Yt(t,n)},Wt.prototype.pop=function(){return this.slice(1)},Wt.prototype.unshift=function(){return this.push.apply(this,arguments)},Wt.prototype.unshiftAll=function(e){return this.pushAll(e)},Wt.prototype.shift=function(){return this.pop.apply(this,arguments)},Wt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Zt()},Wt.prototype.slice=function(e,t){if(y(e,t,this.size))return this;var n=g(e,this.size);if(b(t,this.size)!==this.size)return ne.prototype.slice.call(this,e,t);for(var r=this.size-n,o=this._head;n--;)o=o.next;return this.__ownerID?(this.size=r,this._head=o,this.__hash=void 0,this.__altered=!0,this):Yt(r,o)},Wt.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Yt(this.size,this._head,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},Wt.prototype.__iterate=function(e,t){if(t)return this.reverse().__iterate(e);for(var n=0,r=this._head;r&&!1!==e(r.value,n++,this);)r=r.next;return n},Wt.prototype.__iterator=function(e,t){if(t)return this.reverse().__iterator(e);var n=0,r=this._head;return new _(function(){if(r){var t=r.value;return r=r.next,E(e,n++,t)}return O()})},Wt.isStack=Gt;var rr="@@__IMMUTABLE_STACK__@@",or=Wt.prototype;or[rr]=!0,or.withMutations=zn.withMutations,or.asMutable=zn.asMutable,or.asImmutable=zn.asImmutable,or.wasAltered=zn.wasAltered;var ar;t.Iterator=_,Xt(t,{toArray:function(){le(this.size);var e=new Array(this.size||0);return this.valueSeq().__iterate(function(t,n){e[n]=t}),e},toIndexedSeq:function(){return new ot(this)},toJS:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJS?e.toJS():e}).__toJS()},toJSON:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJSON?e.toJSON():e}).__toJS()},toKeyedSeq:function(){return new rt(this,!0)},toMap:function(){return fe(this.toKeyedSeq())},toObject:function(){le(this.size);var e={};return this.__iterate(function(t,n){e[n]=t}),e},toOrderedMap:function(){return Qe(this.toKeyedSeq())},toOrderedSet:function(){return Kt(i(this)?this.valueSeq():this)},toSet:function(){return Lt(i(this)?this.valueSeq():this)},toSetSeq:function(){return new at(this)},toSeq:function(){return s(this)?this.toIndexedSeq():i(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Wt(i(this)?this.valueSeq():this)},toList:function(){return Ue(i(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){return Ct(this,vt(this,cn.call(arguments,0)))},includes:function(e){return this.some(function(t){return Z(t,e)})},entries:function(){return this.__iterator(_n)},every:function(e,t){le(this.size);var n=!0;return this.__iterate(function(r,o,a){if(!e.call(t,r,o,a))return n=!1,!1}),n},filter:function(e,t){return Ct(this,lt(this,e,t,!0))},find:function(e,t,n){var r=this.findEntry(e,t);return r?r[1]:n},forEach:function(e,t){return le(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){le(this.size),e=void 0!==e?""+e:",";var t="",n=!0;return this.__iterate(function(r){n?n=!1:t+=e,t+=null!==r&&void 0!==r?r.toString():""}),t},keys:function(){return this.__iterator(bn)},map:function(e,t){return Ct(this,ct(this,e,t))},reduce:function(e,t,n){le(this.size);var r,o;return arguments.length<2?o=!0:r=t,this.__iterate(function(t,a,i){o?(o=!1,r=t):r=e.call(n,r,t,a,i)}),r},reduceRight:function(e,t,n){var r=this.toKeyedSeq().reverse();return r.reduce.apply(r,arguments)},reverse:function(){return Ct(this,ut(this,!0))},slice:function(e,t){return Ct(this,dt(this,e,t,!0))},some:function(e,t){return!this.every($t(e),t)},sort:function(e){return Ct(this,wt(this,e))},values:function(){return this.__iterator(wn)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(e,t){return h(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return ft(this,e,t)},equals:function(e){return X(this,e)},entrySeq:function(){var e=this;if(e._cache)return new M(e._cache);var t=e.toSeq().map(Qt).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter($t(e),t)},findEntry:function(e,t,n){var r=n;return this.__iterate(function(n,o,a){if(e.call(t,n,o,a))return r=[o,n],!1}),r},findKey:function(e,t){var n=this.findEntry(e,t);return n&&n[0]},findLast:function(e,t,n){return this.toKeyedSeq().reverse().find(e,t,n)},findLastEntry:function(e,t,n){return this.toKeyedSeq().reverse().findEntry(e,t,n)},findLastKey:function(e,t){return this.toKeyedSeq().reverse().findKey(e,t)},first:function(){return this.find(v)},flatMap:function(e,t){return Ct(this,gt(this,e,t))},flatten:function(e){return Ct(this,yt(this,e,!0))},fromEntrySeq:function(){return new it(this)},get:function(e,t){return this.find(function(t,n){return Z(n,e)},void 0,t)},getIn:function(e,t){for(var n,r=this,o=At(e);!(n=o.next()).done;){var a=n.value;if((r=r&&r.get?r.get(a,vn):vn)===vn)return t}return r},groupBy:function(e,t){return pt(this,e,t)},has:function(e){return this.get(e,vn)!==vn},hasIn:function(e){return this.getIn(e,vn)!==vn},isSubset:function(e){return e="function"==typeof e.includes?e:t(e),this.every(function(t){return e.includes(t)})},isSuperset:function(e){return e="function"==typeof e.isSubset?e:t(e),e.isSubset(this)},keyOf:function(e){return this.findKey(function(t){return Z(t,e)})},keySeq:function(){return this.toSeq().map(Jt).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return _t(this,e)},maxBy:function(e,t){return _t(this,t,e)},min:function(e){return _t(this,e?en(e):rn)},minBy:function(e,t){return _t(this,t?en(t):rn,e)},rest:function(){return this.slice(1)},skip:function(e){return this.slice(Math.max(0,e))},skipLast:function(e){return Ct(this,this.toSeq().reverse().skip(e).reverse())},skipWhile:function(e,t){return Ct(this,mt(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile($t(e),t)},sortBy:function(e,t){return Ct(this,wt(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return Ct(this,this.toSeq().reverse().take(e).reverse())},takeWhile:function(e,t){return Ct(this,ht(this,e,t))},takeUntil:function(e,t){return this.takeWhile($t(e),t)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=on(this))}});var ir=t.prototype;ir[un]=!0,ir[Cn]=ir.values,ir.__toJS=ir.toArray,ir.__toStringMapper=tn,ir.inspect=ir.toSource=function(){return this.toString()},ir.chain=ir.flatMap,ir.contains=ir.includes,Xt(n,{flip:function(){return Ct(this,st(this))},mapEntries:function(e,t){var n=this,r=0;return Ct(this,this.toSeq().map(function(o,a){return e.call(t,[a,o],r++,n)}).fromEntrySeq())},mapKeys:function(e,t){var n=this;return Ct(this,this.toSeq().flip().map(function(r,o){return e.call(t,r,o,n)}).flip())}});var sr=n.prototype;return sr[ln]=!0,sr[Cn]=ir.entries,sr.__toJS=ir.toObject,sr.__toStringMapper=function(e,t){return JSON.stringify(t)+": "+tn(e)},Xt(r,{toKeyedSeq:function(){return new rt(this,!1)},filter:function(e,t){return Ct(this,lt(this,e,t,!1))},findIndex:function(e,t){var n=this.findEntry(e,t);return n?n[0]:-1},indexOf:function(e){var t=this.keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.lastKeyOf(e);return void 0===t?-1:t},reverse:function(){return Ct(this,ut(this,!1))},slice:function(e,t){return Ct(this,dt(this,e,t,!1))},splice:function(e,t){var n=arguments.length;if(t=Math.max(0|t,0),0===n||2===n&&!t)return this;e=g(e,e<0?this.count():this.size);var r=this.slice(0,e);return Ct(this,1===n?r:r.concat(d(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var n=this.findLastEntry(e,t);return n?n[0]:-1},first:function(){return this.get(0)},flatten:function(e){return Ct(this,yt(this,e,!1))},get:function(e,t){return e=m(this,e),e<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find(function(t,n){return n===e},void 0,t)},has:function(e){return(e=m(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return Ct(this,bt(this,e))},interleave:function(){var e=[this].concat(d(arguments)),t=Ot(this.toSeq(),A.of,e),n=t.flatten(!0);return t.size&&(n.size=t.size*e.length),Ct(this,n)},keySeq:function(){return $(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(e,t){return Ct(this,mt(this,e,t,!1))},zip:function(){return Ct(this,Ot(this,nn,[this].concat(d(arguments))))},zipWith:function(e){var t=d(arguments);return t[0]=this,Ct(this,Ot(this,e,t))}}),r.prototype[fn]=!0,r.prototype[pn]=!0,Xt(o,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}}),o.prototype.has=ir.includes,o.prototype.contains=o.prototype.includes,Xt(P,n.prototype),Xt(A,r.prototype),Xt(I,o.prototype),Xt(te,n.prototype),Xt(ne,r.prototype),Xt(re,o.prototype),{Iterable:t,Seq:j,Collection:ee,Map:fe,OrderedMap:Qe,List:Ue,Stack:Wt,Set:Lt,OrderedSet:Kt,Record:It,Range:$,Repeat:J,is:Z,fromJS:V}})},727:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function s(e){var t=e.onRef,n=e.listClassName,r=e.itemClassName,o=e.className,a=e.children,s=i(e,["onRef","listClassName","itemClassName","className","children"]);return d.a.createElement("div",E({ref:t,className:m()(n,o)},s),p.Children.map(a,function(e){return"string"==typeof e?d.a.createElement("span",{className:r},e):e?Object(p.cloneElement)(e,{className:m()(r,e.props.className)}):e}))}n.d(t,"a",function(){return C}),n.d(t,"b",function(){return O}),n.d(t,"d",function(){return k}),n.d(t,"c",function(){return x});var c,u,l=n(1),f=n.n(l),p=n(0),d=n.n(p),h=n(2),m=n.n(h),v=n(25),y=n.n(v),g=n(258),b=n(748),w=n(809),_=(n.n(w),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O=function(e){return d.a.createElement(s,E({listClassName:"ContentItem-cells",itemClassName:"ContentItem-cell"},e))},C=function(e){return d.a.createElement(s,E({listClassName:"ContentItem-actions",itemClassName:"ContentItem-action"},e))},k=function(e){return d.a.createElement(s,E({listClassName:"ContentItem-status",itemClassName:"ContentItem-statusItem"},e))},S=(u=c=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.onRef=function(e){a.domNode=e,a.props.onRef&&a.props.onRef(e)},i=n,o(a,i)}return a(t,e),_(t,[{key:"componentDidMount",value:function(){var e=this;Object(g.a)(this.domNode,function(){var t=e.props,n=t.data;n=void 0===n?{}:n;var r=n.type,o=n.id,a=t.lastreadTouchable;e.context.currentUser&&a&&r&&o&&Object(b.c)("article"===r?"post":r,o,b.b)})}},{key:"render",value:function(){var e=y()(this.props,["noTrackCardShow","lastreadTouchable","data","onRef"]),t=e.className,n=e.title,r=e.meta,o=e.children,a=e.extra,s=e.image,c=i(e,["className","title","meta","children","extra","image"]),u=d.a.createElement(d.a.Fragment,null,n&&d.a.createElement("h2",{className:"ContentItem-title"},n),r&&d.a.createElement("div",{className:"ContentItem-meta"},r));return d.a.createElement("div",E({ref:this.onRef,className:m()("ContentItem",t)},c),s||a?d.a.createElement("div",{className:"ContentItem-main"},s&&d.a.createElement("div",{className:"ContentItem-image"},s),d.a.createElement("div",{className:"ContentItem-head"},u),a&&d.a.createElement("div",{className:"ContentItem-extra"},a)):u,o)}}]),t}(p.Component),c.contextTypes={currentUser:f.a.object},u),x={plain:"plain",default:"default",interactive:"interactive"};t.e=S},728:function(e,t,n){"use strict";var r=n(1026),o=n(773),a=n(738),i=n(1042),s=n(753),c=n(835),u=n(838),l=n(920),f=n(1043),p=n(922),d=n(797),h=n(733),m=n(918),v=n(730),y=n(845),g=n(936),b=n(774),w=n(1100),_=n(934),E=n(1103),O=n(740),C=n(937),k=n(1107),S={Editor:f,EditorBlock:p,EditorState:v,CompositeDecorator:i,Entity:d,EntityInstance:m,BlockMapBuilder:o,CharacterMetadata:a,ContentBlock:s,ContentState:c,SelectionState:b,AtomicBlockUtils:r,KeyBindingUtil:y,Modifier:h,RichUtils:g,DefaultDraftBlockRenderMap:u,DefaultDraftInlineStyle:l,convertFromHTML:_,convertFromRaw:E,convertToRaw:w,genKey:O,getDefaultKeyBinding:C,getVisibleSelectionRect:k};e.exports=S},729:function(e,t,n){e.exports=n(7)(76)},730:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n){return C.set(e,{selection:t,forceSelection:n,nativelyRenderedContent:null,inlineStyleOverride:null})}function a(e,t){return e.getBlockMap().map(function(n){return h.generate(e,n,t)}).toOrderedMap()}function i(e,t,n,r){var o=e.getCurrentContent().set("entityMap",n),a=o.getBlockMap();return e.getImmutable().get("treeMap").merge(t.toSeq().filter(function(e,t){return e!==a.get(t)}).map(function(e){return h.generate(o,e,r)}))}function s(e,t,n,r,o){return n.merge(t.toSeq().filter(function(t){return r.getDecorations(t,e)!==o.getDecorations(t,e)}).map(function(t){return h.generate(e,t,r)}))}function c(e,t){return t!==e.getLastChangeType()||"insert-characters"!==t&&"backspace-character"!==t&&"delete-character"!==t}function u(e,t){var n=t.getStartKey(),r=t.getStartOffset(),o=e.getBlockForKey(n);return r>0?o.getInlineStyleAt(r-1):o.getLength()?o.getInlineStyleAt(0):f(e,n)}function l(e,t){var n=t.getStartKey(),r=t.getStartOffset(),o=e.getBlockForKey(n);return r<o.getLength()?o.getInlineStyleAt(r):r>0?o.getInlineStyleAt(r-1):f(e,n)}function f(e,t){for(var n,r=e.getBlockBefore(t);r;){if(n=r.getLength())return r.getInlineStyleAt(n-1);r=e.getBlockBefore(r.getKey())}return b()}var p=n(144),d=p||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=n(917),m=n(835),v=n(1039),y=n(726),g=n(774),b=y.OrderedSet,w=y.Record,_=y.Stack,E={allowUndo:!0,currentContent:null,decorator:null,directionMap:null,forceSelection:!1,inCompositionMode:!1,inlineStyleOverride:null,lastChangeType:null,nativelyRenderedContent:null,redoStack:_(),selection:null,treeMap:null,undoStack:_()},O=w(E),C=function(){function e(t){r(this,e),this._immutable=t}return e.createEmpty=function(t){return e.createWithContent(m.createFromText(""),t)},e.createWithContent=function(t,n){var r=t.getBlockMap().first().getKey();return e.create({currentContent:t,undoStack:_(),redoStack:_(),decorator:n||null,selection:g.createEmpty(r)})},e.create=function(t){var n=t.currentContent,r=t.decorator,o=d({},t,{treeMap:a(n,r),directionMap:v.getDirectionMap(n)});return new e(new O(o))},e.set=function(t,n){return new e(t.getImmutable().withMutations(function(e){var r=e.get("decorator"),o=r;null===n.decorator?o=null:n.decorator&&(o=n.decorator);var c=n.currentContent||t.getCurrentContent();if(o!==r){var u,l=e.get("treeMap");return u=o&&r?s(c,c.getBlockMap(),l,o,r):a(c,o),void e.merge({decorator:o,treeMap:u,nativelyRenderedContent:null})}c!==t.getCurrentContent()&&e.set("treeMap",i(t,c.getBlockMap(),c.getEntityMap(),o)),e.merge(n)}))},e.prototype.toJS=function(){return this.getImmutable().toJS()},e.prototype.getAllowUndo=function(){return this.getImmutable().get("allowUndo")},e.prototype.getCurrentContent=function(){return this.getImmutable().get("currentContent")},e.prototype.getUndoStack=function(){return this.getImmutable().get("undoStack")},e.prototype.getRedoStack=function(){return this.getImmutable().get("redoStack")},e.prototype.getSelection=function(){return this.getImmutable().get("selection")},e.prototype.getDecorator=function(){return this.getImmutable().get("decorator")},e.prototype.isInCompositionMode=function(){return this.getImmutable().get("inCompositionMode")},e.prototype.mustForceSelection=function(){return this.getImmutable().get("forceSelection")},e.prototype.getNativelyRenderedContent=function(){return this.getImmutable().get("nativelyRenderedContent")},e.prototype.getLastChangeType=function(){return this.getImmutable().get("lastChangeType")},e.prototype.getInlineStyleOverride=function(){return this.getImmutable().get("inlineStyleOverride")},e.setInlineStyleOverride=function(t,n){return e.set(t,{inlineStyleOverride:n})},e.prototype.getCurrentInlineStyle=function(){var e=this.getInlineStyleOverride();if(null!=e)return e;var t=this.getCurrentContent(),n=this.getSelection();return n.isCollapsed()?u(t,n):l(t,n)},e.prototype.getBlockTree=function(e){return this.getImmutable().getIn(["treeMap",e])},e.prototype.isSelectionAtStartOfContent=function(){var e=this.getCurrentContent().getBlockMap().first().getKey();return this.getSelection().hasEdgeWithin(e,0,0)},e.prototype.isSelectionAtEndOfContent=function(){var e=this.getCurrentContent(),t=e.getBlockMap(),n=t.last(),r=n.getLength();return this.getSelection().hasEdgeWithin(n.getKey(),r,r)},e.prototype.getDirectionMap=function(){return this.getImmutable().get("directionMap")},e.acceptSelection=function(e,t){return o(e,t,!1)},e.forceSelection=function(e,t){return t.getHasFocus()||(t=t.set("hasFocus",!0)),o(e,t,!0)},e.moveSelectionToEnd=function(t){var n=t.getCurrentContent(),r=n.getLastBlock(),o=r.getKey(),a=r.getLength();return e.acceptSelection(t,new g({anchorKey:o,anchorOffset:a,focusKey:o,focusOffset:a,isBackward:!1}))},e.moveFocusToEnd=function(t){var n=e.moveSelectionToEnd(t);return e.forceSelection(n,n.getSelection())},e.push=function(t,n,r){if(t.getCurrentContent()===n)return t;var o="insert-characters"!==r,a=v.getDirectionMap(n,t.getDirectionMap());if(!t.getAllowUndo())return e.set(t,{currentContent:n,directionMap:a,lastChangeType:r,selection:n.getSelectionAfter(),forceSelection:o,inlineStyleOverride:null});var i=t.getSelection(),s=t.getCurrentContent(),u=t.getUndoStack(),l=n;i!==s.getSelectionAfter()||c(t,r)?(u=u.push(s),l=l.set("selectionBefore",i)):"insert-characters"!==r&&"backspace-character"!==r&&"delete-character"!==r||(l=l.set("selectionBefore",s.getSelectionBefore()));var f=t.getInlineStyleOverride();-1===["adjust-depth","change-block-type","split-block"].indexOf(r)&&(f=null);var p={currentContent:l,directionMap:a,undoStack:u,redoStack:_(),lastChangeType:r,selection:n.getSelectionAfter(),forceSelection:o,inlineStyleOverride:f};return e.set(t,p)},e.undo=function(t){if(!t.getAllowUndo())return t;var n=t.getUndoStack(),r=n.peek();if(!r)return t;var o=t.getCurrentContent(),a=v.getDirectionMap(r,t.getDirectionMap());return e.set(t,{currentContent:r,directionMap:a,undoStack:n.shift(),redoStack:t.getRedoStack().push(o),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"undo",nativelyRenderedContent:null,selection:o.getSelectionBefore()})},e.redo=function(t){if(!t.getAllowUndo())return t;var n=t.getRedoStack(),r=n.peek();if(!r)return t;var o=t.getCurrentContent(),a=v.getDirectionMap(r,t.getDirectionMap());return e.set(t,{currentContent:r,directionMap:a,undoStack:t.getUndoStack().push(o),redoStack:n.shift(),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"redo",nativelyRenderedContent:null,selection:r.getSelectionAfter()})},e.prototype.getImmutable=function(){return this._immutable},e}();e.exports=C},731:function(e,t,n){"use strict";function r(e){var t=e.className,n=e.meta,r=e.children;return p.a.createElement("div",{className:h()("List-item",t)},n&&p.a.createElement("div",{className:"List-itemMeta"},n),r)}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}var u=n(1),l=n.n(u),f=n(0),p=n.n(f),d=n(2),h=n.n(d),m=r;n(744),n(808);n.d(t,"a",function(){return m});var v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),v(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.title,r=e.options,a=e.children,i=o(e,["className","title","options","children"]);return p.a.createElement("div",c({className:h()("List",t)},i),(n||r)&&p.a.createElement("div",{className:"List-header"},p.a.createElement("h4",{className:"List-headerText"},n),p.a.createElement("div",{className:"List-headerOptions"},r)),a)}}]),t}(f.Component);y.propTypes={title:l.a.oneOfType([l.a.string,l.a.element]),options:l.a.element};t.b=y},732:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){var n=t.id,r=t.type;return{shareText:e.shareTexts[""+r+n]}}function s(e){return Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&")}var c,u,l,f=n(1),p=n.n(f),d=n(0),h=n.n(d),m=n(5),v=(n.n(m),n(2)),y=n.n(v),g=n(813),b=n.n(g),w=n(11),_=n(39),E=n(3),O=n(10),C=n(6),k=n.n(C),S=n(92),x=n(53),T=(n.n(x),n(277)),j=n(14),P=n(13),A=n(815),I=(n.n(A),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),M=(u=c=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));l.call(n);var a=e.id,i=e.type,s=e.getShareText;return n.getShareText=function(){"live"!==i&&s(a,i)},n}return a(t,e),I(t,[{key:"componentDidUpdate",value:function(){"absolute"===this.props.positionStatus&&this.menu.popover.close()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.positionStatus,o=t.toggler,a=t.type,i=t.question.reviewInfo;i=void 0===i?{}:i;var s=i.tips,c=this.state.qrCodeUrl,u=h.a.createElement("div",{className:y()({"ShareMenu-isReviewing":s})},c&&h.a.createElement("img",{className:"ShareMenu-fakeQRCode",src:c,alt:"微信二维码"}),Object(d.cloneElement)(o,{onMouseEnter:this.preLoad,onClick:this.handleClick}));return s?u:h.a.createElement(_.c,{className:y()("ShareMenu",n),positionStatus:r,ref:function(t){e.menu=t},toggler:u},h.a.createElement(_.b,{className:"ShareMenu-button",onClick:this.handleCopyLink},h.a.createElement(w.InsertLink,{fill:"#9fadc7",size:20}),"复制链接"),"live"===a||h.a.createElement(_.b,{className:"ShareMenu-button",onClick:this.shareToWeibo},h.a.createElement(O.a,{name:"weibo",width:16,height:16,left:!0,fill:"#f96e76"}),"新浪微博"),h.a.createElement(_.b,{tag:"div",noActive:!0},h.a.createElement("div",{className:"ShareMenu-wechat"},h.a.createElement(E.default,{className:"ShareMenu-wechatText ShareMenu-button",preset:"plain"},h.a.createElement(O.a,{name:"wechat",width:14,height:14,left:!0,fill:"#7dd239"}),"微信扫一扫"),h.a.createElement("img",{className:"ShareMenu-qrCode",src:c,alt:"微信二维码"}))))}}]),t}(d.Component),c.propTypes={toggler:p.a.node,handlebeforeClickShareMenu:p.a.func,question:p.a.object},c.defaultProps={toggler:h.a.createElement(E.default,{preset:"plain",icon:w.Share,label:"分享"}),question:{}},l=function(){var e=this;this.state={},this.handleClick=function(t){var n=e.props,r=n.toggler,o=n.handlebeforeClickShareMenu,a=n.question.reviewInfo;a=void 0===a?{}:a;var i=a.tips,s=n.type;if(i)return void o();e.getShareText(),k.a.trackEvent(t.target,{action:"Share",element:"Button",is_intent:!0,element_name:P.E[s]}),r.props.onClick&&r.props.onClick(t)},this.handleCopyLink=function(){var t=e.props,n=t.type,r=t.title,o=t.authorName,a=t.href,i=t.showNotification,s=x.ENTITY_TYPES_MAP[n]||"",c=r?r+" - ":"",u=o&&"匿名用户"!==o&&s?o+"的"+s+" - ":"",l=a?Object(S.toAbsoluteUrl)(a):e.url();b()(""+c+u+"知乎\n"+l),i("链接复制成功！")},this.url=function(){var t=e.props,n=t.id,r=t.type;return Object(S.toAbsoluteUrl)(e.props.url)||location.origin+"/"+r+"/"+n},this.preLoad=function(){var t=e.state.qrCodeUrl;if(!t){var n=location.protocol+"//www.zhihu.com/",r=e.url();t=n+"qrcode?"+s({url:r+"#showWechatShareTip"}),e.setState({qrCodeUrl:t,url:r})}},this.shareToWeibo=function(){var t={appKey:"3063806388"},n=e.props.shareText;n&&(t.title=n);var r="http://service.weibo.com/share/share.php?"+s(t);window.open(r,"_blank","width=615,height=505")||(location.href=r)}},u);t.a=Object(m.connect)(i,{showNotification:j.h,getShareText:T.b})(M)},733:function(e,t,n){"use strict";var r=n(738),o=n(1027),a=n(914),i=n(726),s=n(1029),c=n(1031),u=n(796),l=n(1034),f=n(1035),p=n(729),d=n(1036),h=n(915),m=n(1037),v=n(1038),y=i.OrderedSet,g={replaceText:function(e,t,n,o,a){var i=h(e,t),s=m(i,t),c=r.create({style:o||y(),entity:a||null});return f(s,s.getSelectionAfter(),n,c)},insertText:function(e,t,n,r,o){return t.isCollapsed()||p(!1),g.replaceText(e,t,n,r,o)},moveText:function(e,t,n){var r=u(e,t),o=g.removeRange(e,t,"backward");return g.replaceWithFragment(o,n,r)},replaceWithFragment:function(e,t,n){var r=h(e,t),o=m(r,t);return l(o,o.getSelectionAfter(),n)},removeRange:function(e,t,n){var r=void 0,o=void 0,i=void 0,s=void 0;t.getIsBackward()&&(t=t.merge({anchorKey:t.getFocusKey(),anchorOffset:t.getFocusOffset(),focusKey:t.getAnchorKey(),focusOffset:t.getAnchorOffset(),isBackward:!1})),r=t.getAnchorKey(),o=t.getFocusKey(),i=e.getBlockForKey(r),s=e.getBlockForKey(o);var u=t.getStartOffset(),l=t.getEndOffset(),f=i.getEntityAt(u),p=s.getEntityAt(l-1);if(r===o&&f&&f===p){var d=c(e.getEntityMap(),i,s,t,n);return m(e,d)}var v=t;a.draft_segmented_entities_behavior&&(v=c(e.getEntityMap(),i,s,t,n));var y=h(e,v);return m(y,v)},splitBlock:function(e,t){var n=h(e,t),r=m(n,t);return v(r,r.getSelectionAfter())},applyInlineStyle:function(e,t,n){return o.add(e,t,n)},removeInlineStyle:function(e,t,n){return o.remove(e,t,n)},setBlockType:function(e,t,n){return d(e,t,function(e){return e.merge({type:n,depth:0})})},setBlockData:function(e,t,n){return d(e,t,function(e){return e.merge({data:n})})},mergeBlockData:function(e,t,n){return d(e,t,function(e){return e.merge({data:e.getData().merge(n)})})},applyEntity:function(e,t,n){var r=h(e,t);return s(r,t,n)}};e.exports=g},735:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,s,c=n(1),u=n.n(c),l=n(0),f=n.n(l),p=n(11),d=n(3),h=n(6),m=n.n(h),v=n(36),y=n(816),g=(n.n(y),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),b=(s=i=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.handleClick=function(e){m.a.trackEvent(a,{action:"Comment",element:"Button",is_intent:!0});var t=a.props.onClick;if(t){var n=e.currentTarget.parentNode.className.includes("is-fixed")?"fixed":"bottom";t(e,{commentsShown:!a.props.commentsShown,commentPattern:n})}},i=n,o(a,i)}return a(t,e),g(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.count,r=e.commentsShown,o=e.commentClosed,a=void 0;if(r)a="收起评论";else{var i=n&&!o;a=i?Object(v.b)(n)+" 条评论":"添加评论"}return f.a.createElement(d.default,{preset:"plain",className:t,onClick:this.handleClick,icon:p.Comment,label:a})}}]),t}(l.Component),i.propTypes={commentsShown:u.a.bool,count:u.a.number},s);t.a=b},736:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,s,c=n(1),u=n.n(c),l=n(0),f=n.n(l),p=n(48),d=n.n(p),h=n(271),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=(s=i=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.handlePackup=function(){var e=a.props.onClose;window.scrollTo(0,a.originPageYOffset),e&&e()},i=n,o(a,i)}return a(t,e),m(t,[{key:"componentWillReceiveProps",value:function(e){"bottom"===e.commentPattern&&e.shown&&!this.props.shown&&(this.originPageYOffset=window.pageYOffset)}},{key:"render",value:function(){var e=this.props,t=e.shown,n=e.parent,r=e.commentPattern,o=e.onClose,a=e.byComment,i=e.needLoadCommentPermission,s=e.apps,c=e.isMobile,u=e.onOrderChange,l=e.onItemLike,p=e.onPaginationClick,m=e.isAutoblur,v=e.onMount;return t?"bottom"===r?f.a.createElement(h.a,{isAutoblur:m,parent:n,commentPattern:r,handlePackupButton:this.handlePackup,needLoadCommentPermission:i,isMobile:c,apps:s,onOrderChange:u,onItemLike:l,onPaginationClick:p,onMount:v}):f.a.createElement(d.a,{size:"fullPage",onClose:o,maskClosable:!1},t&&"fixed"===r&&f.a.createElement(h.a,{parent:n,commentPattern:r,byComment:a,needLoadCommentPermission:i,onOrderChange:u,onItemLike:l,onPaginationClick:p,onMount:v})):null}}]),t}(l.Component),i.propTypes={byComment:u.a.oneOfType([u.a.number,u.a.string]),parent:u.a.object,shown:u.a.bool,commentPattern:u.a.string,onClose:u.a.func,needLoadCommentPermission:u.a.bool,apps:u.a.string,isMobile:u.a.bool,onOrderChange:u.a.func,onItemLike:u.a.func,onPaginationClick:u.a.func,isAutoblur:u.a.bool,onMount:u.a.func},i.defaultProps={commentPattern:"fixed",apps:"heifetz"},s);t.a=v},737:function(e,t,n){"use strict";var r=function(e){if(null!=e)return e;throw new Error("Got unexpected null or undefined")};e.exports=r},738:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(726),s=i.Map,c=i.OrderedSet,u=i.Record,l=c(),f={style:l,entity:null},p=u(f),d=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.getStyle=function(){return this.get("style")},t.prototype.getEntity=function(){return this.get("entity")},t.prototype.hasStyle=function(e){return this.getStyle().includes(e)},t.applyStyle=function(e,n){var r=e.set("style",e.getStyle().add(n));return t.create(r)},t.removeStyle=function(e,n){var r=e.set("style",e.getStyle().remove(n));return t.create(r)},t.applyEntity=function(e,n){var r=e.getEntity()===n?e:e.set("entity",n);return t.create(r)},t.create=function(e){if(!e)return h;var n={style:l,entity:null},r=s(n).merge(e),o=m.get(r);if(o)return o;var a=new t(r);return m=m.set(r,a),a},t}(p),h=new d,m=s([[s(f),h]]);d.EMPTY=h,e.exports=d},739:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=n(1),h=n.n(d),m=n(0),v=n.n(m),y=n(2),g=n.n(y),b=n(3),w=n(10),_=n(749),E=n(245),O=n(769),C=n(250),k=n(276),S=n(258),x=n(262),T=n(138),j=n(6),P=n.n(j),A=n(727),I=n(279),M=n(139),N=(n(811),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}),R=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),D=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={tipShown:!1,tipContent:"",tipX:0,tipY:0,tipPosition:"bottom"},e.handleMouseDown=e.handleMouseDown.bind(e),e.handleCopy=e.handleCopy.bind(e),e.handleTipClose=e.handleTipClose.bind(e),e.rightClickX=-1,e.rightClickY=-1,e}return a(t,e),R(t,[{key:"getRange",value:function(e){return e.getRangeAt(0)}},{key:"getExtraCopyright",value:function(e,t,n){var r=["作者："+t,"链接："+e,"来源：知乎","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"],o=["",""];return r=n?r.concat(o):o.concat(r)}},{key:"getCopyText",value:function(e,t,n,r){var o=this.getExtraCopyright(t,n,r).join("\n");return r?o+e:e+o}},{key:"getRangeHtml",value:function(e){var t=document.createElement("div");return t.appendChild(e.cloneContents()),t.outerHTML}},{key:"getCopyHtml",value:function(e,t,n,r){var o=this.getExtraCopyright(t,n,r).join("<br />");return"<div>"+(r?o+e:e+o)+"</div>"}},{key:"randomRange",value:function(e,t){return Math.floor(Math.random()*(t-e)+e)}},{key:"addCopyright",value:function(e,t,n){if(window.getSelection){var r=window.getSelection(),o=this.getRange(r),a=o.toString().trim(),i=this.getRangeHtml(o);if(a&&!(a.length<128)){var s=a.length>=512,c=this.getCopyHtml(i,t,n,s),u=this.getCopyText(a,t,n,s),l=e.nativeEvent.clipboardData;if("object"===(void 0===l?"undefined":N(l))){if(l.setData("text/html",'<meta charset="utf-8">'+c),l.setData("text/plain",u),l.getData("text/plain").length>0)return void e.preventDefault()}var f=document.createElement("div");f.innerHTML=c;var p=f.firstChild;p.style.position="fixed",p.style.left="-9999px",document.body.appendChild(p),r.selectAllChildren(p),setTimeout(function(){document.body.removeChild(p),r.removeAllRanges(),r.addRange(o)},200)}}}},{key:"showTip",value:function(e,t){var n=window.getSelection(),r=this.getRange(n),o=r.toString().trim(),a=this.randomRange(44,66);if(!(o.length<=a)){e.preventDefault(),e.stopPropagation();var i=r.getBoundingClientRect(),s=window.pageYOffset,c=this.rightClickX,u=this.rightClickY,l=void 0,f="bottom";if(-1!==u)l=u+3;else{var p=this.props.viewPort,d=i.top+s,h=i.bottom+s,m=s+p.top+52,v=s+p.bottom-52;h<m?l=m-52:h<v?l=h:(f="top",l=d>m&&d<v?d:v+52)}var y=-1!==c?c+3:i.left+(i.right-i.left)/2-12;this.setState({tipShown:!0,tipContent:t,tipX:y,tipY:l,tipPosition:f}),this.rightClickX=-1,this.rightClickY=-1}}},{key:"handleTipClose",value:function(){this.setState({tipShown:!1})}},{key:"handleCopy",value:function(e){var t=this.context.currentUser,n=this.props.data,r=n.author,o=n.type,a=n.id,i=n.question,s=n.reshipmentSettings,c=n.relationship;c=void 0===c?{}:c;var u=c.isAuthorized,l="";if("article"===o?l="https://zhuanlan.zhihu.com/p/"+a:"answer"===o&&(l="https://www.zhihu.com/question/"+i.id+"/answer/"+a),!t||t.urlToken!==r.urlToken)switch(s){case"disallowed":this.showTip(e,v.a.createElement("a",{href:"https://www.zhihu.com/terms#sec-licence-6"},"禁止转载"));break;case"need_payment":if(!u){this.showTip(e,v.a.createElement("a",{href:"https://www.zhihu.com/copyright/apply?answer="+a},"申请转载"));break}this.showTip(e,"已获授权，复制成功");default:this.addCopyright(e,l,r.name)}}},{key:"handleMouseDown",value:function(e){3===e.nativeEvent.which&&(this.rightClickX=e.pageX,this.rightClickY=e.pageY)}},{key:"render",value:function(){var e=this.props,t=e.onRef,n=e.tag,r=e.html,o=e.children,a=e.onClick,i=e.className,s=e.itemProp,c=e.style,u=e.prefix,l=this.state,f=l.tipShown,p=l.tipContent,d=l.tipX,h=l.tipY,m=l.tipPosition;return v.a.createElement("div",{ref:t,onClick:a,className:i,style:c},u,v.a.createElement(M.a,{itemProp:s,tag:n,html:r,onCopy:this.handleCopy,onMouseDown:this.handleMouseDown,className:"CopyrightRichText-richText"}),o,v.a.createElement(I.a,{shown:f,timeout:1e4,hideOnClick:!0,onClose:this.handleTipClose,x:d,y:h,position:m,content:p,className:"CopyrightRichText-tooltip"}))}}]),t}(m.Component);D.contextTypes={currentUser:h.a.object},D.propTypes={onRef:h.a.func,viewPort:h.a.object};var L,F,U=D,B=n(15),z=n(243),K=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),q=(F=L=function(e){function t(){return i(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),K(t,[{key:"render",value:function(){var e=this.props,t=e.href,n=e.created,r=e.updated,o=e.onClick;return v.a.createElement("div",{className:"ContentItem-time"},v.a.createElement(B.Link,{to:t,target:"_blank",onClick:o},v.a.createElement("span",{"data-tooltip":"发布于 "+Object(z.c)(n)},r!==n?"编辑于 "+Object(z.f)(r):"发布于 "+Object(z.f)(n))))}}]),t}(m.Component),L.propTypes={href:h.a.string,created:h.a.number,updated:h.a.number},F),H=q,V=n(748);n(812);n.d(t,"a",function(){return H});var W,G,Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),X=/.*?(class="link-box")/,J=(G=W=function(e){function t(){var e,n,r,o;l(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state=Y({},r.getInitTruncatedState(r.props),{shouldSticky:!1,offset:0}),r.updateStateInBrowser=function(){var e=r.props,t=e.excerpt,n=e.html,o=e.expanded,a=e.cover,i=e.unescapable,s=e.limit,c=e.limitWithImage,u=e.truncateHTMLOptions,l=e.truncateDisabled,f=!0,p=r.state.truncatedContent;if(t&&(X.test(t)||l))p=t;else if(!i){var d=a?c:s,h=r.truncate(n,d,u);f=h.isTruncated,p=h.content}return{isTruncated:f,isExpanded:n&&o,truncatedContent:p,previewImg:null}},r.checkOpenInAppStyle=function(e){},r.handleExpand=function(e){P.a.trackEvent(r,{action:"Expand",name:e.target.textContent});var t=r.props.onExpand;if(t)return void t(e);var n=r.props,o=n.onToggleExpend,a=n.data,i=a.type,s=a.id;r.context.currentUser&&Object(V.c)("article"===i?"post":i,s,V.a);o&&o(!0),r.setState({isExpanded:!0},function(){"article"===i&&Object(S.a)(r.el,function(){P.a.trackEvent(r,{action:"ReadFinish"})})})},r.handleCollapse=function(){var e=r.props.onToggleExpend;P.a.trackEvent(r,{action:"Collapse",element:"Button"});e&&e(!1),r.setState({isExpanded:!1},function(){return r.checkOpenInAppStyle(!1)})},r.handlePreview=function(e){var t=r.state,n=t.isExpanded,o=t.isTruncated,a=o&&!n,i=e.target;!a&&"IMG"===i.tagName&&i.classList.contains("zh-lightbox-thumb")&&r.setState({previewImg:i})},r.handlePositionStatusChange=function(e){var t=r.props.onPositionStatusChange;t&&(t(e),r.checkOpenInAppStyle("fixed"===e))},r.handleObserve=function(e){var t=e[0].intersectionRatio;if(t||!document.querySelector("#root").style.position){var n=t>0;n!==r.state.shouldSticky&&(r.setState({shouldSticky:n}),n||r.checkOpenInAppStyle(!1))}},o=n,f(r,o)}return p(t,e),Z(t,[{key:"componentDidMount",value:function(){var e=this;this.setState(Y({},this.updateStateInBrowser(),{viewPort:{top:148,bottom:window.innerHeight-56}}));var t=this.props.expandedHeight||800;this.props.unescapable&&(!this.content||this.content.scrollHeight<t)&&this.setState({isTruncated:!1,isExpanded:!1}),this.content&&this.content.scrollHeight>this.content.offsetHeight&&this.setState({contentCollapsed:!0}),Object(S.a)(this.el,function(){var t=e.props,n=t.data,r=n.type,o=n.id,a=t.expanded;e.context.currentUser&&a&&Object(V.c)("article"===r?"post":r,o,V.a)})}},{key:"componentWillReceiveProps",value:function(e){this.props.data.id!==e.data.id&&this.setState(this.getInitTruncatedState(e))}},{key:"componentWillUpdate",value:function(e,t){if(this.state.isExpanded&&!t.isExpanded){var n=this.el.getBoundingClientRect();n.top<this.props.topExcludedHeight&&(this.rect=n,this.scroll=window.pageYOffset)}}},{key:"componentDidUpdate",value:function(e,t){if(t.isExpanded&&!this.state.isExpanded&&this.rect){var n=this.rect,r=n.top,o=n.bottom,a=n.height,i=this.el.offsetHeight,s=window,c=s.innerHeight,u=o<c?i-a:r-(c-i);window.scrollTo(0,this.scroll+u),this.rect=null,this.scroll=null}}},{key:"getInitTruncatedState",value:function(e){var t=e.excerpt,n=e.html,r=e.expanded,o=e.unescapable;return{isTruncated:t.length<=n.length,isExpanded:r,truncatedContent:o?n:t,previewImg:null}}},{key:"truncate",value:function(e,t,n){var r=Object(x.b)(e,t,n);return{isTruncated:r.isTruncated,content:r.content}}},{key:"renderActions",value:function(){var e=this,t=this.props,n=t.children,r=t.unescapable,o=t.noCollapsed,a=t.expandText,i=void 0===a?"展开阅读全文":a,s=t.onClick,c=this.state,u=c.isExpanded,l=c.isTruncated,f=c.shouldSticky,p=c.offset;if(!u)return[r&&l&&v.a.createElement(b.default,{key:"expand-button",preset:"plain",className:"ContentItem-rightButton",onClick:s||this.handleExpand},i,v.a.createElement(w.a,{name:"arrow",className:"ContentItem-arrowIcon"})),n&&v.a.createElement(A.a,{key:"actions"},n)];var d=(n||!o)&&v.a.createElement(A.a,{className:"RichContent-actions"},n,!o&&v.a.createElement(b.default,{"data-zop-retract-question":!0,preset:"plain",className:"ContentItem-rightButton",onClick:this.handleCollapse},v.a.createElement("span",{className:"RichContent-collapsedText"},"收起"),v.a.createElement(w.a,{name:"arrow",className:"ContentItem-arrowIcon is-active"})));return f&&d?v.a.createElement(E.a,{offset:p,bottom:!0,container:function(){return e.el.parentNode},onPositionStatusChange:this.handlePositionStatusChange},d):d}},{key:"render",value:function(){var e=this,n=this.props,r=n.html,o=n.excerpt,a=n.data,i=n.unescapable,s=n.after,c=n.before,u=n.extra,l=n.cover,f=n.hasVideo,p=n.renderCanExpandExtra,d=n.itemProp,h=void 0===d?"text":d,m=n.expandText,y=void 0===m?"阅读全文":m,E=n.collapsedHeight,C=n.className,S=n.onClick,x=n.prefix,T=n.experimentGrowth,j=this.state,P=j.isTruncated,A=j.isExpanded,I=j.truncatedContent,M=j.previewImg,N=j.viewPort,R=j.contentCollapsed,D=c||s,L=D&&!i?!A:P&&!A,F=I||o,B="answer"===a.type?Object(O.a)(r):r,z=L?F:B,K=v.a.createElement(U,Y({itemProp:h,key:L,className:g()("RichContent-inner",{"RichContent-inner--collapsed":R}),style:L&&i?{maxHeight:E}:null,tag:"span",onRef:function(t){e.content=t},data:a,html:z,viewPort:N,prefix:L&&x},L&&{onClick:S||this.handleExpand}),!i&&L&&v.a.createElement(b.default,{preset:"plain",className:"ContentItem-more"},y,v.a.createElement(w.a,{name:"arrow",className:"ContentItem-arrowIcon"})),M&&v.a.createElement(_.a,{img:M,onClose:function(){return e.setState({previewImg:null})}})),q=A?v.a.createElement(k.a,{rootMargin:"-240px 0px",onObserve:this.handleObserve},K):K;return v.a.createElement("div",{className:g()("RichContent",C,{"is-collapsed":L,"RichContent--unescapable":i,"RichContent--withMask":!1,"RichContent--experiment":T}),ref:function(t){e.el=t},onClick:this.handlePreview},!L&&c,!i&&L&&l&&v.a.createElement(t.Cover,{url:l,hasVideo:f,onClick:this.handleExpand}),q,u||"function"==typeof p&&p(A,this.handleExpand),!L&&s,this.renderActions())}}]),t}(m.PureComponent),W.contextTypes={currentUser:h.a.object},W.propTypes={unescapable:h.a.bool,expanded:h.a.bool,noCollapsed:h.a.bool,limit:h.a.number,limitWithImage:h.a.number,collapsedHeight:h.a.number,html:h.a.string,excerpt:h.a.string,truncateDisabled:h.a.bool,before:h.a.node,after:h.a.node,prefix:h.a.node,extra:h.a.node,renderCanExpandExtra:h.a.func,topExcludedHeight:h.a.number,onPositionStatusChange:h.a.func,type:h.a.string,data:h.a.object,cover:h.a.string,hasVideo:h.a.bool,truncateHTMLOptions:h.a.object,expandText:h.a.string,onToggleExpend:h.a.func},W.defaultProps={limit:160,limitWithImage:100,expanded:!1,unescapable:!1,topExcludedHeight:60,excerpt:"",hasVideo:!1,data:{},collapsedHeight:400},W.Cover=function(e){var t=e.url,n=e.hasVideo,r=u(e,["url","hasVideo"]);return v.a.createElement("div",Y({className:g()("RichContent-cover",{"RichContent-cover--mobile":!1})},r),v.a.createElement("div",{className:"RichContent-cover-inner"},v.a.createElement(C.a,{thumbnail:Object(T.a)(t,"60w"),url:Object(T.a)(t,"400x224"),alt:"cover"})),n&&v.a.createElement("div",{className:"RichContent-cover-play"},v.a.createElement(w.a,{name:"play",width:50,height:50})))},G);t.b=J},740:function(e,t,n){"use strict";function r(){for(var e=void 0;void 0===e||o.hasOwnProperty(e)||!isNaN(+e);)e=Math.floor(Math.random()*a).toString(32);return o[e]=!0,e}var o={},a=Math.pow(2,24);e.exports=r},741:function(e,t,n){"use strict";function r(e,t,n,r){if(e===n)return!0;if(!n.startsWith(e))return!1;var o=n.slice(e.length);return!!t&&(o=r?r(o):o,i.contains(o,t))}function o(e){return"Windows"===a.platformName?e.replace(/^\s*NT/,""):e}var a=n(1048),i=n(1051),s=n(1052),c=n(302),u={isBrowser:function(e){return r(a.browserName,a.browserFullVersion,e)},isBrowserArchitecture:function(e){return r(a.browserArchitecture,null,e)},isDevice:function(e){return r(a.deviceName,null,e)},isEngine:function(e){return r(a.engineName,a.engineVersion,e)},isPlatform:function(e){return r(a.platformName,a.platformFullVersion,e,o)},isPlatformArchitecture:function(e){return r(a.platformArchitecture,null,e)}};e.exports=s(u,c)},743:function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},744:function(e,t,n){"use strict";function r(e){var t=e.inline,n=e.title,r=e.icon,o=e.button,a=e.avatar,i=e.className,c=e.width,l=e.height,f=e.bottom,p=e.right,d=e.style,h=void 0===d?{}:d;return c&&(h.width=c+"px"),l&&(h.height=l+"px"),f&&(h.marginBottom=f+"px"),p&&(h.marginRight=p+"px"),s.a.createElement("div",{className:u()("Holder",i,{"Holder--inline":t,"Holder--title":n,"Holder--icon":r,"Holder--button":o,"Holder--avatar":a}),style:h})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=n.n(o),i=n(0),s=n.n(i),c=n(2),u=n.n(c),l=n(780);n.n(l);r.propTypes={inline:a.a.bool,title:a.a.bool,icon:a.a.bool,button:a.a.bool,avatar:a.a.bool,width:a.a.string,height:a.a.string,bottom:a.a.string,right:a.a.string,style:a.a.object},t.default=r},745:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),c=n(2),u=n.n(c),l=n(3),f=n(48),p=n.n(f),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.handleSubmit=function(){var e=a.props,t=e.onSubmit;(0,e.onCancel)(),t()},i=n,o(a,i)}return a(t,e),d(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.subtitle,r=e.shown,o=e.onCancel,a=e.className,i=e.isMobile,c=s.a.createElement(l.default,{key:"confirm",preset:"primary",color:"blue",onClick:this.handleSubmit},"确认"),d=s.a.createElement(l.default,{key:"cancel",onClick:o},"取消"),h=i?[d,c]:[c,d];return s.a.createElement(p.a,{wrapperClassName:"ConfirmModal-wrapper",className:u()("ConfirmModal",a),title:t,size:i?"small":"default",subtitle:n,onClose:o,closeButton:!1,buttonGroupOnly:!0},r&&s.a.createElement(f.ModalButtonGroup,{direction:i?"horizontal":"vertical"},h))}}]),t}(i.Component);t.a=h},748:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return c});var r=n(88),o=n.n(r),a=n(93),i=function(e,t){var n=[];return o()(function(){for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];n.push(o),setTimeout(function(){n.length&&(t(n),n.length=0)},e)},function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return String(t)})}(550,function(e){return Object(a.default)("/lastread/touch",{method:"POST",form:{items:JSON.stringify(e)}})}),s="read",c="touch";t.c=i},749:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return{x:e.left+e.width/2,y:e.top+e.height/2}}var s,c,u=n(1),l=n.n(u),f=n(0),p=n.n(f),d=n(2),h=n.n(d),m=n(138),v=n(145),y=n(33),g=n(85),b=n(810),w=(n.n(b),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),E={top:10,left:20},O={top:0,left:0},C=(c=s=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={transEnded:!1,rect:null,translate:null,scale:null,url:null},e.getBoundingClientRect=function(){var t=e.props,n=t.img,r=t.data,o=n.getBoundingClientRect(),a=o.left,i=o.top,s=o.width,c=o.height,u=r.width,l=r.height,f={left:a,top:i,width:s,height:c},p=1;return u>l?(f.height=c,p=c/l,f.width=u*p,f.left=a+(s-f.width)/2,f.top=i+(c-f.height)/2):u<l&&(f.width=s,p=s/u,f.height=l*p,f.left=a+(s-f.width)/2,f.top=i+(c-f.height)/2),f},e.handleClick=e.handleClick.bind(e),e.handleTransEnd=e.handleTransEnd.bind(e),e.handleOriginLoad=e.handleOriginLoad.bind(e),e}return a(t,e),_(t,[{key:"componentWillMount",value:function(){v.hide();var e=this.props,t=e.img,n=e.isOriginalUrl,r=this.loadImg=new Image;r.src=Object(m.a)(t.dataset.original,"r"),r.addEventListener("load",this.handleOriginLoad),this.setState({rect:!1===n?this.getBoundingClientRect():t.getBoundingClientRect()})}},{key:"componentDidMount",value:function(){var e=this,t=this.props.img,n=t.dataset.rawwidth,r=t.naturalWidth;setTimeout(function(){return e.setState(w({},e.computeTransition(e.state.rect,{width:n||r})))})}},{key:"componentWillUnmount",value:function(){this.loadImg.removeEventListener("load",this.handleOriginLoad),v.show()}},{key:"handleClick",value:function(){this.setState({translate:null,scale:null})}},{key:"handleTransEnd",value:function(){var e=this.state,t=e.translate,n=e.scale,r=this.props.onClose;t&&n?(this.setState({transEnded:!0}),this.scrollNode.style.overflow="auto"):r()}},{key:"handleOriginLoad",value:function(e){this.setState({url:e.target.src})}},{key:"computeTransition",value:function(e,t){var n=this.props,r=n.transitionType,o=n.data,a=Object(y.default)(navigator.userAgent).Mobile?O:E,s=a.top,c=a.left,u=window,l=u.innerWidth,f=u.innerHeight,p={left:0,top:0,width:l,height:f},d=i(p),h={width:p.width-2*c,height:p.height-2*s},m={},v={},g=void 0;return 1===r?(m.width=h.width>o.width?o.width:h.width,g=m.width/o.width,m.height=o.height*g,v={x:(h.width-m.width)/2+c,y:m.height<h.height?(h.height-m.height)/2+s:E.top}):(m.width=h.width>t.width?t.width:h.width,g=m.width/e.width,m.height=e.height*g,v={x:d.x-e.width/2,y:(m.height<h.height?d.y:E.top+m.height/2)-e.height/2}),{translate:v,scale:g}}},{key:"render",value:function(){var e=this,t=this.props,n=t.img,r=t.isOriginalUrl,o=t.data,a=t.transitionType,i=this.state,s=i.translate,c=i.scale,u=i.rect,l=i.url,f=i.transEnded,d=s&&c,v=1,b="",w=void 0;if(1===a){var _=Object(y.default)(navigator.userAgent).Mobile?O:E,C=_.left;w=Math.min(window.innerWidth-2*C,o.width);var k=u.width/w;b=d?"translate3d("+s.x+"px, "+s.y+"px, 0) scale3d(1, 1, 1) ":"translate3d("+u.left+"px, "+u.top+"px, 0) scale3d("+k+", "+k+", 1) ",v=d?1:0}else b=d?"translate3d("+s.x+"px ,"+s.y+"px,0) scale3d("+c+","+c+",1) ":"translate3d("+u.left+"px,"+u.top+"px,0)";return p.a.createElement(g.default,null,p.a.createElement("div",{className:h()("ImageView",{"is-active":d}),style:{paddingBottom:E.top},onClick:this.handleClick},p.a.createElement("div",{className:"ImageView-inner",ref:function(t){e.scrollNode=t}},p.a.createElement("img",{ref:function(t){e.imgEl=t},src:!1===r?Object(m.a)(n.dataset.original,"r"):f&&l||n.src,className:h()("ImageView-img",{"ImageView-transformOrigin":1===a}),style:{width:w||u.width,transform:b,opacity:v},onTransitionEnd:this.handleTransEnd,alt:"preview"}))))}}]),t}(f.Component),s.propTypes={img:l.a.object.isRequired,onClose:l.a.func.isRequired},c);t.a=C},753:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){return e.getStyle()===t.getStyle()}function s(e,t){return e.getEntity()===t.getEntity()}var c=n(726),u=n(795),l=c.List,f=c.Map,p=c.OrderedSet,d=c.Record,h=p(),m={key:"",type:"unstyled",text:"",characterList:l(),depth:0,data:f()},v=d(m),y=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.getKey=function(){return this.get("key")},t.prototype.getType=function(){return this.get("type")},t.prototype.getText=function(){return this.get("text")},t.prototype.getCharacterList=function(){return this.get("characterList")},t.prototype.getLength=function(){return this.getText().length},t.prototype.getDepth=function(){return this.get("depth")},t.prototype.getData=function(){return this.get("data")},t.prototype.getInlineStyleAt=function(e){var t=this.getCharacterList().get(e);return t?t.getStyle():h},t.prototype.getEntityAt=function(e){var t=this.getCharacterList().get(e);return t?t.getEntity():null},t.prototype.findStyleRanges=function(e,t){u(this.getCharacterList(),i,e,t)},t.prototype.findEntityRanges=function(e,t){u(this.getCharacterList(),s,e,t)},t}(v);e.exports=y},754:function(e,t,n){"use strict";function r(e){return p<=e&&e<=m}function o(e,t){if(0<=t&&t<e.length||f(!1),t+1===e.length)return!1;var n=e.charCodeAt(t),r=e.charCodeAt(t+1);return p<=n&&n<=d&&h<=r&&r<=m}function a(e){return v.test(e)}function i(e,t){return 1+r(e.charCodeAt(t))}function s(e){if(!a(e))return e.length;for(var t=0,n=0;n<e.length;n+=i(e,n))t++;return t}function c(e,t,n){if(t=t||0,n=void 0===n?1/0:n||0,!a(e))return e.substr(t,n);var r=e.length;if(r<=0||t>r||n<=0)return"";var o=0;if(t>0){for(;t>0&&o<r;t--)o+=i(e,o);if(o>=r)return""}else if(t<0){for(o=r;t<0&&0<o;t++)o-=i(e,o-1);o<0&&(o=0)}var s=r;if(n<r)for(s=o;n>0&&s<r;n--)s+=i(e,s);return e.substring(o,s)}function u(e,t,n){t=t||0,n=void 0===n?1/0:n||0,t<0&&(t=0),n<0&&(n=0);var r=Math.abs(n-t);return t=t<n?t:n,c(e,t,r)}function l(e){for(var t=[],n=0;n<e.length;n+=i(e,n))t.push(e.codePointAt(n));return t}var f=n(729),p=55296,d=56319,h=56320,m=57343,v=/[\uD800-\uDFFF]/,y={getCodePoints:l,getUTF16Length:i,hasSurrogateUnit:a,isCodeUnitInSurrogateRange:r,isSurrogatePair:o,strlen:s,substring:u,substr:c};e.exports=y},755:function(e,t,n){var r=n(954)("wks"),o=n(853),a=n(777).Symbol,i="function"==typeof a;(e.exports=function(e){return r[e]||(r[e]=i&&a[e]||(i?a:o)("Symbol."+e))}).store=r},756:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(t.ANNOTATION_TYPE_ANSWER=0,t.ANNOTATION_TYPE_PIN=1,t.ANNOTATION_TYPE_ARTICLE=2,t.ANNOTATION_REASON_OTHER_CODE=32300);t.ANNOTATION_REASON_CANCEL_CODE=32305,t.ANNOTATION_REASONS=[{code:32309,description:"收到大量反对"},{code:32301,description:"可能包含争议观点"},{code:32302,description:"可能存在事实性错误",placeholder:"为了避免对您造成误导，请谨慎甄别"},{code:32303,description:"可能涉及金钱往来",placeholder:"为保障您的财产安全，请谨慎判断"},{code:32304,description:"可能包含剧透"},{code:32306,description:"可能包含具体的医疗建议",placeholder:"网络上的医疗建议仅供参考，如有需要请咨询专业人士或前往医疗机构就医"},{code:32307,description:"可能包含令人不适的图片或视频",placeholder:"为保障您的阅读体验，请谨慎浏览"},{code:32308,description:"已有回应"},{code:r,description:"其他"}]},757:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(1),l=r(u),f=n(0),p=r(f),d=n(12),h=n(6),m=r(h),v=n(259),y=r(v),g=function(e,t,n,r){return e?{card:{content:e}}:c({},t&&{card:t},n&&{list:n},r&&{attached_info_bytes:r})},b=function(e){function t(){var e,n,r,i;o(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.handleViewed=function(){var e=r.props.extra;setTimeout(function(){m.default.trackCardShow(r,{},e)})},r.trackEvent=function(e,t,n){m.default.trackEvent(e,t,c({},r.props.extra,n))},i=n,a(r,i)}return i(t,e),s(t,[{key:"componentDidMount",value:function(){this.setModule()}},{key:"componentDidUpdate",value:function(){this.setModule()}},{key:"setModule",value:function(){var e=this.props,t=e.module,n=e.index,r=e.isAd,o=e.moduleName,a=e.content,i=e.list,s=e.card,c=e.attachedInfoBytes;if(t){var u=(0,d.findDOMNode)(this);u&&m.default.setModule(u,{module:t,index:n,is_ad:r,module_name:o},g(a,s,i,c))}}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.trackCardShow,r=e.children,o="string"==typeof r.type?r:(0,f.cloneElement)(r,{trackEvent:this.trackEvent});return n?p.default.createElement(y.default,{id:t,onViewed:this.handleViewed},o):o}}]),t}(f.Component);b.propTypes={id:l.default.string,module:l.default.string,index:l.default.string,isAd:l.default.bool,content:l.default.object,extra:l.default.object,trackCardShow:l.default.bool,attachedInfoBytes:l.default.string},b.defaultProps={id:null,module:null,index:null,isAd:!1,content:null,extra:null,attachedInfoBytes:null,trackCardShow:!1},t.default=b},758:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,s,c=n(1),u=n.n(c),l=n(0),f=n.n(l),p=n(5),d=(n.n(p),n(6)),h=n.n(d),m=n(243),v=n(36),y=n(244),g=n(280),b=n(81),w=n(286),_=n(727),E=n(817),O=(n.n(E),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),C=(s=i=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),O(t,[{key:"componentDidMount",value:function(){var e=this.props.user;h.a.setModule(this,{module:"UserItem"},{card:{content:{type:"User",member_hash_id:e.id,follower_num:e.followerCount}}})}},{key:"renderRewardDetails",value:function(){var e=this.props.user,t=e.amount,n=e.rewardCreated;return f.a.createElement("div",{className:"ContentItem-rewardDetails"},f.a.createElement("p",{className:"ContentItem-rewardAmount"},t&&"赞赏了 ￥"+t/100),f.a.createElement("p",{className:"ContentItem-rewardTime"},Object(m.d)(n)))}},{key:"render",value:function(){var e=this.context.currentUser,t=this.props,n=t.user,r=n.urlToken,o=n.isFollowed,a=n.isFollowing,i=n.answerCount,s=n.articlesCount,c=n.followerCount,u=t.user,l=t.isRewardList,p=t.action,d=t.meta,h=t.status,m=t.noTrackCardShow,E=!r,O=e&&e.urlToken===r,C=void 0!==p?p:!O&&!E&&f.a.createElement(y.a,{id:u.urlToken,type:u.type,preset:y.a.PRESETS.primary,gender:u.gender,isFollowing:a}),k=void 0!==d?d:E||f.a.createElement(w.a,{user:u}),S=void 0!==h?f.a.createElement(_.d,null,h):!E&&f.a.createElement(_.d,null,Boolean(i)&&Object(v.b)(i)+" 回答",Boolean(s)&&Object(v.b)(s)+" 文章",Boolean(c)&&Object(v.b)(c)+" 关注者");return f.a.createElement(_.e,{data:u,image:f.a.createElement(b.a,{className:"UserItem-avatar",avatar:!0,avatarProps:{size:60},user:u,target:"_blank"}),title:f.a.createElement("div",{className:"UserItem-title"},f.a.createElement(b.a,{className:"UserItem-name",user:u,target:"_blank"}),f.a.createElement(g.a,{isFollowing:a,isFollowed:o})),meta:f.a.createElement("div",null,k,S),noTrackCardShow:m,extra:l?this.renderRewardDetails():C})}}]),t}(l.Component),i.contextTypes={currentUser:u.a.object,authRequired:u.a.func},i.propTypes={action:u.a.node,status:u.a.node,meta:u.a.node},s);t.a=Object(p.connect)()(C)},760:function(e,t,n){var r=n(777),o=n(743),a=n(948),i=n(801),s=function(e,t,n){var c,u,l,f=e&s.F,p=e&s.G,d=e&s.S,h=e&s.P,m=e&s.B,v=e&s.W,y=p?o:o[t]||(o[t]={}),g=y.prototype,b=p?r:d?r[t]:(r[t]||{}).prototype;p&&(n=t);for(c in n)(u=!f&&b&&void 0!==b[c])&&c in y||(l=u?b[c]:n[c],y[c]=p&&"function"!=typeof b[c]?n[c]:m&&u?a(l,r):v&&b[c]==l?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):h&&"function"==typeof l?a(Function.call,l):l,h&&((y.virtual||(y.virtual={}))[c]=l,e&s.R&&g&&!g[c]&&i(g,c,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},761:function(e,t,n){var r=n(802),o=n(1149),a=n(1150),i=Object.defineProperty;t.f=n(762)?Object.defineProperty:function(e,t,n){if(r(e),t=a(t,!0),r(n),o)try{return i(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},762:function(e,t,n){e.exports=!n(803)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},763:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function l(e,t){var n=t.id,r=t.type,o=e.entities.users,a=e[U[r]]||{},i=a.voters,s=void 0===i?{}:i,c=a.concernedUpvoters,l=void 0===c?{}:c,f=s[n]||{isFetching:!1,isDrained:!1,order:"normal",ids:[]},p=f.isFetching,d=f.isDrained,h=f.order,m=f.ids,v=l[n]||{ids:[]},y=v.ids;return{isFetching:p,isDrained:d,order:h,items:[].concat(u(y),u(m.filter(function(e){return!y.includes(e)}))).map(function(e){return o[e]})}}var f,p,d,h,m,v,y=n(0),g=n.n(y),b=n(5),w=n(83),_=n(260),E=n(247),O=n(151),C=n(1),k=n.n(C),S=n(253),x=n(3),T=n(48),j=n.n(T),P=n(53),A=n(36),I=n(81),M=n(764),N=(n(873),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),R=(p=f=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.state={modalShown:!1},a.handleListHide=function(){return a.setState({modalShown:!1})},a.handleListShown=function(){return a.setState({modalShown:!0})},i=n,o(a,i)}return a(t,e),N(t,[{key:"componentWillReceiveProps",value:function(){var e=this.props.modalShown;e&&!this.state.modalShown&&this.setState({modalShown:e})}},{key:"render",value:function(){var e=this.props,t=e.voteupCount,n=e.upvotedFollowees,r=e.openable,o=e.type,a=e.too,i=e.isFetching,s=e.isDrained,c=e.items,u=e.onLoad;if(t<=0)return null;var l=this.state.modalShown,f=void 0,p="";return"pin"===o?f=Object(A.b)(t)+" 人为该"+P.ENTITY_TYPES_MAP[o]+"鼓掌":"column"===o?(f=Object(A.b)(t)+" 人关注",p="关注"):f=Object(A.b)(t)+" 人"+(a?"也":"")+("answer"===o?"赞同":"赞")+"了该"+P.ENTITY_TYPES_MAP[o],g.a.createElement("span",{className:"Voters"},g.a.createElement(S.CJKSpace,null,n.map(function(e,t){return g.a.createElement("span",{key:t},t>0&&"、",g.a.createElement(I.a,{key:t,noBadge:!0,user:e},e.name))}),n.length>0&&t-n.length>0&&"等",r?g.a.createElement(x.default,{preset:"plain",onClick:this.handleListShown},f):f),g.a.createElement(j.a,{size:"fullPage",onClose:this.handleListHide},l&&g.a.createElement(M.a,{isFetching:i,isDrained:s,text:p,items:c,voteupCount:t,onLoad:u})))}}]),t}(y.Component),f.propTypes={openable:k.a.bool,upvotedFollowees:k.a.array,id:k.a.oneOfType([k.a.number,k.a.string]),type:k.a.oneOf(["pin","answer","article"]).isRequired,modalShown:k.a.bool},f.defaultProps={openable:!0},p),D=R,L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),U={answer:"answers",article:"articles",pin:"pins",column:"columns"},B=(d=Object(b.connect)(l,{loadAnswerVoters:w.n,loadArticleVoters:_.c,loadPinVoters:E.e,loadColumnsFollowers:O.c}))((v=m=function(e){function t(){var e,n,r,o;i(this,t);for(var a=arguments.length,c=Array(a),u=0;u<a;u++)c[u]=arguments[u];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.handleLoad=function(){var e=r.props,t=e.type,n=e.id,o=e.loadAnswerVoters,a=e.loadPinVoters,i=e.loadArticleVoters,s=e.loadColumnsFollowers;switch(t){case"answer":return o(n);case"pin":return a(n);case"article":return i(n);case"column":return s(n);default:return null}},o=n,s(r,o)}return c(t,e),F(t,[{key:"render",value:function(){return g.a.createElement(D,L({onLoad:this.handleLoad},this.props))}}]),t}(y.Component),m.propsTypes=L({},D.propsTypes),m.defaultProps=L({},D.defaultProps),h=v))||h;t.a=B},764:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,s,c=n(1),u=n.n(c),l=n(0),f=n.n(l),p=n(731),d=n(36),h=n(140),m=n(789),v=n(758),y=n(872),g=(n.n(y),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),w=(s=i=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),b(t,[{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,r=e.items,o=e.voteupCount,a=e.onLoad,i=e.text,s=e.isRewardList,c=e.notice,u={getContainer:function(e){return e}};return f.a.createElement("div",{className:"VoterList"},f.a.createElement(m.a,{header:Object(d.b)(o)+" 人"+(i||"赞同了")}),s&&c&&f.a.createElement("div",{className:"VoterList-description"},f.a.createElement("p",null,c)),f.a.createElement(h.default,g({className:"VoterList-content",isLoading:t,isDrained:n,onLoad:a,placeholder:f.a.createElement(h.PlaceHolder,{className:"List-item",withAvatar:!0})},u),r.map(function(e,t){return f.a.createElement(p.a,{key:t+"."+e.urlToken},f.a.createElement(v.a,{user:e,isRewardList:s,meta:null}))})))}}]),t}(l.Component),i.propTypes={isFetching:u.a.bool.isRequired,isDrained:u.a.bool.isRequired,items:u.a.array.isRequired,voteupCount:u.a.number.isRequired,text:u.a.string.isRequired,onLoad:u.a.func.isRequired,isRewardList:u.a.bool},s);t.a=w},765:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return function(t,n){var o=n().entities.lives[e],a=!o.isLiked;return t({API:{types:A.UPDATE_LIKED,endpoint:"v3/lives/"+e+"/like",method:a?"POST":"DELETE"},UPDATE:{request:{lives:r({},e,{isLiked:a,likedNum:o.likedNum+(a?1:-1)})},failure:{lives:r({},e,o)}}})}}function a(e){return function(t,n){var o=n().entities.liveCourses[e],a=!o.isLiked;return t({API:{types:A.UPDATE_COURSE_LIKED,endpoint:"v3/lives/course/"+e+"/like",method:a?"POST":"DELETE"},UPDATE:{request:{liveCourses:r({},e,{isLiked:a,likedNum:o.likedNum+(a?1:-1)})},failure:{liveCourses:r({},e,o)}}})}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){return function(t,n){var r=n().entities.ebooks[e],o=!(r.relationship||{}).voting;return t({API:{types:M.FOLLOW,method:o?"POST":"DELETE",endpoint:"v3/books/"+e+"/voters"},UPDATE:{request:{ebooks:i({},e,{relationship:I({},r.relationship,{voting:o}),voteupCount:r.voteupCount+(o?1:-1)})},failure:{ebooks:i({},e,r)}}})}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){return function(t,n){var r=n(),o=r.entities.promotions,a=o[e],i=a.voteupCount,s=a.voting,u=s?0:1;return t({API:{types:D.LIKE,endpoint:"v3/promotions/"+e+"/voters",query:{voting:u},method:"POST"},UPDATE:{request:{promotions:c({},e,{voteupCount:i+(s?-1:1),voting:u})},success:function(t){return{promotions:c({},e,t)}},failure:{promotions:c({},e,a)}},NOTIFICATION:{failure:R.a}})}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d,h,m,v,y=n(1),g=n.n(y),b=n(0),w=n.n(b),_=n(5),E=n(2),O=n.n(E),C=n(3),k=n(10),S=n(6),x=n.n(S),T=n(36),j=n(53),P=n(4),A=Object(P.a)("live",["UPDATE_LIKED","UPDATE_COURSE_LIKED"]),I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M=Object(P.a)("ebook",["FOLLOW","UNFOLLOW"]),N=n(260),R=n(14),D=Object(P.a)("promotion",["LIKE"]),L=n(247),F=n(13),U=(n(886),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),B={ebook:"updateEBookVoters",live:"updateLiveLiked",live_course:"updateLiveCourseLiked",article:"updateArticleLike",promotion:"updatePromotionLike",pin:"updatePinsLike"},z=(d=Object(_.connect)(null,{updateEBookVoters:s,updateLiveLiked:o,updateLiveCourseLiked:a,updateArticleLike:N.d,updatePromotionLike:u,updatePinsLike:L.f}))((v=m=function(e){function t(){var e,n,r,o;l(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleToggleVote=r.context.authRequired(function(e){var t=r.props,n=t.liked,o=t.type,a=t.id,i=!n;x.a.trackEvent(e.target,{action:i?"Upvote":"UnUpvote",element:"Button"});var s=B[o];r.props[s](a,i)},F.C.vote),o=n,f(r,o)}return p(t,e),U(t,[{key:"render",value:function(){var e=this.props,t=e.liked,n=e.count,r=e.className,o=e.icon,a=void 0===o?"like":o,i=e.disabled,s=e.disableAuth,c=e.handleToggleGuide;return w.a.createElement(C.default,{className:O()("LikeButton",{"is-active":t},r),onClick:s?c:this.handleToggleVote,disabled:i},w.a.createElement(k.a,{name:a}),Object(T.c)(n))}}]),t}(b.Component),m.contextTypes={authRequired:g.a.func},m.propTypes={type:g.a.oneOf(j.ENTITY_TYPES).isRequired,id:g.a.oneOfType([g.a.number,g.a.string]).isRequired,icon:g.a.string,liked:g.a.bool,count:g.a.number},h=v))||h;t.a=z},766:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var n=t.id,r=e.entities.topics,o=e.loading.local;return{topic:r[n],isLoading:Boolean(o["topic/"+n])}}function c(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p,d,h,m,v,y,g=n(1),b=n.n(g),w=n(0),_=n.n(w),E=n(5),O=n(2),C=n.n(O),k=n(51),S=n(25),x=n.n(S),T=n(3),j=n(248),P=n(257),A=n(6),I=n.n(A),M=n(139),N=n(49),R=n(13),D=n(52),L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),U=(d=p=function(e){function t(){var e,n,r,i;o(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.load=function(){var e=r.props,t=e.dispatch,n=e.id;t(Object(D.p)(n))},r.track=function(){var e=r.props.topic;r.hoverCardElement&&e&&(I.a.setModule(r.hoverCardElement,{module:"TopicItem"},{card:{content:{type:"Topic",token:e.id,item_num:e.questionsCount,follower_num:e.followersCount}}}),I.a.trackCardShow(r.hoverCardElement))},r.handleFollow=r.context.authRequired(function(){var e=!r.props.topic.isFollowing;I.a.trackEvent(r.hoverCardElement,{action:e?"Follow":"UnFollow",element:"Button"});var t=r.props,n=t.dispatch,o=t.id;n(Object(D.w)(o))},R.C.follow),r.handleOpen=function(){r.load(),r.track()},i=n,a(r,i)}return i(t,e),F(t,[{key:"isTopicReady",value:function(){var e=this.props.topic||{},t=e.questionsCount,n=e.followersCount,r=e.bestAnswersCount;return!(void 0===t&&void 0===n&&void 0===r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.toggler,o=t.topic,a=t.id,i=t.isLoading,s=t.onRef,c=r(t,["toggler","topic","id","isLoading","onRef"]),u=o||{},l=u.name,f=u.introduction,p=u.questionsCount,d=u.followersCount,h=u.bestAnswersCount,m=u.avatarUrl,v=u.isFollowing,y="//www.zhihu.com/topic/"+a;return _.a.createElement(P.b,L({toggler:n,preventCloseOnTarget:!0,isLoading:i,onOpen:this.handleOpen,size:"large"},c,{onRef:function(t){s&&"function"==typeof s&&s(t),e.hoverCardElement=t}}),_.a.createElement(P.a,{title:_.a.createElement("a",{target:"_blank",href:y},l),avatarUrl:m}),f&&_.a.createElement("div",null,_.a.createElement(M.a,{className:"HoverCard-description",html:f})),_.a.createElement("div",null,this.isTopicReady()&&_.a.createElement(j.a,null,_.a.createElement(j.a.Item,{tag:N.a,preset:"plain",a:!0,to:y+"/questions",name:"问题",value:p,target:"_blank"}),_.a.createElement(j.a.Item,{tag:N.a,preset:"plain",a:!0,to:y+"/top-answers",name:"精华",value:h,target:"_blank"}),_.a.createElement(j.a.Item,{tag:N.a,preset:"plain",a:!0,to:y+"/followers",name:"关注者",target:"_blank",value:d})),_.a.createElement("div",{className:"HoverCard-buttons"},o&&_.a.createElement(T.default,{preset:"primary",color:v?"grey":"blue",onClick:this.handleFollow},v?"已关注":"关注话题"))))}}]),t}(w.Component),p.contextTypes={authRequired:b.a.func},d),B=Object(E.connect)(s)(U),z=n(38),K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),H=(h=Object(E.connect)(function(e){return{ua:Object(z.j)(e)}}))((y=v=function(e){function t(){return u(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),q(t,[{key:"render",value:function(){var e=this.props,t=e.ua,n=e.topic,r=n.name,o=n.avatarUrl,a=n.id,i=e.avatar,s=e.avatarProps,u=e.noHoverCard,l=e.noLink,f=e.style,p=e.className,d=e.children,h=c(e,["ua","topic","avatar","avatarProps","noHoverCard","noLink","style","className","children"]),m=void 0===u?t.Mobile:u,v=void 0;v=i?_.a.createElement(k.default,K({className:"TopicLink-avatar",url:o,alt:r},s)):d||r,l||m||(v=_.a.createElement(B,{toggler:v,id:a}));var y=l?"span":"a";return _.a.createElement(y,K({style:f,className:C()("TopicLink",p),href:"//www.zhihu.com/topic/"+a,target:"_blank"},x()(h,["dispatch"])),v)}}]),t}(w.Component),v.propTypes={topic:b.a.object.isRequired,user:b.a.object,avatar:b.a.bool,noHoverCard:b.a.bool,noLink:b.a.bool,style:b.a.object,className:b.a.string,children:b.a.node},v.defaultProps={avatar:!1,noLink:!1},m=y))||m;t.a=H},769:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var o=["DIV","P","BLOCKQUOTE","PRE","CODE","OL","UL","H1","H2","H3","H4","H5","H6"],a=function(e){return o.includes(e.nodeName)||e.classList&&(e.classList.contains("video-box")||e.classList.contains("link-box")||e.classList.contains("origin_image")||e.classList.contains("content_image"))};t.a=function(e){if("undefined"==typeof window)return e;if(-1!==e.indexOf("<p>"))return e;var t=document,n=t.createElement("div");n.innerHTML=e;var o=[].concat(r(n.childNodes)),i=!0,s=!1,c=void 0;try{for(var u,l=o[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var f=u.value;if("BR"===f.nodeName&&f.previousSibling&&"BR"!==f.previousSibling.nodeName&&f.nextSibling&&"BR"===f.nextSibling.nodeName){for(var p=t.createElement("p"),d=f.previousSibling;d&&!a(d)&&("BR"!==d.nodeName||d.previousSibling&&"BR"!==d.previousSibling.nodeName&&!a(d.previousSibling));){var h=p.childNodes;h.length>0?p.insertBefore(d,h[0]):p.appendChild(d),d=f.previousSibling}p.childNodes.length>0&&(n.insertBefore(p,f),f.nextSibling.parentNode.removeChild(f.nextSibling),f.parentNode.removeChild(f))}}}catch(e){s=!0,c=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw c}}return n.innerHTML}},770:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),f=r(l),p=n(0),d=r(p),h=n(33),m=r(h),v=n(804),y=n(48),g=r(y),b=n(249),w=n(41);n(806);var _={zhihu:"注册或登录",wechat:"使用微信快速登录",weibo:"使用微博快速登录",qq:"使用 QQ 快速登录"},E={qq:"qqconn",weibo:"sina",wechat:"wechat_mp"},O=function(e){function t(){var e,n,r,i;o(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.jumpToOAuthUrl=function(e){var t=r.props,n=t.redirectUrl,o=void 0===n?location.href:n,a=t.edition,i=t.utm,s=(0,w.extractSource)(o,a,i),c=s.utmSource,u=s.refSource,l=(0,m.default)(navigator.userAgent),f=l.isZhihu;if("zhihu"===e)return void(location.href=f?"zhihu://signin?next="+o:"https://www.zhihu.com/signin?next="+o+(c?"?utm_source="+c:""));location.href="https://www.zhihu.com/oauth/redirect/login/"+E[e]+"?next=/oauth/account_callback&from="+encodeURIComponent(o)+"&utm_source="+c+"&ref_source="+u},r.renderSignButtons=function(){var e=r.props.buttons;return"string"==typeof e?r.renderSingleSignButton({name:e}):e.map(function(e){return"string"==typeof e?r.renderSingleSignButton({name:e}):"object"===(void 0===e?"undefined":c(e))?r.renderSingleSignButton(e):null})},r.renderSingleSignButton=function(e){var t=e.name,n=e.text,o=e.fill,a=e.color,i="#fff"===o||"#ffffff"===o;return-1===Object.keys(_).indexOf(t)?null:d.default.createElement("button",{className:"SignInModal-button-"+t,key:t,style:{backgroundColor:o,borderColor:i?"#0f88eb":o,color:i?"#0f88eb":a},onClick:function(){r.jumpToOAuthUrl(t)}},n||_[t])},i=n,a(r,i)}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.utm,r=e.edition,o=r.yidianzixun,a=r.baidu,i=e.urlScheme,c=this.props.title||(a||!i?"":"打开 App 或")+"登录后继续操作";return o&&(c="打开知乎 App 继续操作"),d.default.createElement(g.default,{size:"small",className:"SignInModal",title:c,onClose:t},d.default.createElement(v.ZaModule,{module:"SignForm",moduleName:c,trackCardShow:!0},d.default.createElement("div",{className:"SignInModal-content"},i&&!a&&d.default.createElement(b.BaseOpenInAppButton,s({className:"SignInModal-openInAppButton",href:i},n),"立即打开",o?"":" App"),!o&&this.renderSignButtons())))}}]),t}(p.Component);O.propTypes={onClose:f.default.func.isRequired,urlScheme:f.default.string,redirectUrl:f.default.string,edition:f.default.object,buttons:f.default.oneOfType([f.default.array,f.default.string])},O.defaultProps={buttons:["zhihu"],edition:{},utm:{}},t.default=O},771:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=n(0),l=n.n(u),f=n(1),p=n.n(f),d=n(3),h=n(29),m=(n(781),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),v=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.state={logoutModalShown:!1},a.handleLogoutModalShow=function(){a.setState({logoutModalShown:!0})},a.handleLogoutModalHide=function(){a.setState({logoutModalShown:!1})},a.handleClick=function(){var e=a.context,t=e.currentUser,n=e.router;t&&t.urlToken?a.handleLogoutModalShow():n.push("https://www.zhihu.com/org/signup")},i=n,o(a,i)}return a(t,e),m(t,[{key:"render",value:function(){var e=this.state.logoutModalShown;return l.a.createElement(u.Fragment,null,l.a.createElement(d.default,{className:"OrgCreateButton",onClick:this.handleClick},"申请开通知乎机构号"),e&&l.a.createElement(h.default,{className:"OrgCreateButton-logoutModal",title:"开通提示",onClose:this.handleLogoutModalHide},l.a.createElement("p",null,"若想访问机构号注册页面，请您请先退出当前帐号登录状态"),l.a.createElement(h.ModalButtonGroup,null,l.a.createElement(d.default,{preset:"primary",color:"blue",onClick:function(){location.href="/logout?next=/org/signup"}},"退出登录"),l.a.createElement(d.default,{onClick:this.handleLogoutModalHide},"我再想想"))))}}]),t}(u.Component);v.contextTypes={currentUser:p.a.object,router:p.a.object};var y=v,g=(n(782),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),b=function(e){function t(){return i(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),g(t,[{key:"render",value:function(){var e=this;return l.a.createElement("footer",{className:"Footer",ref:function(t){e.footerEl=t}},l.a.createElement("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"//liukanshan.zhihu.com/"},"刘看山"),l.a.createElement("span",{className:"Footer-dot"}),l.a.createElement("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"/question/19581624"},"知乎指南"),l.a.createElement("span",{className:"Footer-dot"}),l.a.createElement("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"/terms"},"知乎协议"),l.a.createElement("span",{className:"Footer-dot"}),l.a.createElement("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"/terms/privacy"},"隐私政策"),l.a.createElement("br",null),l.a.createElement("a",{className:"Footer-item",target:"_blank",href:"/app"},"应用"),l.a.createElement("span",{className:"Footer-dot"}),l.a.createElement("a",{className:"Footer-item",target:"_blank",href:"/careers"},"工作"),l.a.createElement("span",{className:"Footer-dot"}),l.a.createElement(y,{className:"Footer-item"}),l.a.createElement("br",null),l.a.createElement("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"https://zhuanlan.zhihu.com/p/28561671"},"侵权举报"),l.a.createElement("span",{className:"Footer-dot"}),l.a.createElement("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"http://www.12377.cn"},"网上有害信息举报专区"),l.a.createElement("br",null),l.a.createElement("span",{className:"Footer-item"},"违法和不良信息举报：010-82716601"),l.a.createElement("br",null),l.a.createElement("a",{className:"Footer-item",target:"_blank",href:"/jubao"},"儿童色情信息举报专区"),l.a.createElement("br",null),l.a.createElement("a",{className:"Footer-item",target:"_blank",href:"/contact"},"联系我们"),l.a.createElement("span",null," © 2018 知乎"))}}]),t}(u.Component);t.a=b},772:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var A,I,M,N,R,D,L,F,U,B,z,K,q,H,V,W,G,Y,Z=n(1),X=n.n(Z),J=n(0),Q=n.n(J),$=n(2),ee=n.n($),te=n(5),ne=n(15),re=n(253),oe=n(11),ae=(n(770),n(864)),ie=n.n(ae),se=n(868),ce=n.n(se),ue=n(870),le=n.n(ue),fe=n(3),pe=n(10),de=n(39),he=n(783),me=n(54),ve=n(24),ye=n(6),ge=n.n(ye),be=n(249),we=n(81),_e=n(727),Ee=n(732),Oe=n(763),Ce=n(83),ke=n(8),Se=n(22),xe=n(4),Te=n(13),je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pe=je({},Object(xe.a)("collaboration",["ADD_ANNOTATION","CANCEL_ANNOTATION"])),Ae=function(e){return e===Te.b?"answers":e===Te.d?"pins":e===Te.c?"articles":null},Ie=function(e,t,n,o){return{API:{types:Pe.ADD_ANNOTATION,endpoint:"v3/collaboration/annotation",method:"POST",body:Object(Se.a)(Object(ke.decamelizeKeys)({objectType:e,urlToken:t,reason:n,detail:o}))},UPDATE:{success:function(n){var o=Ae(e);return o?r({},o,r({},t,n)):null}}}},Me=function(e,t,n,o){return{API:{types:Pe.CANCEL_ANNOTATION,endpoint:"v3/collaboration/annotation_cancel",method:"POST",body:Object(Se.a)(Object(ke.decamelizeKeys)({objectType:e,urlToken:t,reason:n,detail:o}))},UPDATE:{success:function(n){var o=Ae(e);return o?r({},o,r({},t,je({},n,{annotationDetail:null}))):null}}}},Ne=n(14),Re=n(95),De=n(874),Le=n.n(De),Fe=n(251),Ue=n(38),Be=n(735),ze=n(736),Ke=n(150),qe=n(148),He=n(832),Ve=n(142),We=n(818),Ge=n(739),Ye=n(26),Ze=n.n(Ye),Xe=n(785),Je=(n(878),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Qe=(I=A=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),Je(t,[{key:"render",value:function(){var e=this.props.activateReward;return Q.a.createElement("div",{className:"Reward"},Q.a.createElement("button",{className:"Reward-activateBtn",onClick:e},"开启赞赏"),Q.a.createElement("div",{className:"Reward-activateHint"},"赞赏开启后，读者将可以付费支持你的创作。"))}}]),t}(J.Component),A.propTypes={activateReward:X.a.func},I),$e=(n(879),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),et=(N=M=function(e){function t(){return s(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),$e(t,[{key:"render",value:function(){var e=this.props,t=e.tagline,n=e.activateReward,r=e.totalMoney,o=e.showRewarders;return Q.a.createElement("div",null,Q.a.createElement("div",{className:"Reward-tagline"},t||Te.i,Q.a.createElement("a",{className:"Reward-editButton",onClick:n},Q.a.createElement(pe.a,{left:!0,name:"modify"}),Q.a.createElement("span",null,"编辑"))),Boolean(r)&&Q.a.createElement("div",{className:"Reward-money"},Q.a.createElement("span",{onClick:o},"￥ ",r.toFixed(2))))}}]),t}(J.Component),M.propTypes={activateReward:X.a.func,tagline:X.a.string,totalMoney:X.a.number,showRewarders:X.a.func},N),tt=n(48),nt=n.n(tt),rt=n(764),ot=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),at=(D=R=function(e){function t(){return l(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),ot(t,[{key:"render",value:function(){var e=this.props,t=e.modalShown,n=e.onLoad,r=e.items,o=e.voteupCount,a=e.isRewardList,i=e.onClose,s=e.notice;return Q.a.createElement(nt.a,{size:"fullPage",onClose:i},t&&Q.a.createElement(rt.a,{items:r,text:"赞赏了",isFetching:!1,isDrained:!1,voteupCount:o,onLoad:n,isRewardList:a,notice:s}))}}]),t}(J.Component),R.propTypes={onLoad:X.a.func,modalShown:X.a.bool},D),it=n(36),st=n(284),ct=n(80),ut=(n(880),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),lt=(L=Object(ct.a)({module:"UserList",moduleName:"*** 人已赞赏"}))((B=U=function(e){function t(){var e,n,r,o;d(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={hoverName:""},r.hoverUser=function(e){r.setState({hoverName:e.target.dataset.name})},o=n,h(r,o)}return m(t,e),ut(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.users,r=t.handleListShown,o=t.rewardMemberCount,a=t.onUserClick,i=this.state.hoverName,s=Object(st.a)(n).slice(0,5);return Q.a.createElement("div",{className:"Reward-count"},Q.a.createElement("p",{className:"Reward-User-text",onClick:r},Object(it.b)(o)+" 人已赞赏"),Q.a.createElement("div",null,s.map(function(t,n){return Q.a.createElement(ne.Link,{key:n,to:"//www.zhihu.com/"+t.userType+"/"+t.urlToken,className:"Reward-User-img","data-hover-title":i,target:"_blank",onClick:a},Q.a.createElement("img",{src:t.avatarUrl,className:"Reward-User-avatar","data-name":t.name,"data-index":n,onMouseOver:e.hoverUser,alt:"赞赏用户"}))}),o>6&&Q.a.createElement("span",{className:"Reward-MoreUser",onClick:r},Q.a.createElement("i",null),Q.a.createElement("i",null),Q.a.createElement("i",null))))}}]),t}(J.Component),U.propTypes={users:X.a.array,handleListShown:X.a.func,rewardMemberCount:X.a.number,onUserClick:X.a.func},U.defaultProps={users:[]},F=B))||F,ft=lt,pt=(n(881),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),dt=(K=z=function(e){function t(){return v(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),pt(t,[{key:"render",value:function(){var e=this.props,t=e.rewardMemberCount,n=e.handleListShown,r=e.isAuthor,o=e.users,a=e.onUserClick;return t?Q.a.createElement(ft,{users:o,onUserClick:a,handleListShown:n,rewardMemberCount:t}):Q.a.createElement("div",{className:"Reward-countZero"},r?"还没有人赞赏。":"还没有人赞赏，快来当第一个赞赏的人吧！")}}]),t}(J.Component),z.propTypes={rewardMemberCount:X.a.number,handleListShown:X.a.func,isAuthor:X.a.bool,users:X.a.array,onUserClick:X.a.func},K),ht=(n(882),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),mt=(H=q=function(e){function t(){return b(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _(t,e),ht(t,[{key:"render",value:function(){var e=this.props,t=e.tagline,n=e.onClick;return Q.a.createElement("div",null,Q.a.createElement("div",{className:"Reward-tagline"},t||Te.i),Q.a.createElement("button",{className:"Reward-rewardBtn",onClick:n},"赞赏"))}}]),t}(J.Component),q.propTypes={onClick:X.a.func,tagline:X.a.string},H),vt=(n(883),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),yt=function(){return n.e(0).then(n.bind(null,2152)).then(function(e){return e.TipjarDialog})},gt=(V=Object(te.connect)(null,{updateAnswerReward:Ce.v,updateArticleReward:Fe.l,createArticleTipjar:Fe.b,getRewardUserDetails:Fe.i,getPagingArticleRewardUser:Fe.f,getPagingArticleRewardUserDetails:Fe.g,getArticleRewardUser:Fe.e,updateEntitiesUsers:Fe.m,getRewardUser:Fe.h,createTipjar:Fe.c,removeTradeNumber:Fe.k,onRewardSuccess:Fe.j,showNotification:Ne.h}))((Y=G=function(e){function t(){var e,n,r,o;E(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=O(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={TipjarRender:!1,modalShown:!1,rewardModalShown:!1},r.onSubmitReward=function(e){ve.a.set("isRewardable",!0),r.updateReward(e),r.unactivateReward()},r.onPaySuccess=function(){var e=r.props,t=e.reward,n=e.currentUser,o=e.id,a=e.type,i=t[a][o].users,s=[n];Array.isArray(i)&&(i.push(n),s=i),r.props.onRewardSuccess(s,o,a),r.colseTijarDialog(),r.props.showNotification("你已赞赏成功！")},r.onLoad=function(e){"article"===r.props.type?"normal"===e?r.onLoadArticleRewardUser():r.onLoadArticleRewardUserDetails():r.onLoadRewardUser()},r.onLoadArticleRewardUser=function(){var e=r.props.id;r.props.getArticleRewardUser(e)},r.onLoadArticleRewardUserDetails=function(){var e=r.props,t=e.id;e.isAuthor?r.props.getPagingArticleRewardUserDetails(t):r.props.getPagingArticleRewardUser(t)},r.onLoadRewardUser=function(){var e=r.props,t=e.id;e.isAuthor?r.props.getRewardUserDetails(r.props.id):r.props.getRewardUser(t).then(function(e){var t=e.payload.data;if(t.length>0){var n={};t.forEach(function(e){n[e.urlToken]=e}),r.props.updateEntitiesUsers(n)}})},r.handleListShown=function(e){var t=r.props.onRewardUserMoreClick;t&&t(e),r.setState({modalShown:!0})},r.handleListHide=function(){r.setState({modalShown:!1})},r.updateReward=function(e){var t=r.props,n=t.type,o=t.id,a=t.rewardInfo.canOpenReward;if("article"===n){var i=!!a||void 0;r.props.updateArticleReward(o,e,i)}else r.props.updateAnswerReward(o,e)},r.activateReward=function(){r.setState({rewardModalShown:!0})},r.unactivateReward=function(){r.setState({rewardModalShown:!1})},r.showRewarders=function(){r.setState({modalShown:!0})},r.addReward=r.context.authRequired(function(e,t){var n=r.props,o=n.id;"article"===n.type?r.props.createArticleTipjar(o,e):r.props.createTipjar(o,e,t)},void 0,Ne.c),r.handleRewardButtonClick=function(e){var t=r.props.onRewardButtonClick;t&&t(e),r.setState({TipjarRender:!0})},r.colseTijarDialog=function(){r.setState({TipjarRender:!1})},r.removeTradeNumber=function(){var e=r.props,t=e.id,n=e.type;r.props.removeTradeNumber(t,n)},o=n,O(r,o)}return C(t,e),vt(t,[{key:"componentDidMount",value:function(){var e=this.props.rewardInfo;e&&e.isRewardable&&this.onLoad("normal")}},{key:"render",value:function(){var e=this,t=this.props,n=t.isAuthor,r=t.isMobile,o=t.id,a=t.reward,i=t.author,s=t.type,c=t.ua,u=t.rewardInfo,l=u.canOpenReward,f=u.isRewardable,p=u.tagline,d=u.rewardTotalMoney,h=u.rewardMemberCount,m=t.onRewardUserClick,v=this.state,y=v.TipjarRender,g=v.modalShown,b=v.rewardModalShown,w=Q.a.createElement(Xe.a,{submitRewardText:function(t){return e.onSubmitReward(t)},onClose:this.unactivateReward,tagline:p,edit:!0});if(n&&l)return Q.a.createElement("div",null,Q.a.createElement(Qe,{activateReward:this.activateReward}),b&&w);if(f){var _=a&&a[s][o]||{},E=_.tradeNumber,O=_.users,C=_.notice,k=Q.a.createElement(at,{modalShown:g,items:O,voteupCount:h,onLoad:this.onLoad,isRewardList:n,notice:C,onClose:this.handleListHide}),S=Q.a.createElement(dt,{rewardMemberCount:h,handleListShown:this.handleListShown,onUserClick:m,users:O,isAuthor:n});if(!n)return Q.a.createElement("div",{className:"Reward"},Q.a.createElement(mt,{tagline:p,onClick:this.handleRewardButtonClick}),S,b&&w,k,Q.a.createElement(Ze.a,{getComponent:yt,author:i,tagline:p,isMobile:r,ua:c,addReward:this.addReward,colseTijarDialog:this.colseTijarDialog,tradeNumber:E,removeTradeNumber:this.removeTradeNumber,onPaySuccess:this.onPaySuccess,TipjarRender:y,type:s}));var x=(Number(d)||0)/100;return Q.a.createElement("div",{className:"Reward"},Q.a.createElement(et,{tagline:p,activateReward:this.activateReward,totalMoney:x,showRewarders:this.showRewarders}),b&&w,k,S)}return null}}]),t}(Q.a.Component),G.propTypes={reward:X.a.object,isAuthor:X.a.bool,author:X.a.object,id:X.a.number,rewardInfo:X.a.object,currentUser:X.a.object,ua:X.a.object,type:X.a.string,isMobile:X.a.bool,onRewardButtonClick:X.a.func,onRewardUserClick:X.a.func,onRewardUserMoreClick:X.a.func},G.contextTypes={authRequired:X.a.func},G.defaultProps={rewardInfo:{},type:"answer"},W=Y))||W,bt=n(745),wt=(n(884),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),_t=["一","二","三"],Et=function(e){function t(){var e,n,r,o;k(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=S(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.getPrizeLevel=function(e){var t=r.props.answer.question.prize,n=void 0===t?{}:t,o=n.winnersAnswerTokens,a=n.prizes,i=null;return a&&o&&o.forEach(function(t,n){t.includes(e)&&null===i&&(i=a&&a[1]&&a[1].name?"得"+_t[n]+"等奖":"奖")}),i},o=n,S(r,o)}return x(t,e),wt(t,[{key:"render",value:function(){var e=this.props.answer,t=e.id,n=e.question.prize;n=void 0===n?{}:n;var r=n.status,o=this.getPrizeLevel(t);return r?o&&Q.a.createElement("div",{className:"BrandQuestionPrizeTip"},"该回答在有奖问答中获",o):null}}]),t}(J.Component),Ot=n(252),Ct=n(786);n(821);n.d(t,"a",function(){return Ft});var kt,St,xt,Tt,jt,Pt=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),At=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),It=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mt=function(e){return"plain"===e||"special-plain"===e},Nt=Mt,Rt=function(e){return"special-plain"===e},Dt={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},Lt=function(e){var t=e.thumbnail,n=e.voteupCount,r=e.question.id,o=e.id,a=e.createdTime,i=e.updatedTime,s=e.commentCount;return{image:t,upvoteCount:n,url:"https://www.zhihu.com/question/"+r+"/answer/"+o,dateCreated:new Date(1e3*a).toISOString(),dateModified:new Date(1e3*i).toISOString(),commentCount:s}},Ft=(kt=Object(ct.a)(function(e){var t=e.answer,n=e.trackCardShow,r=void 0===n||n;return{module:"AnswerItem",card:{has_image:Boolean(t.thumbnailExtraInfo&&"image"===t.thumbnailExtraInfo.type),has_video:Boolean(t.thumbnailExtraInfo&&"video"===t.thumbnailExtraInfo.type),content:{type:"Answer",token:t.id.toString(),upvote_num:t.voteupCount,comment_num:t.commentCount,publish_timestamp:new Date(t.createTime).getTime(),parent_token:t.question.id.toString(),author_member_hash_id:t.author.id,video_id:t.thumbnailExtraInfo&&t.thumbnailExtraInfo.videoId}},trackCardShow:r}}),St=Object(te.connect)(function(e,t){var n=e.entities,r=n.drafts,o=void 0===r?{}:r,a=n.questions,i=n.answers,s=e.reward,c=e.switches,u=t.answer,l=t.relatedTo,f=i[u.id]?It({},i[u.id]):u;a[f.question.id]&&(f.question=It({},u.question,a[f.question.id]));var p=["question","answer"].includes(l),d=Object(Ue.e)(e)&&p,h=Object(Ue.c)(e);return{draft:u&&o["question_"+u.question.id],answer:f,ua:Object(Re.i)(e),reward:s,switches:c,experiment:e.env.experiment,experimentGrowth:d,edition:h,referer:Object(Ue.h)(e),shouldOia:Object(Ue.i)(e)&&p,canOia:Object(Ue.a)(e),isWechat:e.env.userAgent.Wechat,concernedUpvoters:Object(Ce.d)(e,{id:u.id})}},{updateAnswerVote:Ce.z,updateAnswerThank:Ce.x,updateAnswerUnhelpful:Ce.y,updateAnswerReshipmentSettings:Ce.u,updateAnswerCommentPermission:Ce.t,updateAnswerCollapsed:Ce.s,updateAnswerStick:Ce.w,deleteAnswer:Ce.f,restoreAnswer:Ce.p,updateAnswer:Ce.r,loadAnswerForSettings:Ce.m,showNotification:Ne.h,addAnnotation:Ie,cancelAnnotation:Me,addRewardTagline:Fe.a,updateAnswerReward:Ce.v,getVoteDownReason:Ce.g,selectVoteDownReason:Ce.q,loadAnswerConcernedVoters:Ce.j}),kt(xt=Object(ne.withRouter)(xt=St((jt=Tt=function(e){function t(){var e,n,r,o;T(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=j(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={commentsShown:!1,reportModalShown:!1,deleteModalShown:!1,collapseModalShown:!1,favlistsShown:!1,editing:!1,commentPattern:"fixed",addAnnotationModalShown:!1,cancelAnnotationModalShown:!1,commentModalShown:!1,currentAnswer:{id:"",commentPermission:""},guideShown:!1},r.onCloseReward=function(){var e=r.props.answer.id;ve.a.set("isRewardable",!1),r.props.updateAnswerReward(e,"")},r.openModal=function(e,t){r.setState(It({},t))},r.openDeleteModal=function(){setTimeout(function(){r.setState({deleteModalShown:!0})})},r.closeModal=function(){r.setState({commentsShown:!1});var e=r.props.onCloseComment;"function"==typeof e&&e()},r.closeDeleteModal=function(){r.setState({deleteModalShown:!1})},r.disableAuth=function(){var e=r.props,t=(e.edition,e.router);t=void 0===t?{}:t;var n=t.location;n=void 0===n?{}:n;n.pathname;return!1}(),r.handleVote=r.context.authRequired(function(e){var t=r.props,n=t.answer.id;(0,t.updateAnswerVote)(n,e)},Te.C.vote),r.handleUpdateThanked=r.context.authRequired(function(){var e=r.props,t=e.answer,n=t.id,o=t.relationship.isThanked,a=e.updateAnswerThank,i=!o;ge.a.trackEvent(r,{action:i?"Thank":"UnThank",element:"Button"}),a(n,i)},Te.C.thank),r.handleUpdateUnhelpful=r.context.authRequired(function(){var e=r.props,t=e.answer,n=t.id,o=t.relationship.isNothelp,a=e.updateAnswerUnhelpful,i=!o;ge.a.trackEvent(r,{action:i?"NoHelp":"UnNoHelp",element:"Button"}),a(n,i)},Te.C.unhelpful),r.handleReshipmentSettings=function(e){var t=r.props,n=t.answer.id,o=t.updateAnswerReshipmentSettings;"need_payment"!==e||r.context.currentUser.caEnabled?o(n,e):window.open("/copyright/invite")},r.handleCommentPermission=function(e){var t=r.props,n=t.answer,o=n.id,a=n.commentPermission,i=n.adminClosedComment,s=t.updateAnswerCommentPermission,c=t.showNotification;i?c("此内容无法更改评论权限","red-ghost"):r.context.currentUser.isOrg||"censor"!==e&&"censor"!==a?s(o,e):r.setState({currentAnswer:{id:o,commentPermission:e},commentModalShown:!0})},r.handleCommentPermissionSettings=function(){var e=r.props.updateAnswerCommentPermission,t=r.state.currentAnswer;e(t.id,t.commentPermission),r.handleCommentModalClose()},r.handleLoadAnswerForSettings=function(){var e=r.props,t=e.answer.id;(0,e.loadAnswerForSettings)(t)},r.handleDeleteAnswer=function(){var e=r.props,t=e.answer.id;(0,e.deleteAnswer)(t)},r.handlePositionStatusChange=function(e){r.setState({positionStatus:e})},r.handleCollapseModalShow=function(){r.setState({collapseModalShown:!0})},r.handleCollapseModalHide=function(){r.setState({collapseModalShown:!1})},r.handleUpdateAnswerCollapsed=function(){var e=r.props,t=e.answer,n=t.id,o=t.collapsedBy,a=e.updateAnswerCollapsed,i=e.showNotification;return"community"===o?i("该回答因违反社区规范已被管理员折叠，暂无法公开","red"):a(n)},r.handleUpdateAnswerStick=function(){var e=r.props,t=e.answer.id;return(0,e.updateAnswerStick)(t)},r.handleRestoreAnswer=function(){var e=r.props,t=e.answer,n=t.id,o=t.question;(0,e.restoreAnswer)(o.id,n)},r.handleStartEditAnswer=function(){if(r.props.hasPublishingDraft)return void he.a.alert("你有一份对该回答的修改正在发布中，请等待发布完成后再次修改。");r.setState({editing:!0},function(){r.answerForm.getWrappedInstance().focus()})},r.handleCancelEditAnswer=function(){r.setState({editing:!1});var e=r.props,t=e.onCloseEditing,n=e.onCloseComment;"function"==typeof n&&n(),"function"==typeof t&&t()},r.handleSubmitAnswer=function(e){var t=r.props,n=t.answer.id,o=t.updateAnswer;return r.handleCancelEditAnswer(),o(n,e).then(function(e){return ge.a.trackEvent(r,{action:"StatusReport"},{status:{result:"Success",event:{action:"Edit"}}}),e})},r.handleReportOpen=function(){ge.a.trackEvent(r,{action:"Report",element:"Button",is_intent:!0}),r.context.authRequired(function(){return r.setState({reportModalShown:!0})},Te.C.report)()},r.handleReportHide=function(){r.setState({reportModalShown:!1})},r.handleLoadVoteDownReason=function(){var e=r.props,t=e.answer.question.id;(0,e.getVoteDownReason)(t)},r.handleSelectVoteDownReason=function(e){var t=r.props,n=t.answer.id,o=t.selectVoteDownReason,a=t.showNotification;o(n,e.reasonId).then(function(e){a(e.payload.message)})},r.handleSetShowVoteDownReason=function(e){localStorage.setItem(Te.n,e?"TRUE":"FALSE")},r.handleFavlistsShown=function(e){return ge.a.trackEvent(r,{action:"Collect",element:"Button",is_intent:!0}),r.props.shouldOia?void r.createOpenInAppHandler("collect_answer")(e):r.disableAuth?void r.handleToggleGuide():void r.context.authRequired(function(){return r.setState({favlistsShown:!0})},Te.C.favlists)()},r.handleFavlistHide=function(){r.setState({favlistsShown:!1})},r.handleLogMoreClick=function(){ge.a.trackEvent(r,{action:"Click",element_name:"MoreAction"})},r.handleCommentModalClose=function(){r.setState({commentModalShown:!1})},r.handleShowAddAnnotationModal=function(){return r.setState({addAnnotationModalShown:!0})},r.handleCloseAddAnnotationModal=function(){return r.setState({addAnnotationModalShown:!1})},r.handleShowCancelAnnotationModal=function(){return r.setState({cancelAnnotationModalShown:!0})},r.handleCloseCancelAnnotationModal=function(){return r.setState({cancelAnnotationModalShown:!1})},r.handleToggleGuide=function(){r.setState({guideShown:!r.state.guideShown})},r.startEditing=function(){var e=r.props,t=e.answer.relationship;t=void 0===t?{}:t;var n=t.isAuthor,o=e.editable;r.context.currentUser&&n&&o&&r.handleStartEditAnswer()},r.addRewardTagline=function(e){var t=r.props.answer.id;Object(Fe.a)(e,t)},r.createOpenInAppHandler=function(e){var t=r.props,n=t.answer,o=n.type,a=n.id,i=t.edition,s=t.location.query,c=t.referer;return function(t){t.preventDefault(),Object(be.openInAppWithTrack)(t,{href:Object(Ot.a)({type:o,id:a},{utm_content:e,edition:i,query:s,referer:c})})}},o=n,j(r,o)}return P(t,e),At(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.answer,r=t.byComment,o=t.editing,a=t.concernedUpvoters,i=t.loadAnswerConcernedVoters;a||i(n.id),r&&setTimeout(function(){return e.setState({commentsShown:Boolean(r)})}),o&&this.startEditing()}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props.answer,r=n.reshipmentSettings,o=n.commentPermission,a=e.answer,i=a.reshipmentSettings,s=a.commentPermission,c=e.editing;!r&&i&&!o&&s&&setTimeout(function(){return t.settingsTogglerEl.click()}),c&&!this.props.editing&&this.startEditing()}},{key:"renderCommunityCollapseTips",value:function(){var e=this.props.answer.collapseReason;return Q.a.createElement("div",{className:"AnswerItem-statusContent"},Q.a.createElement("div",{className:"AnswerItem-statusReason"},"该回答已被折叠 ",Q.a.createElement("span",null,Q.a.createElement("a",{target:"_blank",href:"/question/20120168","data-tooltip":"点击了解更多",className:"AnswerItem-complaintHelp"},Q.a.createElement(pe.a,{className:"AnswerItem-complaintIcon",name:"questionMarkLine",width:16})))),e&&Q.a.createElement("div",{className:"AnswerItem-statusDescription"},"折叠原因：",e))}},{key:"renderOrgCollapseTips",value:function(){return Q.a.createElement("div",{className:"AnswerItem-status"},"回答被提问机构移至隐藏区（",Q.a.createElement("a",{href:"/org-intro#org-question",target:"_blank"},"为什么？"),"）")}},{key:"renderReshipmentSettings",value:function(e){var t=this;return Object.keys(Dt).map(function(n){var r=Object(Ct.a)(n,e);return Q.a.createElement(de.b,{key:n,onClick:function(){return t.handleReshipmentSettings(n)},className:Object(Ct.b)(n,e)},r&&Q.a.createElement(pe.a,{className:"Button-icon",name:r}),Dt[n])})}},{key:"renderCommentPermission",value:function(e,t){var n=this,r=t?Te.t:Te.v;return Object.keys(r).map(function(t){var o=Object(Ct.a)(t,e);return Q.a.createElement(de.b,{key:t,onClick:function(){return n.handleCommentPermission(t)},className:Object(Ct.b)(t,e)},o&&Q.a.createElement(pe.a,{className:"Button-icon",name:o}),r[t])})}},{key:"renderAnswerExtraInfo",value:function(){var e=this.props,t=e.answer,n=t.id,r=t.type,o=t.voteupCount,a=t.markInfos,i=e.actor,s=e.action,c=e.experimentGrowth,u=e.concernedUpvoters,l=a&&a.length>0;if(!l&&!o)return null;var f=i&&i.urlToken,p=l&&a.map(function(e,t){var n=Te.o[e.markType];return n?[t>0&&"、",e.url?Q.a.createElement("a",{href:e.url,key:t},n):Q.a.createElement("span",{key:t},n)]:null}).filter(Boolean);return c&&!1||Q.a.createElement("div",{className:"AnswerItem-extraInfo",key:"answerExtraInfo"},l&&p.length&&Q.a.createElement(re.CJKSpace,null,"收录于",p),l&&Boolean(o)&&" · ",Q.a.createElement(Oe.a,{id:n,type:r,voteupCount:o,upvotedFollowees:(u||[]).filter(function(e){return f!==e.urlToken}),too:"voted"===s}))}},{key:"renderStatus",value:function(){var e=this.props.answer,t=e.isNormal,n=void 0===t||t,r=e.collapsedBy,o=e.annotationDetail,a=e.suggestEdit;a=void 0===a?{}:a;var i=a.title,s=a.unnormalDetails;s=void 0===s?{}:s;var c=s.reason,u=s.description,l=e.reviewInfo;l=void 0===l?{}:l;var f=l.isReviewing,p=l.tips;return f?Q.a.createElement("div",{className:"AnswerItem-status"},p):n?"community"===r?this.renderCommunityCollapseTips():o?Q.a.createElement(le.a,{annotationDetail:o}):null:Q.a.createElement("div",{className:"AnswerItem-statusContent"},Q.a.createElement("div",{className:"AnswerItem-statusReason"},u,"：",c),Q.a.createElement("div",{className:"AnswerItem-statusDescription"},"作者修改内容通过后，回答会重新显示恢复正常 ",Q.a.createElement("a",{target:"_blank",href:"/question/24752645",className:"AnswerItem-statusLink"},i)))}},{key:"renderSettings",value:function(){var e=this,t=this.context.currentUser,n=this.props,r=n.answer,o=r.collapsedBy,a=r.relationship;a=void 0===a?{}:a;var i=a.isAuthor,s=r.reshipmentSettings,c=r.commentPermission,u=r.question.questionType,l=r.rewardInfo;l=void 0===l?{}:l;var f=l.isRewardable,p=void 0!==f&&f,d=n.canCollapse;return t&&i?s&&c?Q.a.createElement(de.c,{toggler:Q.a.createElement(fe.default,{preset:"plain",onRef:function(t){e.settingsTogglerEl=t},icon:oe.Settings,label:"设置"}),reversed:!0,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selectMenuItem"},this.renderReshipmentSettings(s),Q.a.createElement(de.a,null),this.renderCommentPermission(c,t.isOrg),Q.a.createElement(de.a,null),p&&Q.a.createElement(de.b,{onClick:this.onCloseReward},"关闭赞赏"),Q.a.createElement(de.b,{onClick:this.openDeleteModal},"删除"),"commercial"===u&&d&&"nobody"===o&&[Q.a.createElement(de.a,{key:"MenuDivider"}),Q.a.createElement(de.b,{key:"MenuItem",onClick:this.handleUpdateAnswerCollapsed},"隐藏")]):Q.a.createElement(fe.default,{preset:"plain",onClick:this.handleLoadAnswerForSettings,icon:oe.Settings,label:"设置"}):null}},{key:"renderReshipment",value:function(e,t){var n=this;return"need_payment"===t?Q.a.createElement(de.b,{onClick:function(){ge.a.trackEvent(n,{action:"Authorize",element:"Button",is_intent:!0})},tag:"a",href:"/copyright/apply?answer="+e,target:"_blank"},"申请授权"):"disallowed"===t?Q.a.createElement(de.b,{tag:"a",target:"_blank",href:"/terms#sec-licence-6"},"禁止转载"):null}},{key:"renderOptions",value:function(){if(!this.context.currentUser)return null;var e=this.props,t=e.answer,n=e.canCollapse,r=t.id,o=t.reshipmentSettings,a=t.relationship;a=void 0===a?{}:a;var i=a.isAuthor,s=a.isNothelp,c=(a.isThanked,t.collapsedBy),u=t.question.questionType,l=t.annotationAction,f=void 0===l?[]:l,p=t.annotationDetail,d={toggler:Q.a.createElement(fe.default,{preset:"plain",icon:oe.Dots,"aria-label":"更多"}),reversed:!0,onOpen:this.handleLogMoreClick,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selfMenuItem"},h="commercial"===u,m="nobody"!==c;return i?null:Q.a.createElement(de.c,d,!1,n&&!h&&Q.a.createElement(de.b,{onClick:m?this.handleUpdateAnswerCollapsed:this.handleCollapseModalShow},m?"取消隐藏":"隐藏"),n&&h&&!m&&Q.a.createElement(de.b,{onClick:this.handleUpdateAnswerCollapsed},"隐藏"),f.some(function(e){return Te.a.add===e})&&!p&&Q.a.createElement(de.b,{onClick:this.handleShowAddAnnotationModal},"标记内容"),f.some(function(e){return Te.a.cancel===e})&&p&&Q.a.createElement(de.b,{onClick:this.handleShowCancelAnnotationModal},"撤销标记"),Q.a.createElement(de.b,{onClick:this.handleUpdateUnhelpful},s?"撤销没有帮助":"没有帮助"),Q.a.createElement(de.b,{onClick:this.handleReportOpen},"举报"),this.renderReshipment(r,o))}},{key:"renderMeta",value:function(){var e=this.props.answer,t=Lt(e);return Object.keys(t).map(function(e){return Q.a.createElement("meta",{key:e,itemProp:e,content:t[e]})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.answer,r=t.reward,o=t.answer,a=o.id,i=o.isNormal,s=void 0===i||i,c=o.isDelete,u=o.question,l=o.rewardInfo,f=o.question,p=f.title,d=f.id,h=f.questionType,m=f.isMuted,v=f.voteDownReason,y=o.author,g=o.excerpt,b=o.content,w=o.editableContent,_=o.voteupCount,E=o.commentCount,O=o.adminClosedComment,C=o.relationship;C=void 0===C?{}:C;var k=C.voting,S=C.isThanked,x=C.isAuthor,T=o.collapsedBy,j=o.isSticky,P=o.createdTime,A=o.updatedTime,I=o.thumbnail,M=o.thumbnailExtraInfo,N=o.reviewInfo;N=void 0===N?{}:N;var R=N.isReviewing,D=N.editType,L=o.relevantInfo;L=void 0===L?{}:L;var F=L.isRelevant,U=t.relatedTo,B=t.editable,z=t.byComment,K=t.draft,q=t.expanded,H=t.lastreadTouchable,V=t.preset,W=t.canCollapse,G=t.canStick,Y=t.itemProp,Z=void 0===Y?"answer":Y,X=t.addAnnotation,J=t.cancelAnnotation,$=t.showNotification,te=t.dataZaIndex,re=t.blockReading,ae=t.edition,se=t.experiment,ue=t.switches,le=(t.isWechat,t.lessExcerpt),de=t.experimentAuthor,he=t.experimentGrowth,ve=t.canOia,ye=t.ua,ge=this.context.currentUser,be="/question/"+d+"/answer/"+a,Oe=this.state,Ce=Oe.reportModalShown,ke=Oe.deleteModalShown,Se=Oe.collapseModalShown,xe=Oe.favlistsShown,je=Oe.editing,Pe=Oe.commentsShown,Ae=Oe.commentPattern,Ie=Oe.commentModalShown,Me=Oe.currentAnswer,Ne=Oe.addAnnotationModalShown,Re=Oe.cancelAnnotationModalShown,De=Oe.positionStatus;if(c)return Q.a.createElement("div",{className:"AnswerItem-deleted"},"你已经删除了该问题的回答，如果需要修改，请先  ",Q.a.createElement("a",{onClick:this.handleRestoreAnswer},"撤销删除"));var Fe=!(R&&"create"===D),Ue="commercial"===h,Ye="nobody"!==T,Ze=Rt(V)||Q.a.createElement(Ve.a,{className:ee()("AnswerItem-authorInfo",{"AnswerItem-authorInfo--related":U}),key:"authorInfo",preset:Nt(V)?"plain":"default",author:y,relatedTo:U}),Xe=(j||F||"org"===T&&!W)&&Q.a.createElement("div",{className:"AnswerItem-meta",key:"badgeInfo"},j&&Q.a.createElement("span",{className:"AnswerItem-sticky","data-tooltip":"本回答由品牌设为精选","data-tooltip-position":"bottom"},"品牌精选"),F&&Q.a.createElement("div",null,Q.a.createElement("div",{className:"AnswerItem-commercialBadge"},Q.a.createElement(me.default,{style:{marginRight:"6px",verticalAlign:"text-bottom"},src:Le.a,width:16,height:16}),Q.a.createElement("b",null,"亲自答："),"此回答由问题相关方亲自撰写")),"org"===T&&!W&&this.renderOrgCollapseTips()),Je=this.renderAnswerExtraInfo();if(je)return Q.a.createElement("div",null,Ze,Xe,Je,Q.a.createElement(He.a,{className:"AnswerItem-form",bordered:!0,isEdit:!0,ref:function(t){e.answerForm=t},question:u,defaultValue:w,onDeleteDraft:this.handleCancelEditAnswer,onCancel:this.handleCancelEditAnswer,onSubmit:this.handleSubmitAnswer,isRewardable:l.isRewardable,addRewardTagline:this.addRewardTagline}));var Qe=Mt(V)?[[Ze,Xe],Je]:[[Ze,Xe,Je],null],$e=Pt(Qe,2),et=$e[0],tt=$e[1],nt=this.props.shouldOia,rt="mainEntityOfPage"===Z||"acceptedAnswer"===Z,ot=nt&&!rt;return Q.a.createElement(_e.e,{className:"AnswerItem","data-za-index":te,"data-zop":JSON.stringify({authorName:y.name,itemId:a,title:p,type:"answer"}),data:n,meta:et,title:!U&&Q.a.createElement("div",{itemProp:"zhihu:question",itemType:"http://schema.org/Question",itemScope:!0},Q.a.createElement("meta",{itemProp:"url",content:"https://www.zhihu.com/question/"+d}),Q.a.createElement("meta",{itemProp:"name",content:p}),Q.a.createElement(ne.Link,{to:be,target:"_blank","data-za-detail-view-element_name":"Title"},p)),lastreadTouchable:H,name:a,itemProp:Z,itemType:"http://schema.org/Answer",itemScope:!0},this.renderMeta(),this.renderStatus(),"commercial"===h&&Q.a.createElement(Et,{answer:n}),(s||x)&&Q.a.createElement(Ge.b,It({},ot&&{expandText:"App 内查看"},he&&!rt&&{collapsedHeight:180},{cover:I,hasVideo:Boolean(M&&"video"===M.type),unescapable:Boolean(U),expanded:q,onPositionStatusChange:this.handlePositionStatusChange,prefix:de&&Q.a.createElement("b",null,Q.a.createElement(we.a,{user:y,noBadge:!0}),"："),before:tt,excerpt:g,html:b||g,after:Q.a.createElement("div",null,Q.a.createElement(Ge.a,It({created:P,updated:A,href:be},nt&&{onClick:this.createOpenInAppHandler("click_answer")})),ge&&x&&B&&Q.a.createElement("a",{className:"AnswerItem-editButton",onClick:this.handleStartEditAnswer},Q.a.createElement(pe.a,{left:!0,name:"modify"}),Q.a.createElement("span",{className:"AnswerItem-editButtonText"},"修改",K&&K.editableContent&&"（有未发布的编辑草稿）")),ge&&Q.a.createElement(gt,{reward:r,currentUser:ge,rewardInfo:l,isAuthor:x,id:a,author:y,ua:ye})),data:n,onClick:ot?this.createOpenInAppHandler("expand_answer"):this.disableAuth&&!ae.yidianzixun&&re&&this.handleToggleGuide},le?{limit:74}:{}),Fe&&W&&Ue&&Ye&&Q.a.createElement(fe.default,{className:ee()("ContentItem-rightButton AnswerItem-mainAction AnswerItem-open",{"AnswerItem-mainAction--disabled":"community"===T}),onClick:this.handleUpdateAnswerCollapsed},"公开回答"),Fe&&G&&!Ye&&Q.a.createElement(fe.default,{className:"ContentItem-rightButton AnswerItem-mainAction AnswerItem-stick",onClick:this.handleUpdateAnswerStick},j?"取消精选":"设为精选"),Fe&&Q.a.createElement(We.a,It({disabled:Ue&&m,count:_},nt&&{onClick:this.createOpenInAppHandler("vote_answer")},{onVote:this.handleVote,disableAuth:this.disableAuth,voting:k,isOwner:x,handleToggleGuide:this.handleToggleGuide,isShowVoteDownMenu:ge&&ue.isAnswerOpposeReasonVisiable&&"enable"===se.enableVoteDownReasonMenu,positionStatus:De,voteDownReason:v,onLoadVoteDownReason:this.handleLoadVoteDownReason,onSelectVoteDownReason:this.handleSelectVoteDownReason,onSetVoteDownReason:this.handleSetShowVoteDownReason})),Fe&&Q.a.createElement(Be.a,It({onClick:this.openModal},he&&ve&&{onClick:this.createOpenInAppHandler("comment_answer")},{commentsShown:Pe,commentClosed:O,count:E})),Fe&&!0&&Q.a.createElement(Ee.a,{id:a,type:"answer",title:p,authorName:y&&y.name,href:be,positionStatus:De}),Fe&&(!ge||!ge.isOrg)&&!ae.yidianzixun&&Q.a.createElement(fe.default,{preset:"plain",onClick:this.handleFavlistsShown,icon:oe.Star,label:"收藏"}),Fe&&!0&&!x&&Q.a.createElement(fe.default,{preset:"plain",onClick:this.handleUpdateThanked,icon:oe.Heart,label:S?"取消感谢":"感谢"}),he||Fe&&this.renderOptions(),he||this.renderSettings()),Q.a.createElement(ze.a,{shown:Pe,parent:n,byComment:z,commentPattern:Ae,onClose:this.closeModal}),Q.a.createElement(Ke.a,{type:"answer",urlToken:a,shown:Ce,onClose:this.handleReportHide,zaEnabled:!0}),Q.a.createElement(ie.a,{addAnnotation:X,onClose:this.handleCloseAddAnnotationModal,shown:Ne,type:Te.b,urlToken:a,showNotification:$}),Q.a.createElement(ce.a,{cancelAnnotation:J,onClose:this.handleCloseCancelAnnotationModal,shown:Re,type:Te.b,urlToken:a,showNotification:$}),ge&&x&&Q.a.createElement(bt.a,{title:"你确定要删除自己的答案吗？",subtitle:"答案内容不会被永久删除，你还可以撤消本次删除操作。",shown:ke,onCancel:this.closeDeleteModal,onSubmit:this.handleDeleteAnswer}),W&&Q.a.createElement(bt.a,{title:"隐藏答案",subtitle:"隐藏后该回答将不展示也不流通，是否确定隐藏？",shown:Se,onCancel:this.handleCollapseModalHide,onSubmit:this.handleUpdateAnswerCollapsed}),Q.a.createElement(qe.a,{id:a,type:"answer",shown:xe,onClose:this.handleFavlistHide,zaEnabled:!0}),Q.a.createElement(bt.a,{title:"你确定要更改评论权限吗？",subtitle:"censor"===Me.commentPermission?"更改后，已有评论不变，新评论需要经过筛选才会公开显示":"更改后，所有待筛选评论都会被公开显示出来",shown:Ie,onCancel:this.handleCommentModalClose,onSubmit:this.handleCommentPermissionSettings}),!1)}}]),t}(J.PureComponent),Tt.contextTypes=It({currentUser:X.a.object,authRequired:X.a.func},!1),Tt.propTypes={relatedTo:X.a.oneOf(["question","answer"]),editable:X.a.bool,preset:X.a.oneOf(["special-plain","plain","primary"]),lessExcerpt:X.a.bool},Tt.defaultProps={editable:!1,preset:"primary"},xt=jt))||xt)||xt)||xt)},773:function(e,t,n){"use strict";var r=n(726),o=r.OrderedMap,a={createFromArray:function(e){return o(e.map(function(e){return[e.getKey(),e]}))}};e.exports=a},774:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(726),s=i.Record,c={anchorKey:"",anchorOffset:0,focusKey:"",focusOffset:0,isBackward:!1,hasFocus:!1},u=s(c),l=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.serialize=function(){return"Anchor: "+this.getAnchorKey()+":"+this.getAnchorOffset()+", Focus: "+this.getFocusKey()+":"+this.getFocusOffset()+", Is Backward: "+String(this.getIsBackward())+", Has Focus: "+String(this.getHasFocus())},t.prototype.getAnchorKey=function(){return this.get("anchorKey")},t.prototype.getAnchorOffset=function(){return this.get("anchorOffset")},t.prototype.getFocusKey=function(){return this.get("focusKey")},t.prototype.getFocusOffset=function(){return this.get("focusOffset")},t.prototype.getIsBackward=function(){return this.get("isBackward")},t.prototype.getHasFocus=function(){return this.get("hasFocus")},t.prototype.hasEdgeWithin=function(e,t,n){var r=this.getAnchorKey(),o=this.getFocusKey();if(r===o&&r===e){var a=this.getStartOffset();return t<=this.getEndOffset()&&a<=n}if(e!==r&&e!==o)return!1;var i=e===r?this.getAnchorOffset():this.getFocusOffset();return t<=i&&n>=i},t.prototype.isCollapsed=function(){return this.getAnchorKey()===this.getFocusKey()&&this.getAnchorOffset()===this.getFocusOffset()},t.prototype.getStartKey=function(){return this.getIsBackward()?this.getFocusKey():this.getAnchorKey()},t.prototype.getStartOffset=function(){return this.getIsBackward()?this.getFocusOffset():this.getAnchorOffset()},t.prototype.getEndKey=function(){return this.getIsBackward()?this.getAnchorKey():this.getFocusKey()},t.prototype.getEndOffset=function(){return this.getIsBackward()?this.getAnchorOffset():this.getFocusOffset()},t.createEmpty=function(e){return new t({anchorKey:e,anchorOffset:0,focusKey:e,focusOffset:0,isBackward:!1,hasFocus:!1})},t}(u);e.exports=l},775:function(e,t,n){"use strict";function r(e){return"object"==typeof e?Object.keys(e).filter(function(t){return e[t]}).map(o).join(" "):Array.prototype.map.call(arguments,o).join(" ")}function o(e){return e.replace(/\//g,"-")}e.exports=r},776:function(e,t,n){"use strict";function r(e,t,n){var r=e.getSelection(),a=e.getCurrentContent(),i=r;if(r.isCollapsed()){if("forward"===n){if(e.isSelectionAtEndOfContent())return a}else if(e.isSelectionAtStartOfContent())return a;if((i=t(e))===r)return a}return o.removeRange(a,i,n)}var o=n(733);e.exports=r},777:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},778:function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},779:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},780:function(e,t){},781:function(e,t){},782:function(e,t){},783:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(3),i=n(29),s={alert:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.text,r=void 0===n?{}:n;return new Promise(function(t){i.default.open(function(n){return o.a.createElement(i.default,{closeButton:null,maskClosable:!1,hotKeyClosable:!1},e,o.a.createElement(i.ModalButtonGroup,null,o.a.createElement(a.default,{preset:"primary",color:"blue",onClick:function(){n(),t()}},r.ok||"确定")))})})},confirm:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.text,r=void 0===n?{}:n;return new Promise(function(t,n){i.default.open(function(s){return o.a.createElement(i.default,{closeButton:null,maskClosable:!1,hotKeyClosable:!1},e,o.a.createElement(i.ModalButtonGroup,null,o.a.createElement(a.default,{preset:"primary",color:"blue",onClick:function(){s(),t()}},r.ok||"确定"),o.a.createElement(a.default,{onClick:function(){s(),n()}},r.cancel||"取消")))})})}};t.a=s},784:function(e,t){},785:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return e.replace(/^「/,"").replace(/」$/,"")}n.d(t,"a",function(){return E});var s,c,u=n(0),l=n.n(u),f=n(1),p=n.n(f),d=n(2),h=n.n(d),m=n(48),v=n.n(m),y=n(50),g=n(3),b=n(13),w=n(875),_=(n.n(w),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),E=(c=s=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.onChangeInputType=function(e){n.setState({checked:e.target.checked})},n.onChangeInputValue=function(e){n.setState({text:e.target.value})},n.submit=function(){var e=n.state.text;n.props.submitRewardText(e)};var a=e.tagline;return n.state={text:i(a)||"予人玫瑰，手有余香",checked:!0},n}return a(t,e),_(t,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.edit,r=this.state,o=r.text,a=r.checked;return l.a.createElement(v.a,{onClose:t,className:"RewardForm-rewardModal"},l.a.createElement("p",{className:"RewardForm-rewardTitle"},n?"编辑赞赏描述":"开启赞赏"),l.a.createElement(y.default,{className:"RewardForm-rewardInput",maxLength:"20",type:"text",value:o,onChange:this.onChangeInputValue}),l.a.createElement("div",{className:"RewardForm-remark"},!n&&l.a.createElement("div",{className:"RewardForm-Protocol"},l.a.createElement("input",{className:"RewardForm-rewardCheckbox",type:"checkbox",onChange:this.onChangeInputType,checked:a}),l.a.createElement("p",null,"我已同意",l.a.createElement("a",{className:"RewardForm-rewardLink",href:"/terms/tipjar"},"《知乎赞赏功能使用协议》"))),l.a.createElement("p",{className:"RewardForm-prompting"},"还可以输入"+(20-o.length)+"个字")),l.a.createElement(g.default,{className:h()("RewardForm-rewardSubmit",{"RewardForm-rewardSubmit-disabled":!a}),onClick:this.submit,disabled:!a},"确定"))}}]),t}(u.Component),s.propTypes={onClose:p.a.func,submitRewardText:p.a.func,edit:p.a.bool,tagline:p.a.string},s.defaultProps={tagline:b.i},c)},786:function(e,t,n){"use strict";function r(e,t){return e===t?"check":null}function o(e,t){return e===t?"is-selected":null}t.a=r,t.b=o},787:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAEDElEQVR4Ae3cQW5cRwwE0FGgAzhA7porxGe1gRxBWev9RaHRPc0syrsCySKnCmRjJMgfP/759fW6+O/fv//61u3Pn7+/YePfgq/Xy3zj1ptv3Hqx9cZP4z9OE5ZvT4Easqff8eoaclzSPcJPy1dvrPXi1Ruc8p3PfLHz7GL77/I5bzdkV9HD9TXksKC7dDVkV8HD9Y83RH5vnHHx6o1N+fYX218sf6o3Xz5x4jM/8XdDVGwY15BhA2xfQ1RkGMc3ZHi+R/t0gy1YvfHW38bdkNuKh341JAh0O1xDbise+o2/Ias33vzVN0U9duvl28XdkF0FD9fXkMOC7tLVkF0FD9fHN+T2jU39fEOSHokv1af4af5uSFL8cryGXBY8tashSaHL8ccbsnqj3z2v83iz3x3389nP+C7uhuwqeLi+hhwWdJeuhuwqeLj+05t8mP843btvuAPf1qcbogPDuIYMG2D7GqIiw/hj9e9D0k1NN976lK8+1htf5bN+F+/O1w3ZdeBwfQ05LOguXQ3ZVfBw/eN7iDc43UTn2c23v/yrOM1jP/ON2z/lG7de3A1RkWFcQ4YNsH0NUZFh/PH19fXt79RXb6bzr9abn27uav7qfOY7j/3NTzjxdUOSgpfjNeSy4KldDUkKXY7Hn2V583bn8wbLn+Kpf6rfjdtfPuN+PuPiboiKDOMaMmyA7WuIigzj+LMs50s303yxN3WVbzXf/uLEl+J+HvkTlr8bkhS7HK8hlwVP7WpIUuhy/PGzrNX+3kDrV2+sfKl+Nd/5Ur1x69N85ie+boiKDeMaMmyA7WuIigzjz3TTVm+k+fKn+K4e9kt8zmO+8cSf4omvG6IDw7iGDBtg+xqiIsN4+XuIN9KbuPp5Ep/xxO88p+sTv/E0r/FuiIoM4xoybIDta4iKDOP4PcT50o1MNzvV20+c6lf7my+2f4qbL7bez9MNUbFhXEOGDbB9DVGRYfz4nfruPN7E/xtfmmd1ft8E+Y3Lb7wbooLDuIYMG2D7GqIiw3j5e8juvN5QceL35lovTnwpnvpZv5pvfTdERYZxDRk2wPY1REWG8eP/XHz3DfbzenONi9N88qV8+cWr9Snf+ezXDVGRYVxDhg2wfQ1RkWH8eEOcJ90889MNXc23v1i+hFN9iq/yr+rRDUkKX47XkMuCp3Y1JCl0OR7fkMvzvNIN9yabbzzNb37iM574U779uyFJ0cvxGnJZ8NSuhiSFLsfH35B0Y1f1SHze7JRv/1Rv3Hr7ibshKjaMa8iwAbavISoyjOMbkm7i6fnt540V2//d9fZbxc5nfTdERYZxDRk2wPY1REWG8eMNSTf69rzp5jpPml8+88XyW2/c+tX8boiKDuMaMmyA7WuIigzj/wC7sm2izpKNiwAAAABJRU5ErkJggg=="},789:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),s=n(807);n.n(s);t.a=function(e){var t=e.header,n=e.options,r=e.className,a=e.onRef,s=e.showOptions,c=void 0===s||s;return o.a.createElement("div",{className:i()("Topbar",r,!1),ref:a},o.a.createElement("div",{className:"Topbar-title"},t),c&&o.a.createElement("div",{className:"Topbar-options"},n))}},790:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),u=r(c),l=n(1),f=r(l),p=n(830),d=r(p),h=n(3),m=r(h),v=n(29),y=r(v),g=n(831),b=r(g);n(859);var w=function(e){function t(){var e,n,r,i;o(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.state={range:1,image:r.props.image},r.handleSave=function(){var e=r.editorEl.getImage(),t=r.props.type;e&&e.toBlob(r.uploadBlob,t)},r.uploadBlob=function(e){(0,r.props.uploadImage)(e,"avatar")},r.resetUpload=function(){r.setState({range:1,image:""}),r.props.resetUpload()},i=n,a(r,i)}return i(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.range,r=t.image,o=this.props,a=o.title,i=o.width,s=o.height;return u.default.createElement(y.default,{onClose:this.resetUpload,className:"UploadImageModal-modal",title:"编辑"+a,subtitle:"调整"+a+"尺寸和位置"},u.default.createElement("div",null,u.default.createElement("div",{className:"UploadImageModal-container"},u.default.createElement(d.default,{ref:function(t){e.editorEl=t},image:r,width:i,height:s,border:40,color:[247,248,250,.9],scale:parseFloat(n)})),u.default.createElement(b.default,{value:n,onChange:function(t){return e.setState({range:t.target.value})}}),u.default.createElement(v.ModalButtonGroup,null,u.default.createElement(m.default,{color:"blue",preset:"primary",onClick:this.handleSave},"保存"))))}}]),t}(u.default.Component);w.propTypes={resetUpload:f.default.func,uploadImage:f.default.func,image:f.default.string,type:f.default.string,width:f.default.number,height:f.default.number,title:f.default.string},w.defaultProps={title:"头像",type:"image/png",width:160,height:160},t.default=w},794:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return h});var i=n(1),s=n.n(i),c=n(0),u=n.n(c),l=n(12),f=(n.n(l),n(87)),p=(n.n(f),n(245)),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.check=function(){var e=n.props.offset,t=e,r=n.childNodes.map(function(e){return Object(l.findDOMNode)(e)}).filter(function(e){return e}).map(function(e){var t=window.getComputedStyle(e);return e.offsetHeight+parseInt(t.marginBottom,10)+parseInt(t.marginTop,10)}),o=n.el.clientHeight,a=document.documentElement.clientHeight-e;if(n.sticky.updateHeight(),o>a){var i=o;r.every(function(e){return!(i<a)&&(i-=e,!0)}),t=e-o+i}n.state.stickyOffset!==t&&n.setState({stickyOffset:t})},n.childNodes=[],n.state={stickyOffset:e.offset},n}return a(t,e),d(t,[{key:"componentDidMount",value:function(){this.resizeHandler=Object(f.subscribe)("resize",this.check),this.timeout=setTimeout(this.check)}},{key:"componentWillUnmount",value:function(){this.resizeHandler.unsubscribe(),clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.className,o=t.onRef;return u.a.createElement("div",{className:r,ref:o},u.a.createElement(p.a,{offset:this.state.stickyOffset,ref:function(t){e.sticky=t}},u.a.createElement("div",{ref:function(t){e.el=t}},c.Children.toArray(n).map(function(t,n){return Object(c.cloneElement)(t,{ref:function(t){e.childNodes[n]=t}})}))))}}]),t}(c.Component);h.propTypes={offset:s.a.number,onRef:s.a.func,className:s.a.string},h.defaultProps={offset:0,onRef:function(){},className:""}},795:function(e,t,n){"use strict";function r(e,t,n,r){if(e.size){var o=0;e.reduce(function(e,a,i){return t(e,a)||(n(e)&&r(o,i),o=i),a}),n(e.last())&&r(o,e.count())}}e.exports=r},796:function(e,t,n){"use strict";function r(e,t){var n=t.getStartKey(),r=t.getStartOffset(),i=t.getEndKey(),s=t.getEndOffset(),c=a(e,t),u=c.getBlockMap(),l=u.keySeq(),f=l.indexOf(n),p=l.indexOf(i)+1;return u.slice(f,p).map(function(e,t){var a=o(),c=e.getText(),u=e.getCharacterList();return n===i?e.merge({key:a,text:c.slice(r,s),characterList:u.slice(r,s)}):t===n?e.merge({key:a,text:c.slice(r),characterList:u.slice(r)}):t===i?e.merge({key:a,text:c.slice(0,s),characterList:u.slice(0,s)}):e.set("key",a)}).toOrderedMap()}var o=n(740),a=n(915);e.exports=r},797:function(e,t,n){"use strict";function r(e,t){console.warn("WARNING: "+e+' will be deprecated soon!\nPlease use "'+t+'" instead.')}var o=n(144),a=o||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(918),s=n(726),c=n(729),u=s.Map,l=u(),f=0,p={getLastCreatedEntityKey:function(){return r("DraftEntity.getLastCreatedEntityKey","contentState.getLastCreatedEntityKey"),p.__getLastCreatedEntityKey()},create:function(e,t,n){return r("DraftEntity.create","contentState.createEntity"),p.__create(e,t,n)},add:function(e){return r("DraftEntity.add","contentState.addEntity"),p.__add(e)},get:function(e){return r("DraftEntity.get","contentState.getEntity"),p.__get(e)},mergeData:function(e,t){return r("DraftEntity.mergeData","contentState.mergeEntityData"),p.__mergeData(e,t)},replaceData:function(e,t){return r("DraftEntity.replaceData","contentState.replaceEntityData"),p.__replaceData(e,t)},__getLastCreatedEntityKey:function(){return""+f},__create:function(e,t,n){return p.__add(new i({type:e,mutability:t,data:n||{}}))},__add:function(e){var t=""+ ++f;return l=l.set(t,e),t},__get:function(e){var t=l.get(e);return t||c(!1),t},__mergeData:function(e,t){var n=p.__get(e),r=a({},n.getData(),t),o=n.set("data",r);return l=l.set(e,o),o},__replaceData:function(e,t){var n=p.__get(e),r=n.set("data",t);return l=l.set(e,r),r}};e.exports=p},798:function(e,t,n){"use strict";var r={encode:function(e,t,n){return e+"-"+t+"-"+n},decode:function(e){var t=e.split("-"),n=t[0],r=t[1],o=t[2];return{blockKey:n,decoratorKey:parseInt(r,10),leafKey:parseInt(o,10)}}};e.exports=r},799:function(e,t,n){"use strict";function r(e){return"handled"===e||!0===e}e.exports=r},800:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e.offset===t.offset?t.length-e.length:e.offset-t.offset}},801:function(e,t,n){var r=n(761),o=n(849);e.exports=n(762)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},802:function(e,t,n){var r=n(778);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},803:function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},804:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ZaModule=t.zaModule=void 0;var o=n(757),a=r(o),i=n(805),s=r(i);t.zaModule=s.default,t.ZaModule=a.default},805:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.zaModule=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),u=r(c),l=n(757),f=r(l);t.zaModule=function(e){return function(t){var n,r;return r=n=function(n){function r(){return o(this,r),a(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return i(r,n),s(r,[{key:"render",value:function(){var n="function"==typeof e?e(this.props):e;return u.default.createElement(f.default,n,u.default.createElement(t,this.props))}}]),r}(c.Component),n.displayName="ZaModule("+(t.displayName||t.name||"Component")+")",n.propTypes=t.propTypes,n.defaultProps=t.defaultProps,r}}},806:function(e,t){},807:function(e,t){},808:function(e,t){},809:function(e,t){},810:function(e,t){},811:function(e,t){},812:function(e,t){},813:function(e,t,n){"use strict";function r(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function o(e,t){var n,o,s,c,u,l,f=!1;t||(t={}),n=t.debug||!1;try{s=a(),c=document.createRange(),u=document.getSelection(),l=document.createElement("span"),l.textContent=e,l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",document.body.appendChild(l),c.selectNode(l),u.addRange(c);if(!document.execCommand("copy"))throw new Error("copy command was unsuccessful");f=!0}catch(a){n&&console.error("unable to copy using execCommand: ",a),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData("text",e),f=!0}catch(a){n&&console.error("unable to copy using clipboardData: ",a),n&&console.error("falling back to prompt"),o=r("message"in t?t.message:i),window.prompt(o,e)}}finally{u&&("function"==typeof u.removeRange?u.removeRange(c):u.removeAllRanges()),l&&document.body.removeChild(l),s()}return f}var a=n(814),i="Copy to clipboard: #{key}, Enter";e.exports=o},814:function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach(function(t){e.addRange(t)}),t&&t.focus()}}},815:function(e,t){},816:function(e,t){},817:function(e,t){},818:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l,f,p=n(1),d=n.n(p),h=n(0),m=n.n(h),v=n(5),y=n(2),g=n.n(y),b=n(3),w=n(10),_=n(6),E=n.n(_),O=n(36),C=n(55),k=(n(819),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),S=(f=l=function(e){function t(){var e,n,r,i;o(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.state={step:0},r.toggleStep=function(){r.setState({step:0===r.state.step?1:0},function(){r.popover.position()})},r.handleNeverShowVoteDownReason=function(){r.props.onSetVoteDownReason(!1),r.popover.close()},r.handleSelectReason=function(e){r.props.onSelectVoteDownReason(e),r.popover.close()},i=n,a(r,i)}return i(t,e),k(t,[{key:"componentDidUpdate",value:function(){"absolute"===this.props.positionStatus&&this.popover.close()}},{key:"render",value:function(){var e=this,t=this.props,n=t.reasonList,o=t.positionStatus,a=this.state.step,i=[].concat(r(n)).sort(function(e,t){return e.sort-t.sort});return m.a.createElement(C.a,{className:"VoteDownReasonMenu",positionStatus:o,toggler:this.props.toggler,onOpen:function(){e.setState({step:0})},getContainer:function(){return document.querySelector(".ContentItem-actions")},onClick:this.props.onTogglerClick,ref:function(t){e.popover=t,e.props.popoverRef&&e.props.popoverRef(t)},placement:"top",arrowed:!0,preventCloseOnTarget:!0},m.a.createElement("div",{className:"VoteDownReasonMenu-container"},m.a.createElement("div",{className:"VoteDownReasonMenu-header"},0===a&&"已反对，你觉得",1===a&&"不再显示该反馈功能？"),m.a.createElement("div",{className:"VoteDownReasonMenu-action"},0===a&&m.a.createElement("span",{className:"preventCloseOnTarget",onClick:this.toggleStep},"不再显示"),0===a&&m.a.createElement("div",{className:"VoteDownReasonMenu-spliter"}),m.a.createElement(b.default,{preset:"plain",className:"VoteDownReasonMenu-closeButton",onClick:function(){e.popover.close()},"aria-label":"关闭"},m.a.createElement(w.a,{className:"VoteDownReasonMenu-closeIcon",name:"remove",width:12,height:12,fill:"#a5b6cf"}))),0===a&&m.a.createElement("div",{className:"VoteDownReasonMenu-reasonList"},i.map(function(t){return m.a.createElement("div",{className:"VoteDownReasonMenu-reason",key:t.reasonId,onClick:function(){e.handleSelectReason(t)}},t.name)})),1===a&&m.a.createElement("div",{className:"VoteDownReasonMenu-disableReason"},m.a.createElement("div",{className:"VoteDownReasonMenu-disableReasonHint"},"你可以在「设置」页面中的「屏蔽」开启。"),m.a.createElement("div",{className:"VoteDownReasonMenu-disableReasonButtonList"},m.a.createElement(b.default,{className:"preventCloseOnTarget",onClick:this.toggleStep},"返回"),m.a.createElement(b.default,{color:"blue",onClick:this.handleNeverShowVoteDownReason},"不再显示")))))}}]),t}(h.Component),l.defaultProps={reasonList:[]},f),x=S,T=n(13),j=(n(820),function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),P=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),A=function(e){function t(){var e,n,r,o;s(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++)i[u]=arguments[u];return n=r=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onVote=r.context.authRequired(function(e){r.props.onVote(e)},T.C.vote),r.handleVoteUp=function(e){var t=r.props.voting,n=1===t?["UnUpvote","neutral"]:["Upvote","up"],o=j(n,2),a=o[0],i=o[1];r.vote(e,a,i)},r.handleVoteDown=function(e){var t=r.props.voting,n=-1===t?["UnDownvote","neutral"]:["Downvote","down"],o=j(n,2),a=o[0],i=o[1];r.vote(e,a,i)},r.vote=function(e,t,n){E.a.trackEvent(e.target,{action:t,element:"Button"});var o=r.props,a=o.disableAuth,i=o.handleToggleGuide,s=o.onClick;return s?void s(e):a?void i():void r.onVote(n)},r.renderVoteDownButton=function(){var e=r.props,t=e.voting,n=e.disabled;return m.a.createElement(b.default,{className:g()("VoteButton VoteButton--down",{"is-active":-1===t},{"VoteButton--mobileDown":!1}),disabled:n,onClick:r.handleVoteDown,"aria-label":"反对"},m.a.createElement(w.a,{name:"triangle",className:"VoteButton-downIcon"}))},o=n,c(r,o)}return u(t,e),P(t,[{key:"componentWillReceiveProps",value:function(e){e.voteDownReason&&this.isPendingForVoteDownReason&&(this.isPendingForVoteDownReason=!1,this.popover.open())}},{key:"render",value:function(){var e=this,t=this.props,n=t.isOwner,r=t.count,o=t.voting,a=t.disabled,i=t.positionStatus,s=t.isShowVoteDownMenu,c=t.voteDownReason;return m.a.createElement("span",null,m.a.createElement(b.default,{className:g()("VoteButton VoteButton--up",{"is-active":1===o}),disabled:n||a,onClick:this.handleVoteUp,"aria-label":"赞同"},m.a.createElement(w.a,{name:"triangle",className:"VoteButton-upIcon"}),Object(O.c)(r)),!n&&(!s||!1)&&this.renderVoteDownButton(),!n&&s&&!0&&m.a.createElement(x,{reasonList:c,toggler:this.renderVoteDownButton(),popoverRef:function(t){e.popover=t},positionStatus:i,onTogglerClick:function(t){return e.handleVoteDown(t),"FALSE"===localStorage.getItem(T.n)?void t.preventDefault():-1===o?(t.preventDefault(),void e.popover.close()):void(c||(e.isPendingForVoteDownReason=!0,e.props.onLoadVoteDownReason(),t.preventDefault()))},onSelectVoteDownReason:this.props.onSelectVoteDownReason,onSetVoteDownReason:this.props.onSetVoteDownReason}))}}]),t}(h.Component);A.defaultProps={voting:0},A.contextTypes={authRequired:d.a.func};t.a=Object(v.connect)()(A)},819:function(e,t){},820:function(e,t){},821:function(e,t){},822:function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"…";return e.length>t?e.slice(0,t)+n:e}function o(e){return e?"string"!=typeof e?0:e.replace(/[^\x00-\xff]/g,"01").length:0}t.b=r,t.a=o},828:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){var n=null,r=function(){null!==n&&(clearTimeout(n),n=null)},o=function(){var o=this,a=arguments;r(),n=setTimeout(function(){e.apply(o,a)},t)};return o.abort=r,o}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.times,r=void 0===n?3:n,o=t.delay,a=void 0===o?1e3:o,i=t.shouldRetry,s=void 0===i?J:i,c=t.cancellationToken,u=void 0===c?X.token:c,l=0;return new Promise(function(t,n){!function o(){if(u.isCancelled())return void n(new Y(u));e().then(function(e){u.throwIfCancelled(),t(e)}).catch(function(e){u.throwIfCancelled(),l<r&&s(e)?(l++,setTimeout(o,a)):n(e)}).catch(n)}()})}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function P(){return P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P.apply(this,arguments)}function A(e){return function(t){return function(n){function r(t){x(this,r);var n=T(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t));n.handleChange=function(){n.forceUpdate()};var o=n.props.uploadManager,a=e(n.props),i=a.type,s=a.value;return n.session=o.getSession(i,s),n}return j(r,n),ge(r,[{key:"componentDidMount",value:function(){this.session.addListener("change",this.handleChange),this.forceUpdate()}},{key:"componentWillUnmount",value:function(){this.session.removeListener("change",this.handleChange)}},{key:"render",value:function(){return ye.a.createElement(t,P({},this.props,{session:this.session}))}}]),r}(ve.Component)}}var I=n(848),M=function(e){function t(e,n){r(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"UploadError("+e+"): "+n));return a.name="UploadError",a.type=e,a.payload=n,a}return a(t,e),t}(Error),N=M,R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),L={start:"handleStart",abort:"handleAbort",complete:"handleComplete",error:"handleError"},F=function(e){function t(e,n){i(this,t);var r=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.state={uploading:!1,error:!1,errorData:null,aborted:!1,completed:!1,result:null},r.shouldUpdate=!1,r.update=r.updateImmediately,r.value=e,r.props=n,r.abort=u(r.abort,0),Object.keys(L).forEach(function(e){var t=r[L[e]];t&&r.on(e,t)}),r.on("error",function(e){setTimeout(function(){throw e},0)}),r}return c(t,e),D(t,[{key:"mergeState",value:function(e){this.state=R({},this.state,e)}},{key:"updateBatched",value:function(e){this.shouldUpdate=!0,this.mergeState(e)}},{key:"updateImmediately",value:function(e){this.mergeState(e),this.emit("change")}},{key:"batchUpdate",value:function(e){if(this.update===this.updateBatched)return void e();this.shouldUpdate=!1,this.update=this.updateBatched;try{e()}finally{this.update=this.updateImmediately}this.shouldUpdate&&this.emit("change")}},{key:"start",value:function(){var e=this;this.abort.abort&&this.abort.abort(),this.state.uploading||this.state.completed||this.batchUpdate(function(){e.update({uploading:!0,error:!1,errorData:null,aborted:!1}),e.emit("start")})}},{key:"abort",value:function(){var e=this;this.state.uploading&&this.batchUpdate(function(){e.update({uploading:!1,aborted:!0}),e.emit("abort")})}},{key:"complete",value:function(e){var t=this;this.abort.abort&&this.abort.abort(),this.state.uploading&&this.batchUpdate(function(){t.update({uploading:!1,completed:!0,result:e}),t.emit("complete",e)})}},{key:"error",value:function(e){var t=this;this.abort.abort&&this.abort.abort(),this.state.uploading&&this.batchUpdate(function(){var n=e&&"UploadError"===e.name?e:new N("unknown",e);t.update({uploading:!1,error:!0,errorData:n}),t.emit("error",n)})}}]),t}(I.EventEmitter),U=F,B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),K=function(e){return new Promise(function(t,n){return setTimeout(n,e)})},q=function(e){function t(){var e,n,r,o;l(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state=B({},r.state,{imageReady:!1,image:null}),o=n,f(r,o)}return p(t,e),z(t,[{key:"handleStart",value:function(){var e=this;if("file"===this.value.type){var t=new FileReader;t.addEventListener("load",function(){e.update({imageReady:!0,image:t.result})}),t.readAsDataURL(this.value.value)}else this.update({imageReady:!0});Promise.race([this.props.uploadImage(this.value.value),K(9e4)]).then(function(t){e.state.aborted||e.complete(t)}).catch(function(t){e.state.aborted||e.error(t)})}}]),t}(U),H=q,V=n(88),W=n.n(V),G=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Y=function(){function e(t){d(this,e),this.token=t}return G(e,[{key:"toString",value:function(){return"CancellationError"}}]),e}(),Z=function e(t){var n=this;d(this,e),this.isCancelled=function(){return n.cts.isCancelled},this.throwIfCancelled=function(){if(n.isCancelled())throw new Y(n)},this.cts=t},X=function e(){var t=this;d(this,e),this.isCancelled=!1,this.token=new Z(this),this.cancel=function(){t.isCancelled=!0}};X.token=(new X).token;var J=function(){return!0},Q=n(293),$=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ee=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),te=5e3,ne="zhihu-video-input",re=W()(Q.a),oe=function(e){function t(){var e,n,r,o;m(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=v(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state=$({},r.state,{uploadingType:null,uploadTime:0,transcodeTime:0,uploadedSize:0,uploadId:"",fileSize:r.value.size}),r.video=null,r.videoInfo=null,r.handleProgress=function(e,t){return function(n){var o=t.uploadId,a=r.value.size*e;r.update({uploadedSize:a,uploadId:o}),0===e&&r.handleUploadingStatus("UPLOADING_START"),e/.1%1==0&&r.handleUploadingStatus("UPLOADING"),n()}},r.handleUploadingStatus=function(e){var t=r.state.uploadId,n=r.video.uploadfile[0],o=n.video_id,a=n.object_key;r.load("https://lens.zhihu.com/api/v2/videos/"+o+"/uploading_status",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({object_key:a,upload_id:t,video_source:"origin",upload_event:e})})},r.getClient=function(){var e=r.video.uploadtoken,t=e.access_id,n=e.access_key,o=e.access_token;return re("https://unpkg.zhimg.com/ali-oss@5.0.0/dist/aliyun-oss-sdk.min.js").then(function(){r.client=new window.OSS.Wrapper({region:"oss-cn-hangzhou",bucket:ne,secure:!0,accessKeyId:t,accessKeySecret:n,stsToken:o})})},r.createVideo=function(){return r.token.throwIfCancelled(),r.video?Promise.resolve():h(function(){return r.load("https://lens.zhihu.com/api/v2/videos",{method:"POST",headers:{"Content-Type":"application/json","X-Upload-Content-Type":r.value.type,"X-Upload-Content-Length":r.value.size},body:JSON.stringify({use_watermark:r.props.videoWatermark,video_count:1})})},{cancellationToken:r.token}).then(function(e){r.token.throwIfCancelled(),r.video=$({},e)}).catch(function(e){throw r.token.throwIfCancelled(),new N("upload",e)})},r.uploadVideo=function(){var e=r.video.uploadfile,t=e[0].object_key,n={url:"https://lens.zhihu.com/api/v2/ali_oss_callback",body:"bucket=${BUCKET}&object=${object}&etag=${etag}&size=${size}"};r.token.throwIfCancelled();return r.getClient().then(function(){return r.client.multipartUpload(t,r.value,{progress:r.handleProgress,mime:r.value.type,callback:n,partSize:1048576}).catch(function(e){throw r.token.throwIfCancelled(),new N("upload",e)})})},r.checkVideoStatus=function(){return new Promise(function(e,t){!function n(){if(r.token.isCancelled())return void t(new Y(r.token));var o=r.video.uploadfile[0].video_id;r.load("https://lens.zhihu.com/api/videos/"+o+"/uploading_status").then(function(t){if(r.token.throwIfCancelled(),t.is_completed)e();else{if("failure"===t.converting_status)throw new N("convert",t);r.timer=setTimeout(n,te)}}).catch(function(e){if(r.token.throwIfCancelled(),e&&"UploadError"===e.name)throw e;if(e&&e.error)throw new N("custom",e.error);r.timer=setTimeout(n,te)}).catch(t)}()})},r.loadVideoInfo=function(){r.token.throwIfCancelled();var e=r.video.uploadfile[0].video_id;return h(function(){return r.load("https://lens.zhihu.com/api/videos/"+e)},{cancellationToken:r.token}).then(function(e){r.token.throwIfCancelled();var t=e.thumbnail,n=e.cover_info;r.videoInfo={id:e.id,thumbnail:n?n.thumbnail:t}}).catch(function(e){throw r.token.throwIfCancelled(),new N("unknown",e)})},o=n,v(r,o)}return y(t,e),ee(t,[{key:"handleStart",value:function(){var e=this;this.cts=new X,this.token=this.cts.token,this.update({uploadingType:"upload",uploadedSize:0}),Promise.resolve().then(this.createVideo).then(function(){e.token.throwIfCancelled(),e.previousTime=Date.now()}).then(this.uploadVideo).then(function(){return e.handleUploadingStatus("UPLOADING_SUCCESS")}).then(function(){e.update({uploadingType:"convert",uploadTime:Date.now()-e.previousTime}),e.previousTime=Date.now()}).then(this.checkVideoStatus).then(function(){e.timer&&clearTimeout(e.timer)}).then(function(){e.update({transcodeTime:Date.now()-e.previousTime})}).then(this.loadVideoInfo).then(function(){e.token.throwIfCancelled(),e.complete(e.videoInfo)}).catch(function(t){e.token.throwIfCancelled(),e.error(t)}).catch(function(){})}},{key:"handleAbort",value:function(){this.update({uploadedSize:0}),this.handleUploadingStatus("CANCEL"),this.cts.cancel(),this.client.cancel(),this.video=null}},{key:"handleError",value:function(){this.update({uploadedSize:0}),this.handleUploadingStatus("UPLOADING_FAILURE"),this.video=null}},{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(e,$({},t,{headers:$({},t.headers,{Accept:"application/json"}),credentials:"include"})).then(function(e){return e.json().catch(function(){return{}}).then(function(t){if(!e.ok)throw t;return t})})}}]),t}(U),ae=oe,ie=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),se=function(e){function t(){return g(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,e),ie(t,[{key:"handleStart",value:function(){var e=this;this.props.uploadEmbeddedVideo(this.value).then(function(t){e.state.aborted||e.complete(t)}).catch(function(t){e.state.aborted||e.error(t)})}}]),t}(U),ce=se,ue=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),le=function(e){function t(){return _(this,t),E(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return O(t,e),ue(t,[{key:"handleStart",value:function(){var e=this,t=new FormData;t.append("document",this.value),fetch("https://www.zhihu.com/api/v4/document_convert",{method:"POST",body:t,credentials:"include"}).then(function(e){return e.json()}).then(function(t){e.state.aborted||e.complete(t)}).catch(function(t){e.state.aborted||e.error(t)})}}]),t}(U),fe=le,pe={image:H,video:ae,document:fe,"embedded-video":ce},de=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),he=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};C(this,t);var n=k(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleUploadStart=function(){0===n.uploadingCount&&n.emit("start"),n.uploadingCount++},n.handleUploadEnd=function(){0===--n.uploadingCount&&n.emit("end")},n.handleUploadError=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];n.emit.apply(n,["error"].concat(t))},n.props=e,n.sessions={},Object.keys(pe).forEach(function(e){n.sessions[e]=new Map}),n.uploadingCount=0,n}return S(t,e),de(t,[{key:"createSession",value:function(e,t){var n=this,r=new pe[e](t,this.props);return r.on("error",function(t){try{n.handleUploadError(t,e,r)}catch(e){}}),r.on("start",this.handleUploadStart),r.on("abort",this.handleUploadEnd),r.on("complete",this.handleUploadEnd),r.on("error",this.handleUploadEnd),this.sessions[e].set(t,r),r}},{key:"getSession",value:function(e,t){return this.sessions[e].get(t)||this.createSession(e,t)}}]),t}(I.EventEmitter),me=he,ve=n(0),ye=n.n(ve),ge=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),be=A;n.d(t,"b",function(){return me}),n.d(t,"a",function(){return be})},830:function(e,t,n){!function(t,r){e.exports=r(n(1),n(0),n(12))}(0,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n;var i=function(e){var t="undefined"==typeof DOMParser?null:new DOMParser;return t?t.parseFromString(e,"text/html"):null},s=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if("text/html"===r.type){r.getAsString(function(e){var n=i(e).querySelector("img");n&&n.src&&t(n.src)});break}}},c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=!("undefined"==typeof window||"undefined"==typeof navigator||!("ontouchstart"in window||navigator.msMaxTouchPoints>0)),p="undefined"!=typeof File,d={touch:{react:{down:"onTouchStart",mouseDown:"onMouseDown",drag:"onTouchMove",drop:"onTouchEnd",move:"onTouchMove",mouseMove:"onMouseMove",up:"onTouchEnd",mouseUp:"onMouseUp"},native:{down:"touchstart",mouseDown:"mousedown",drag:"touchmove",drop:"touchend",move:"touchmove",mouseMove:"mousemove",up:"touchend",mouseUp:"mouseup"}},desktop:{react:{down:"onMouseDown",drag:"onDragOver",drop:"onDrop",move:"onMouseMove",up:"onMouseUp"},native:{down:"mousedown",drag:"dragStart",drop:"drop",move:"mousemove",up:"mouseup"}}},h=f?d.touch:d.desktop,m="undefined"!=typeof window&&window.devicePixelRatio?window.devicePixelRatio:1,v=function(e,t,n,r,o,a){if(0===a)e.rect(t,n,r,o);else{var i=r-a,s=o-a;e.translate(t,n),e.arc(a,a,a,Math.PI,1.5*Math.PI),e.lineTo(i,0),e.arc(i,a,a,1.5*Math.PI,2*Math.PI),e.lineTo(r,s),e.arc(i,s,a,2*Math.PI,.5*Math.PI),e.lineTo(a,o),e.arc(a,s,a,.5*Math.PI,Math.PI),e.translate(-t,-n)}},y=function(e){function i(e){r(this,i);var t=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.state={drag:!1,my:null,mx:null,image:{x:.5,y:.5}},t.setCanvas=t.setCanvas.bind(t),t.handleMouseMove=t.handleMouseMove.bind(t),t.handleMouseDown=t.handleMouseDown.bind(t),t.handleMouseUp=t.handleMouseUp.bind(t),t.handleDragOver=t.handleDragOver.bind(t),t.handleDrop=t.handleDrop.bind(t),t}return a(i,t.Component),l(i,[{key:"isVertical",value:function(){return this.props.rotate%180!=0}},{key:"getBorders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.border;return Array.isArray(e)?e:[e,e]}},{key:"getDimensions",value:function(){var e=this.props,t=e.width,n=e.height,r=e.rotate,o=e.border,a={},i=this.getBorders(o),s=u(i,2),c=s[0],l=s[1],f=t,p=n;return this.isVertical()?(a.width=p,a.height=f):(a.width=f,a.height=p),a.width+=2*c,a.height+=2*l,{canvas:a,rotate:r,width:t,height:n,border:o}}},{key:"getImage",value:function(){var e=this.getCroppingRect(),t=this.state.image;e.x*=t.resource.width,e.y*=t.resource.height,e.width*=t.resource.width,e.height*=t.resource.height;var n=document.createElement("canvas");this.isVertical()?(n.width=e.height,n.height=e.width):(n.width=e.width,n.height=e.height);var r=n.getContext("2d");return r.translate(n.width/2,n.height/2),r.rotate(this.props.rotate*Math.PI/180),r.translate(-n.width/2,-n.height/2),this.isVertical()&&r.translate((n.width-n.height)/2,(n.height-n.width)/2),r.drawImage(t.resource,-e.x,-e.y),n}},{key:"getImageScaledToCanvas",value:function(){var e=this.getDimensions(),t=e.width,n=e.height,r=document.createElement("canvas");return this.isVertical()?(r.width=n,r.height=t):(r.width=t,r.height=n),this.paintImage(r.getContext("2d"),this.state.image,0,1),r}},{key:"getXScale",value:function(){var e=this.props.width/this.props.height,t=this.state.image.width/this.state.image.height;return Math.min(1,e/t)}},{key:"getYScale",value:function(){var e=this.props.height/this.props.width,t=this.state.image.height/this.state.image.width;return Math.min(1,e/t)}},{key:"getCroppingRect",value:function(){var e=this.props.position||{x:this.state.image.x,y:this.state.image.y},t=1/this.props.scale*this.getXScale(),n=1/this.props.scale*this.getYScale(),r={x:e.x-t/2,y:e.y-n/2,width:t,height:n},o=0,a=1-r.width,i=0,s=1-r.height;return(t>1||n>1)&&(o=-r.width,a=1,i=-r.height,s=1),c({},r,{x:Math.max(o,Math.min(r.x,a)),y:Math.max(i,Math.min(r.y,s))})}},{key:"isDataURL",value:function(e){if(null===e)return!1;var t=/^\s*data:([a-z]+\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\-._~:@\/?%\s]*\s*$/i;return!!e.match(t)}},{key:"loadImage",value:function(e){p&&e instanceof File?this.loadImageFile(e):"string"==typeof e&&this.loadImageURL(e)}},{key:"loadImageURL",value:function(e){var t=new Image;t.onload=this.handleImageReady.bind(this,t),t.onerror=this.props.onLoadFailure,!this.isDataURL(e)&&this.props.crossOrigin&&(t.crossOrigin=this.props.crossOrigin),t.src=e}},{key:"loadImageFile",value:function(e){var t=this,n=new FileReader;n.onload=function(e){return t.loadImageURL(e.target.result)},n.readAsDataURL(e)}},{key:"componentDidMount",value:function(){var e=n.findDOMNode(this.canvas).getContext("2d");if(this.props.image&&this.loadImage(this.props.image),this.paint(e),document){var t=h.native;document.addEventListener(t.move,this.handleMouseMove,!1),document.addEventListener(t.up,this.handleMouseUp,!1),f&&(document.addEventListener(t.mouseMove,this.handleMouseMove,!1),document.addEventListener(t.mouseUp,this.handleMouseUp,!1))}}},{key:"componentWillUnmount",value:function(){if(document){var e=h.native;document.removeEventListener(e.move,this.handleMouseMove,!1),document.removeEventListener(e.up,this.handleMouseUp,!1),f&&(document.removeEventListener(e.mouseMove,this.handleMouseMove,!1),document.removeEventListener(e.mouseUp,this.handleMouseUp,!1))}}},{key:"componentDidUpdate",value:function(e,t){var r=n.findDOMNode(this.canvas),o=r.getContext("2d");o.clearRect(0,0,r.width,r.height),this.paint(o),this.paintImage(o,this.state.image,this.props.border),e.image===this.props.image&&e.width===this.props.width&&e.height===this.props.height&&e.position===this.props.position&&e.scale===this.props.scale&&e.rotate===this.props.rotate&&t.my===this.state.my&&t.mx===this.state.mx&&t.image.x===this.state.image.x&&t.image.y===this.state.image.y||this.props.onImageChange()}},{key:"handleImageReady",value:function(e){var t=this.getInitialSize(e.width,e.height);t.resource=e,t.x=.5,t.y=.5,this.setState({drag:!1,image:t},this.props.onImageReady),this.props.onLoadSuccess(t)}},{key:"getInitialSize",value:function(e,t){var n=void 0,r=void 0,o=this.getDimensions();return o.height/o.width>t/e?r=e*((n=this.getDimensions().height)/t):n=t*((r=this.getDimensions().width)/e),{height:n,width:r}}},{key:"componentWillReceiveProps",value:function(e){(e.image&&this.props.image!==e.image||this.props.width!==e.width||this.props.height!==e.height)&&this.loadImage(e.image)}},{key:"paintImage",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m;if(t.resource){var o=this.calculatePosition(t,n);e.save(),e.translate(e.canvas.width/2,e.canvas.height/2),e.rotate(this.props.rotate*Math.PI/180),e.translate(-e.canvas.width/2,-e.canvas.height/2),this.isVertical()&&e.translate((e.canvas.width-e.canvas.height)/2,(e.canvas.height-e.canvas.width)/2),e.scale(r,r),e.globalCompositeOperation="destination-over",e.drawImage(t.resource,o.x,o.y,o.width,o.height),e.restore()}}},{key:"calculatePosition",value:function(e,t){e=e||this.state.image;var n=this.getBorders(t),r=u(n,2),o=r[0],a=r[1],i=this.getCroppingRect(),s=e.width*this.props.scale,c=e.height*this.props.scale,l=-i.x*s,f=-i.y*c;return this.isVertical()?(l+=a,f+=o):(l+=o,f+=a),{x:l,y:f,height:c,width:s}}},{key:"paint",value:function(e){e.save(),e.scale(m,m),e.translate(0,0),e.fillStyle="rgba("+this.props.color.slice(0,4).join(",")+")";var t=this.props.borderRadius,n=this.getDimensions(),r=this.getBorders(n.border),o=u(r,2),a=o[0],i=o[1],s=n.canvas.height,c=n.canvas.width;t=Math.max(t,0),t=Math.min(t,c/2-a,s/2-i),e.beginPath(),v(e,a,i,c-2*a,s-2*i,t),e.rect(c,0,-c,s),e.fill("evenodd"),e.restore()}},{key:"handleMouseDown",value:function(e){(e=e||window.event).preventDefault(),this.setState({drag:!0,mx:null,my:null})}},{key:"handleMouseUp",value:function(){this.state.drag&&(this.setState({drag:!1}),this.props.onMouseUp())}},{key:"handleMouseMove",value:function(e){if(e=e||window.event,!1!==this.state.drag){var t=e.targetTouches?e.targetTouches[0].pageX:e.clientX,n=e.targetTouches?e.targetTouches[0].pageY:e.clientY,r={mx:t,my:n},o=this.props.rotate;if(o%=360,o=o<0?o+360:o,this.state.mx&&this.state.my){var a=this.state.mx-t,i=this.state.my-n,s=this.state.image.width*this.props.scale,u=this.state.image.height*this.props.scale,l=this.getCroppingRect(),f=l.x,p=l.y;f*=s,p*=u;var d=function(e){return e*(Math.PI/180)},h=Math.cos(d(o)),m=Math.sin(d(o)),v=p+-a*m+i*h,y={x:(f+a*h+i*m)/s+1/this.props.scale*this.getXScale()/2,y:v/u+1/this.props.scale*this.getYScale()/2};this.props.onPositionChange(y),r.image=c({},this.state.image,y)}this.setState(r),this.props.onMouseMove(e)}}},{key:"handleDragOver",value:function(e){(e=e||window.event).preventDefault()}},{key:"handleDrop",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event;t.stopPropagation(),t.preventDefault();var n=t.dataTransfer,r=n.files,o=n.items;r&&r.length?(this.props.onDropFile(t),this.loadImageFile(r[0])):o&&o.length&&s(o,function(t){return e.loadImage(t)})}},{key:"setCanvas",value:function(e){this.canvas=e}},{key:"render",value:function(){var e=this.getDimensions(),n={width:e.canvas.width,height:e.canvas.height,cursor:this.state.drag?"grabbing":"grab"},r={width:e.canvas.width*m,height:e.canvas.height*m,style:c({},n,this.props.style)};return r[h.react.down]=this.handleMouseDown,r[h.react.drag]=this.handleDragOver,r[h.react.drop]=this.handleDrop,f&&(r[h.react.mouseDown]=this.handleMouseDown),t.createElement("canvas",c({ref:this.setCanvas},r))}}]),i}();return y.propTypes={scale:e.number,rotate:e.number,image:e.oneOfType([e.string].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(p?[e.instanceOf(File)]:[]))),border:e.oneOfType([e.number,e.arrayOf(e.number)]),borderRadius:e.number,width:e.number,height:e.number,position:e.shape({x:e.number,y:e.number}),color:e.arrayOf(e.number),style:e.object,crossOrigin:e.oneOf(["","anonymous","use-credentials"]),onDropFile:e.func,onLoadFailure:e.func,onLoadSuccess:e.func,onImageReady:e.func,onImageChange:e.func,onMouseUp:e.func,onMouseMove:e.func,onPositionChange:e.func},y.defaultProps={scale:1,rotate:0,border:25,borderRadius:0,width:200,height:200,color:[0,0,0,.5],style:{},onDropFile:function(){},onLoadFailure:function(){},onLoadSuccess:function(){},onImageReady:function(){},onImageChange:function(){},onMouseUp:function(){},onMouseMove:function(){},onPositionChange:function(){}},y})},831:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),f=r(l),p=n(11),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(p),h=n(857),m=r(h);n(858);var v=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=o(e,["className"]);return f.default.createElement("div",{className:t},f.default.createElement(d.Size,{size:18}),f.default.createElement(m.default,c({type:"range",className:"RangeInput",min:"1",max:"2",step:"0.01"},n)),f.default.createElement(d.Size,{size:22}))}}]),t}(l.Component);t.default=v},832:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m,v,y,g,b,w,_,E=n(1),O=n.n(E),C=n(0),k=n.n(C),S=n(5),x=n(2),T=n.n(x),j=n(265),P=n.n(j),A=n(11),I=n(3),M=n(10),N=n(39),R=n(268),D=n(245),L=n(90),F=n(783),U=n(790),B=n.n(U),z=n(243),K=n(24),q=n(273),H=n.n(q),V=function(e,t,n){var r=!1,o=H()(function(){r=!1,e.apply(void 0,arguments)},t,n);return Object.assign(function(){r=!0,o.apply(void 0,arguments)},{cancel:o.cancel,flush:o.flush,isPending:function(){return r}})},W=n(145),G=n(6),Y=n.n(G),Z=n(246),X=n(48),J=n.n(X),Q=(n(784),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),$="AnswerOrg::know",ee=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.handleHide=function(){K.a.set($,!0),a.props.onClose()},i=n,o(a,i)}return a(t,e),Q(t,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose;return k.a.createElement(J.a,{title:"机构帐号提问规则",subtitle:"这是一个「机构提问」，请在回答前了解以下规则",onClose:n},t&&k.a.createElement("div",null,k.a.createElement("ul",{className:"AnswerModal-list"},k.a.createElement("li",null,"1. 提问机构如需使用你的回答，由提问机构联系你，共同商定确认使用条件。"),k.a.createElement("li",null,"2.「机构提问」下的回答，站内传播与社区公共提问下的回答有所区别。"),k.a.createElement("li",null,"3. 提问机构可能「隐藏」回答，被「隐藏」回答不在社区内流通。")),k.a.createElement("a",{className:"AnswerModal-moreLink",href:"/org-intro#org-question",target:"_blank"},"了解更多"),k.a.createElement(X.ModalButtonGroup,{direction:"horizontal"},k.a.createElement(I.default,{onClick:this.handleHide},"不再显示"),k.a.createElement(I.default,{color:"blue",preset:"primary",onClick:n},"知道了"))))}}],[{key:"getKnown",value:function(){return K.a.get($)}}]),t}(C.Component),te=n(29),ne=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),re="AnswerBrand::know",oe=function(e){function t(){var e,n,r,o;i(this,t);for(var a=arguments.length,c=Array(a),u=0;u<a;u++)c[u]=arguments[u];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.handleHide=function(){K.a.set(re,!0),r.props.onClose()},o=n,s(r,o)}return c(t,e),ne(t,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose;return k.a.createElement(te.default,{title:"品牌提问规则",subtitle:"这是一个「品牌提问」，请在回答前了解：",onClose:n},t&&k.a.createElement("div",null,k.a.createElement("p",null,"「品牌提问」由品牌方管理，回答由品牌方筛选后展示，传播与社区提问有所区别。回答著作权归作者所有。"),k.a.createElement("a",{className:"AnswerModal-moreLink",href:"/introduction/brand_question",target:"_blank"},"了解品牌提问"),k.a.createElement(te.ModalButtonGroup,{direction:"horizontal"},k.a.createElement(I.default,{onClick:this.handleHide},"知道了，继续回答"),k.a.createElement(I.default,{color:"blue",preset:"primary",onClick:n},"取消"))))}}],[{key:"getKnown",value:function(){return K.a.get(re)}}]),t}(C.Component),ae=n(745),ie=n(272),se=n(785),ce=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ue=(v=m=function(e){function t(){return u(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),ce(t,[{key:"render",value:function(){var e=this.props,t=e.onRef,n=e.onChange;return k.a.createElement("input",{type:"file",style:{display:"none"},accept:"image/png,image/jpeg",ref:t,onChange:n})}}]),t}(C.PureComponent),m.propTypes={onChange:O.a.func,onRef:O.a.func},v),le=n(37),fe=n(146),pe=n(96),de=n(251),he=n(14),me=n(281),ve=n(786),ye=function(){return K.a.set("documentUploadAttentionHidden","true")},ge=function(){return"true"!==K.a.get("documentUploadAttentionHidden")},be=n(876),we=n.n(be),_e=n(13),Ee=(n(877),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Oe=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["草稿保存于",""],["草稿保存于",""]),Ce={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},ke=(y=Object(S.connect)(function(e,t){var n=e.entities,r=n.questions,o=n.drafts,a=void 0===o?{}:o,i=n.answers,s=e.env.experiment.isOffice,c=e.switches,u=e.currentUser,l=Object.values(i).filter(function(e){return e.author.urlToken===u})[0]||{},f=l.rewardInfo&&l.rewardInfo.tagline;return{question:r[t.question.id]||t.question,draft:a["question_"+t.question.id],switches:c,rewardTagline:f,isOffice:s}},{addDraft:le.b,updateDraft:le.L,deleteDraft:le.i,uploadImage:fe.b,showNotification:he.h,updateQuestionRewardinfo:de.n,updateVideoContent:pe.d},null,{withRef:!0}))((w=b=function(e){function t(e,n){p(this,t);var r=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));_.call(r);var o=r.props,a=o.defaultValue,i=o.draft,s=i?i.editableContent:a;return r.state={draft:s,content:{toHTML:function(){return""}},isEmpty:!s,isTyping:!1,reshipmentSettings:n.currentUser.caEnabled?"need_payment":"allowed",commentPermission:n.currentUser.lastCommentPermission||"all",answerModalShown:!1,focusing:!1,selectedText:null,loadingShown:!1,isUploading:!1,nextCmtPermission:"",commentModalShown:!1,rewardNotication:!0,checked:e.isRewardable,isFullscreen:!1,isToolbarSticky:!1,isLeaveActive:!1,uploadVideoPosterMoalShown:!1,documentUploadAttentionShown:!1,dateNow:0,rewardModalShown:!1},r.hasEdited=!1,r}return h(t,e),Ee(t,[{key:"componentDidMount",value:function(){var e=this;this.shouldAnswerOrgQuestionModalShow=!ee.getKnown(),this.onFocusAuthChecked=!1,this.attentionShowTimeout=setTimeout(this.updateAttentionState,2e3),document.addEventListener("compositionstart",this.onCompositionStart),document.addEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=function(){return e.state.isUploading||e.composition||e.syncDraft.isPending()||e.props.draft&&e.props.draft.updating?"草稿尚未保存完毕，确定离开此页？":void 0},this.setState({dateNow:Date.now()}),this.reRenderTimer=setInterval(function(){return e.setState({dateNow:Date.now()})},6e4)}},{key:"componentWillReceiveProps",value:function(e){if(!this.draftLoaded&&!this.state.draft&&!this.props.draft&&e.draft){var t=e.draft.editableContent;t&&(this.setState({draft:t,isEmpty:!t}),this.editable&&!this.editable.toHTML()&&this.editable.resetWithValue(t)),this.draftLoaded=!0}}},{key:"componentDidUpdate",value:function(e,t){var n=this,r=this.state,o=r.focusing,a=r.documentUploadAttentionShown;if(this.props.tagline){var i=K.a.get("rewardNotication");o&&!i&&(this.setState({rewardNotication:!1}),K.a.set("rewardNotication",!0),this.timeout=setTimeout(function(){n.setState({rewardNotication:!0})},2e3))}var s=a,c=t.documentUploadAttentionShown;s&&!c&&(this.attentionHideTimeout=setTimeout(this.hideAttention,5e3))}},{key:"componentWillUnmount",value:function(){this.syncDraft.cancel(),document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=null,this.timeout&&clearTimeout(this.timeout),this.reRenderTimer&&clearInterval(this.reRenderTimer),this.clearAttentionTimeout()}},{key:"getCloneContent",value:function(){return this.editable.state.editorState.getCurrentContent()}},{key:"clearAttentionTimeout",value:function(){this.attentionShowTimeout&&clearTimeout(this.attentionShowTimeout),this.attentionHideTimeout&&clearTimeout(this.attentionHideTimeout)}},{key:"deleteDraft",value:function(){var e=this.props,t=e.question,n=e.draft,r=e.deleteDraft;n&&r(t.id)}},{key:"renderReshipmentSettings",value:function(e){var t=this;return Object.keys(Ce).map(function(n){var r=Object(ve.a)(n,e);return k.a.createElement(N.b,{key:n,onClick:function(){return t.handleReshipmentSettings(n)},className:Object(ve.b)(n,e)},r&&k.a.createElement(M.a,{className:"Button-icon",name:r}),Ce[n])})}},{key:"renderCommentPermission",value:function(e,t){var n=this,r=t?_e.t:_e.v;return Object.keys(r).map(function(t){var o=Object(ve.a)(t,e);return k.a.createElement(N.b,{key:t,onClick:function(){return n.handleCommentPermission(t)},className:Object(ve.b)(t,e)},o&&k.a.createElement(M.a,{className:"Button-icon",name:o}),r[t])})}},{key:"renderFooter",value:function(){var e=this,t=this.context.currentUser,n=this.props,r=n.draft,o=n.isEdit,a=n.switches,i=n.rewardTagline,s=this.state,c=s.checked,u=s.commentPermission,l=s.focusing,f=s.isEmpty,p=s.isTyping,d=s.isFullscreen,h=s.loadingShown,m=s.reshipmentSettings,v=s.rewardNotication,y=s.rewardModalShown,g=s.rewardTagline,b=s.selectedText,w=s.dateNow,_=null;if(h)_=k.a.createElement(L.a,{count:3});else if(b)_=b.length+" 个字";else if(r){var E=null;E=r.updating||p?"草稿保存中…":r.updated&&w<1e3*r.createdTime+6e4?"草稿已保存":r.updateFailed?k.a.createElement("span",{className:"AnswerForm-draftStatus--failed"},"草稿保存失败"):P()(Oe,Object(z.d)(r.createdTime)),_=k.a.createElement("div",null,k.a.createElement(I.default,{preset:"plain",className:"AnswerForm-delete","aria-label":"删除草稿","data-tooltip":"删除草稿",onClick:this.onDeleteDraftModalShow},k.a.createElement(M.a,{name:"delete"})),E)}var O=k.a.createElement("div",{className:T()("AnswerForm-footer",{"AnswerForm-footer--hidden":!d&&!l&&f})},k.a.createElement("div",{className:"AnswerForm-footerContent AnswerForm-container"},k.a.createElement("div",{className:"AnswerForm-status"},_),!v&&k.a.createElement("span",{className:"AnswerForm-Notication"},"你的回答可以开启赞赏了"),a.isAnswerRewardable&&k.a.createElement("div",{className:"AnswerForm-openRewardButton"},k.a.createElement("label",{className:T()("AnswerForm-openRewardLabel",{"AnswerForm-openRewardDraftsLabel":r}),ref:function(t){e.label=t},htmlFor:"AnswerForm-openRewardInput"},k.a.createElement("input",{type:"checkbox",id:"AnswerForm-openRewardInput",checked:c,onChange:this.onChangerewardSettings}),"开启赞赏"),y&&k.a.createElement(se.a,{submitRewardText:this.onSubmitReward,onClose:this.unactivateReward,tagline:g||i,edit:!1})),k.a.createElement("div",{className:"AnswerForm-footerRight"},o?k.a.createElement("a",{className:"AnswerForm-cancel",onClick:this.onCancel},r?"保存草稿并离开":"取消"):k.a.createElement(N.c,{toggler:k.a.createElement(I.default,{preset:"plain",onRef:function(t){e.settingsTogglerEl=t}},k.a.createElement(M.a,{left:!0,name:"setting"}),"设置"),reversed:!0,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selectMenuItem"},this.renderReshipmentSettings(m),k.a.createElement(N.a,null),this.renderCommentPermission(u,t.isOrg)),k.a.createElement(I.default,{className:"AnswerForm-submit",preset:"primary",color:"blue",onClick:this.onSubmit},o?"提交修改":"提交回答"))));return d?O:k.a.createElement(D.a,{bottom:!0,container:function(){return e.form}},O)}},{key:"render",value:function(){var e=this,t=this.context.currentUser,n=this.props,r=n.bordered,o=n.className,a=n.defaultValue,i=n.draft,s=n.isEdit,c=n.question,u=n.switches.couldSetPoster,l=n.updateVideoContent,f=this.state,p=f.deleteDraftModalShown,d=f.commentModalShown,h=f.nextCmtPermission,m=f.isFullscreen,v=f.isToolbarSticky,y=f.isLeaveActive,g=f.uploadVideoPosterMoalShown,b=f.type,w=f.image,_=f.documentUploadAttentionShown,E=(s?"修改":"写")+"回答...";"commercial"===c.questionType&&(E="这是一个「品牌提问」，请在回答前了解：「品牌提问」由品牌方管理，回答由品牌方筛选后展示，传播与社区提问有所区别。回答著作权归作者所有。");var O=k.a.createElement(ie.a,{className:T()("AnswerForm-editor","AnswerForm-container",{isToolbarSticky:v}),onRef:function(t){e.editable=t},large:!0,spread:!0,allowDragAndDrop:!0,allowLinkCard:!0,allowMention:!0,allowToolbar:!0,allowUploadDocument:!0,allowVideoPosterChange:u,allowToolbarSticky:!m,showDocumentUploadAttention:_,toolbarStickyOffset:_e.f,getToolbarPlugins:this.getToolbarPlugins,minRows:3,placeholder:E,defaultValue:i?i.editableContent:a,onChange:this.onChangeContent,onAfterChange:this.onAfterChangeContent,onFocus:this.onFocusWithAuth,onSelectText:this.onSelectText,onSubmit:this.onSubmit,onError:this.handleError,onLoadStart:this.onLoadStart,onLoadEnd:this.onLoadEnd,onUploadStart:this.handleUploadStart,onUploadEnd:this.handleUploadEnd,onUploadError:this.handleUploadError,onBeforeVideoUpload:this.handleBeforeVideoUpload,handleUpdateVideoContent:l,onBeforeCommand:this.handleEditorCommand,onVideoPosterButtonClick:this.onVideoPosterButtonClick,logo:we.a,location:c.title,sourceType:null});return k.a.createElement(Z.a,{module:"AnswerEditView",content:{type:"Answer",parent_token:String(c.id),author_member_hash_id:t.id}},k.a.createElement("form",{ref:function(t){e.form=t},className:T()("AnswerForm",o,{"AnswerForm--bordered":r}),onSubmit:function(e){return e.preventDefault()},noValidate:!0},m&&k.a.createElement("div",{className:T()("AnswerForm-fullscreenBackdrop",{isLeaveActive:y})}),k.a.createElement("div",{className:T()({"AnswerForm-fullscreenContent":m,isLeaveActive:y}),ref:function(t){return e.fullscreenContent=t}},k.a.createElement("div",{className:T()({"AnswerForm-fullscreenScroller":m}),ref:function(t){return e.scroller=t},onScroll:this.handleScroll},m&&k.a.createElement("div",{className:"AnswerForm-container",ref:this.handleFullscreenRef},k.a.createElement("div",{className:"AnswerForm-title"},c.title)),m&&k.a.createElement(I.default,{className:"AnswerForm-exitFullscreenButton",onClick:this.exitFullscreen,onMouseDown:function(e){return e.preventDefault()}},k.a.createElement(A.FullscreenExit,{text:!0,center:!0})," 退出全屏模式"),O),this.renderFooter()),m&&k.a.cloneElement(O,{readOnly:!0,className:"AnswerForm-cloneEditor",defaultValue:this.getCloneContent(),allowToolbarSticky:!1,onRef:function(t){return e.cloneEditor=t}}),"org"===c.questionType&&k.a.createElement(ee,{shown:this.state.answerModalShown,onClose:this.handleAnswerModalHide}),"commercial"===c.questionType&&k.a.createElement(oe,{shown:this.state.answerModalShown,onClose:this.handleAnswerModalHide}),k.a.createElement(ae.a,{title:"清除草稿",subtitle:s?"你确定要清除保存的草稿并取消编辑吗？":"你确定要清除保存的草稿吗？",shown:p,onCancel:this.onDeleteDraftModalHide,onSubmit:this.onDeleteDraft}),k.a.createElement(ae.a,{title:"你确定要更改评论权限吗？",subtitle:"censor"===h?"更改后，已有评论不变，新评论需要经过筛选才会公开显示":"更改后，所有待筛选评论都会被公开显示出来",shown:d,onCancel:this.onCommentModalClose,onSubmit:this.handleCommentPermissionSettings}),g&&k.a.createElement(B.a,{resetUpload:this.resetUpload,uploadImage:this.handleUploadImage,type:b,image:w,width:256,height:144,title:"视频封面"}),k.a.createElement(ue,{onRef:function(t){e.inputEl=t},onChange:this.handleVideoPosterChange})))}}]),t}(C.Component),b.propTypes={question:O.a.object,bordered:O.a.bool,isEdit:O.a.bool,defaultValue:O.a.string},b.defaultProps={bordered:!1,isEdit:!1},b.contextTypes={currentUser:O.a.object,authRequired:O.a.func,router:O.a.object},_=function(){var e=this;this.onCompositionStart=function(){e.composition=!0,e.syncDraft.cancel()},this.onCompositionEnd=function(){e.composition=!1,e.prevValue&&e.syncDraft(e.prevValue),e.prevValue=null},this.onChangeContent=function(t){e.hasEdited=!0,e.setState({content:t,isEmpty:t.isEmpty,isTyping:!0}),e.composition?e.prevValue=t:e.syncDraft(t)},this.onAfterChangeContent=function(e){var t=e.getSelection(),n=t.getFocusKey(),r=document.querySelector('[data-offset-key="'+n+'-0-0"]'),o=64-(window.innerHeight-r.getBoundingClientRect().bottom);if(o>=0){var a=window.pageYOffset+o;scrollTo(0,a)}},this.onChangeReshipmentSettings=function(t){if("need_payment"===t&&!e.context.currentUser.caEnabled)return void window.open("/copyright/invite");e.setState({reshipmentSettings:t})},this.onSelectText=function(t){e.setState({selectedText:t.replace(/\s/g,"")})},this.onChangerewardSettings=function(t){var n=t.target.checked,r=e.props,o=r.question,a=o.relationship.isAnonymous,i=o.id,s=r.showNotification,c=e.state.rewardTagline;return a?void s("匿名回答无法开启赞赏，请先取消匿名","red"):!n||c?(e.setState({rewardTagline:"",checked:!1}),void e.props.updateQuestionRewardinfo(i,!1)):void e.activateReward()},this.onSubmitReward=function(t){e.setState({rewardTagline:t,checked:!0});var n=e.props.question.id;Promise.resolve(e.props.updateQuestionRewardinfo(n,!0)).then(function(){return e.unactivateReward()})},this.onDeleteDraftModalShow=function(){e.setState({deleteDraftModalShown:!0})},this.onDeleteDraft=function(){e.props.isEdit||(e.editable.reset(),e.setState({draft:"",content:{toHTML:function(){return""}},isEmpty:!0})),e.deleteDraft();var t=e.props.onDeleteDraft;t&&t()},this.onDeleteDraftModalHide=function(){e.setState({deleteDraftModalShown:!1})},this.onSubmit=this.context.authRequired(function(t,n){var r=e.state,o=r.reshipmentSettings,a=r.commentPermission,i=r.rewardTagline,s=e.editable.toHTML();if(s){var c=e.props,u=c.isEdit,l=c.onSubmit,f=c.onCancel,p=c.showNotification,d=c.question.questionType;if(!e.editable)return void f();if(e.editable.hasVideo("upload"))return void e.handleError("video-uploading");if(e.editable.hasImage("upload"))return void e.handleError("image-uploading");if((e.editable.hasVideo("error")||e.editable.hasImage("error"))&&!n)return t.persist(),void F.a.confirm("草稿中含有"+(e.editable.hasVideo("error-review")?"审核":"上传")+"失败的内容，点击发布将自动过滤该内容。确定发布？",{text:{ok:"发布",cancel:"继续编辑"}}).then(function(){e.onSubmit(t,!0)});var h={content:s};u||(h.reshipmentSettings=o,h.commentPermission=a),h.rewardSetting={canReward:Boolean(i),tagline:i};var m=u?"Edit":"Answer";Promise.resolve(l(h)).then(function(){"commercial"===d&&p("已发布！由品牌筛选后进入推荐区。")}),Y.a.trackEvent(e,{action:m,is_intent:!1})}}),this.onCancel=function(){var t=e.props.onCancel;return e.editable.hasVideo("upload")?void e.handleError("video-uploading-draft"):e.editable.hasImage("upload")?void e.handleError("image-uploading-draft"):(e.hasEdited&&e.syncDraftImmediately(),void(t&&t()))},this.onFocus=function(){"org"===e.props.question.questionType&&e.shouldAnswerOrgQuestionModalShow&&e.handleAnswerOrgQuestionModalShow(),e.setState({focusing:!0})},this.onFocusWithAuth=function(){return e.onFocusAuthChecked?e.onFocus():(e.onFocusAuthChecked=!0,e.context.authRequired(e.onFocus)())},this.onSelectText=function(t){e.setState({selectedText:t.replace(/\s/g,"")})},this.onLoadStart=function(){e.setState({loadingShown:!0})},this.onLoadEnd=function(){e.setState({loadingShown:!1})},this.onCommentModalClose=function(){e.setState({commentModalShown:!1})},this.onVideoPosterButtonClick=function(t,n){e.handleUploadVideoPoster=n,e.inputEl.click(),e.videoId=t},this.getToolbarPlugins=function(){var t=e.state,n=t.isFullscreen,r=t.isLeaveActive;return(!n||r)&&k.a.createElement(R.a,{key:"enterFullscreen",icon:k.a.createElement(A.FullscreenEnter,{text:!0}),className:"AnswerForm-enterFullscreenButton",onClick:e.toggleFullscreen},"全屏模式")},this.updateAttentionState=function(){var t=ge();return e.setState({documentUploadAttentionShown:t})},this.hideAttention=function(){return e.clearAttentionTimeout(),e.state.documentUploadAttentionShown&&ye(),e.setState({documentUploadAttentionShown:!1})},this.toggleFullscreen=function(){var t=e.state.isFullscreen,n=function(){var t=e.scroller.querySelector(".Editable");return t?t.offsetTop:0};e.scrollTop=t?e.scroller.scrollTop-n():Math.max(-e.scroller.getBoundingClientRect().top,0),e.setState({isFullscreen:!t},function(){e.state.isFullscreen?e.scrollTop>0&&(e.scroller.scrollTop=e.scrollTop+n()):window.scrollTo(0,e.scroller.getBoundingClientRect().top-document.documentElement.getBoundingClientRect().top+e.scrollTop)})},this.exitFullscreen=function(){e.cloneEditor.resetWithValue(e.getCloneContent());var t=function t(){e.fullscreenContent.removeEventListener("animationend",t),e.setState({isLeaveActive:!1}),e.toggleFullscreen()};e.fullscreenContent.addEventListener("animationend",t),e.setState({isLeaveActive:!0})},this.handleFullscreenRef=function(t){t?W.hide():(W.show(),e.setState({isToolbarSticky:!1}))},this.handleScroll=function(){e.isHandleScrollPending||(e.isHandleScrollPending=!0,requestAnimationFrame(function(){var t=e.state,n=t.isFullscreen,r=t.isToolbarSticky,o=!1;if(n&&e.scroller){var a=e.scroller.querySelector(".Editable-toolbar");o=!!a&&e.scroller.scrollTop===a.offsetTop}o!==r&&e.setState({isToolbarSticky:o}),e.isHandleScrollPending=!1}))},this.closeRewardModal=function(){e.label.click()},this.handleUploadStart=function(){e.setState({isUploading:!0})},this.handleUploadEnd=function(){e.setState({isUploading:!1})},this.handleUploadError=function(t,n){switch(n){case"video":e.handleError("video-upload-error");break;case"image":e.handleError("image-upload-error",t)}},this.handleAnswerOrgQuestionModalShow=function(){e.setState({answerModalShown:!0}),e.shouldAnswerOrgQuestionModalShow=!1},this.handleAnswerModalHide=function(){e.setState({answerModalShown:!1})},this.syncDraftImmediately=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.state.content,n=t.toHTML();e.setState({isTyping:!1}),n?e.updateDraft(n).then(function(){Y.a.trackEvent(e,{action:"AutoSave"})}):e.deleteDraft()},this.syncDraft=V(this.syncDraftImmediately,2e3),this.updateDraft=function(t){var n=e.props,r=n.question.id,o=n.draft,a=n.addDraft,i=n.updateDraft;return o?i(r,t):a(r,t)},this.focus=function(){e.editable&&e.editable.focus()},this.hasVideo=function(){return!!e.editable&&e.editable.hasVideo()},this.handleCommentPermission=function(t){var n=e.context.currentUser,r=e.props.isEdit,o=e.state.commentPermission;n.isOrg||(r||"censor"!==t)&&(!r||"censor"!==o&&"censor"!==t)?e.setState({commentPermission:t}):e.setState({commentModalShown:!0,nextCmtPermission:t})},this.handleReshipmentSettings=function(t){"need_payment"!==t||e.context.currentUser.caEnabled||window.open("/copyright/invite"),e.setState({reshipmentSettings:t})},this.handleError=function(t,n){Object(me.a)(t,n,e.props.showNotification)},this.handleEditorCommand=function(t){"insert-video"!==t&&"click-more"!==t||e.hideAttention()},this.handleBeforeVideoUpload=function(){var t=e.props.question;return!t.relationship||!t.relationship.isAnonymous},this.handleCommentPermissionSettings=function(){var t=e.state.nextCmtPermission;e.setState({commentPermission:t}),e.onCommentModalClose()},this.unactivateReward=function(){e.setState({rewardModalShown:!1})},this.activateReward=function(){e.setState({rewardModalShown:!0})},this.handleVideoPosterChange=function(){var t=e.inputEl.files[0];if(!t||t.size>1024*_e.z*1024)return e.resetUpload(),void e.props.showNotification("抱歉！请上传大小为 "+_e.z+"M 以下的图片文件","red");var n=new Image,r=window.URL.createObjectURL(t);n.onload=function(){if(e.width<640||e.height<360)return void e.props.showNotification("请上传宽度不小于 640px，高度不小于 360px 的图片","red");e.setState({image:r,uploadVideoPosterMoalShown:!0,type:t.type})},n.src=r},this.handleUploadImage=function(t){e.props.uploadImage(t,"poster").then(function(t){var n=t.payload,r=n||{},o=r.src;o&&(e.resetUpload(),e.handleUploadVideoPoster(o),e.videoId&&e.props.updateVideoContent(e.videoId,o))})},this.resetUpload=function(){e.setState({uploadVideoPosterMoalShown:!1},function(){e.inputEl.value=""})}},g=w))||g;t.a=ke},833:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(10),i=function(e,t){return t>=e+1?"rating":t>=e+.5?"ratingHalf":"ratingNone"},s=function(e){var t=e.score;if(0===t)return null;var n=Math.round(2*t)/2;return o.a.createElement("div",{className:"Rating"},Array.from({length:5}).map(function(e,t){return o.a.createElement(a.a,{style:{marginLeft:0},key:t,width:15,height:15,name:i(t,n)})}))};t.a=s},835:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(773),s=n(738),c=n(753),u=n(797),l=n(726),f=n(774),p=n(740),d=n(836),h=l.List,m=l.Record,v=l.Repeat,y={entityMap:null,blockMap:null,selectionBefore:null,selectionAfter:null},g=m(y),b=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.getEntityMap=function(){return u},t.prototype.getBlockMap=function(){return this.get("blockMap")},t.prototype.getSelectionBefore=function(){return this.get("selectionBefore")},t.prototype.getSelectionAfter=function(){return this.get("selectionAfter")},t.prototype.getBlockForKey=function(e){return this.getBlockMap().get(e)},t.prototype.getKeyBefore=function(e){return this.getBlockMap().reverse().keySeq().skipUntil(function(t){return t===e}).skip(1).first()},t.prototype.getKeyAfter=function(e){return this.getBlockMap().keySeq().skipUntil(function(t){return t===e}).skip(1).first()},t.prototype.getBlockAfter=function(e){return this.getBlockMap().skipUntil(function(t,n){return n===e}).skip(1).first()},t.prototype.getBlockBefore=function(e){return this.getBlockMap().reverse().skipUntil(function(t,n){return n===e}).skip(1).first()},t.prototype.getBlocksAsArray=function(){return this.getBlockMap().toArray()},t.prototype.getFirstBlock=function(){return this.getBlockMap().first()},t.prototype.getLastBlock=function(){return this.getBlockMap().last()},t.prototype.getPlainText=function(e){return this.getBlockMap().map(function(e){return e?e.getText():""}).join(e||"\n")},t.prototype.getLastCreatedEntityKey=function(){return u.__getLastCreatedEntityKey()},t.prototype.hasText=function(){var e=this.getBlockMap();return e.size>1||e.first().getLength()>0},t.prototype.createEntity=function(e,t,n){return u.__create(e,t,n),this},t.prototype.mergeEntityData=function(e,t){return u.__mergeData(e,t),this},t.prototype.replaceEntityData=function(e,t){return u.__replaceData(e,t),this},t.prototype.addEntity=function(e){return u.__add(e),this},t.prototype.getEntity=function(e){return u.__get(e)},t.createFromBlockArray=function(e,n){var r=Array.isArray(e)?e:e.contentBlocks,o=i.createFromArray(r),a=o.isEmpty()?new f:f.createEmpty(o.first().getKey());return new t({blockMap:o,entityMap:n||u,selectionBefore:a,selectionAfter:a})},t.createFromText=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/\r\n?|\n/g,r=e.split(n),o=r.map(function(e){return e=d(e),new c({key:p(),text:e,type:"unstyled",characterList:h(v(s.EMPTY,e.length))})});return t.createFromBlockArray(o)},t}(g);e.exports=b},836:function(e,t,n){"use strict";function r(e){return e.replace(o,"")}var o=new RegExp("\r","g");e.exports=r},837:function(e,t,n){"use strict";function r(e){return e===l||e===f}function o(e){return r(e)||u(!1),e===l?"ltr":"rtl"}function a(e,t){return r(e)||u(!1),r(t)||u(!1),e===t?null:o(e)}function i(e){p=e}function s(){i(l)}function c(){return p||this.initGlobalDir(),p||u(!1),p}var u=n(729),l="LTR",f="RTL",p=null,d={NEUTRAL:"NEUTRAL",LTR:l,RTL:f,isStrong:r,getHTMLDir:o,getHTMLDirIfDifferent:a,setGlobalDir:i,initGlobalDir:s,getGlobalDir:c};e.exports=d},838:function(e,t,n){"use strict";var r=n(726),o=r.Map,a=n(0),i=n(775),s=a.createElement("ul",{className:i("public/DraftStyleDefault/ul")}),c=a.createElement("ol",{className:i("public/DraftStyleDefault/ol")}),u=a.createElement("pre",{className:i("public/DraftStyleDefault/pre")}),l=o({"header-one":{element:"h1"},"header-two":{element:"h2"},"header-three":{element:"h3"},"header-four":{element:"h4"},"header-five":{element:"h5"},"header-six":{element:"h6"},"unordered-list-item":{element:"li",wrapper:s},"ordered-list-item":{element:"li",wrapper:c},blockquote:{element:"blockquote"},atomic:{element:"figure"},"code-block":{element:"pre",wrapper:u},unstyled:{element:"div",aliasedElements:["p"]}});e.exports=l},839:function(e,t,n){"use strict";e.exports={BACKSPACE:8,TAB:9,RETURN:13,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,COMMA:188,PERIOD:190,A:65,Z:90,ZERO:48,NUMPAD_0:96,NUMPAD_9:105}},840:function(e,t,n){"use strict";function r(e,t){var n;if(t.isCollapsed()){var r=t.getAnchorKey(),a=t.getAnchorOffset();return a>0?(n=e.getBlockForKey(r).getEntityAt(a-1),o(e.getEntityMap(),n)):null}var i=t.getStartKey(),s=t.getStartOffset(),c=e.getBlockForKey(i);return n=s===c.getLength()?null:c.getEntityAt(s),o(e.getEntityMap(),n)}function o(e,t){if(t){return"MUTABLE"===e.__get(t).getMutability()?t:null}return null}e.exports=r},841:function(e,t,n){e.exports=n(7)(125)},842:function(e,t,n){"use strict";function r(e,t){var n=a.get(e,t);return"auto"===n||"scroll"===n}var o=n(1055),a={get:o,getScrollParent:function(e){if(!e)return null;for(var t=e.ownerDocument;e&&e!==t.body;){if(r(e,"overflow")||r(e,"overflowY")||r(e,"overflowX"))return e;e=e.parentNode}return t.defaultView||t.parentWindow}};e.exports=a},843:function(e,t,n){"use strict";function r(e){var t=o(e.ownerDocument||e.document);e.Window&&e instanceof e.Window&&(e=t);var n=a(e),r=e===t?e.ownerDocument.documentElement:e,i=e.scrollWidth-r.clientWidth,s=e.scrollHeight-r.clientHeight;return n.x=Math.max(0,Math.min(n.x,i)),n.y=Math.max(0,Math.min(n.y,s)),n}var o=n(1059),a=n(1060);e.exports=r},844:function(e,t,n){"use strict";function r(e){for(var t=e;t&&t!==document.documentElement;){var n=o(t);if(null!=n)return n;t=t.parentNode}return null}var o=n(926);e.exports=r},845:function(e,t,n){"use strict";var r=n(741),o=r.isPlatform("Mac OS X"),a={isCtrlKeyCommand:function(e){return!!e.ctrlKey&&!e.altKey},isOptionKeyCommand:function(e){return o&&e.altKey},hasCommandModifier:function(e){return o?!!e.metaKey&&!e.altKey:a.isCtrlKeyCommand(e)}};e.exports=a},846:function(e,t,n){"use strict";function r(e,t){var n=e.getSelection(),r=e.getCurrentContent(),o=n.getStartKey(),a=n.getStartOffset(),i=o,s=0;if(t>a){var c=r.getKeyBefore(o);if(null==c)i=o;else{i=c;s=r.getBlockForKey(c).getText().length}}else s=a-t;return n.merge({focusKey:i,focusOffset:s,isBackward:!0})}e.exports=r},847:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=l.default.renderToStaticMarkup(c.default.cloneElement(e,{},"\r")).split("\r");return(0,i.default)(t.length>1,"convertToHTML: Element of type "+e.type+" must render children"),(0,i.default)(t.length<3,"convertToHTML: Element of type "+e.type+" cannot use carriage return character"),{start:t[0],end:t[1]}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(82),i=r(a),s=n(0),c=r(s),u=n(267),l=r(u)},848:function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function o(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,o,s,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(n=this._events[e],i(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(a(n))for(s=Array.prototype.slice.call(arguments,1),u=n.slice(),o=u.length,c=0;c<o;c++)u[c].apply(this,s);return!0},n.prototype.addListener=function(e,t){var o;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(o=i(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),o||(o=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var o=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,o,i,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(n)){for(s=i;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){o=s;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},849:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},850:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},851:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},852:function(e,t,n){var r=n(954)("keys"),o=n(853);e.exports=function(e){return r[e]||(r[e]=o(e))}},853:function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},854:function(e,t){e.exports={}},857:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),c=n.n(s),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.handleMouseMove=function(e){1!==e.buttons&&1!==e.which||a.handleChange(e)},a.handleChange=function(e){var t=a.input.value;a.value!==t&&(a.value=t,a.props.onChange&&a.props.onChange(e))},i=n,o(a,i)}return a(t,e),u(t,[{key:"componentDidMount",value:function(){this.value=this.input.value}},{key:"render",value:function(){var e=this;return c.a.createElement("input",i({},this.props,{onMouseMove:this.handleMouseMove,onClick:this.handleChange,onKeyDown:this.handleChange,onChange:this.handleChange,ref:function(t){e.input=t}}))}}]),t}(s.Component);t.default=l},858:function(e,t){},859:function(e,t){},862:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,s,c,u,l=n(1),f=n.n(l),p=n(0),d=n.n(p),h=n(10),m=n(11),v=n(243),y=n(36),g=n(727),b=n(739),w=n(732),_=n(49),E=n(735),O=n(736),C=n(244),k=n(80),S=n(863),x=(n.n(S),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),T=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),j={placeholders:{img:" [图片] "}},P=(i=Object(k.a)(function(e){var t=e.question,n=e.trackCardShow,r=void 0===n||n;return{module:"QuestionItem",card:{content:{type:"Question",token:t.id.toString(),item_num:t.answerCount,comment_num:t.commentCount,follower_num:t.followerCount,publish_timestamp:1e3*t.created}},trackCardShow:r}}))((u=c=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.state={collapsed:!0,commentPattern:"fixed",commentsShown:!1},a.handleOpenComment=function(e){var t=e.target.parentNode.className.includes("is-fixed")?"fixed":"bottom",n=a.state.modalShown,r=!("bottom"===t&&n);a.setState({modalShown:r,commentPattern:t})},a.handleCommentsShown=function(e,t){a.setState(t)},a.handleCommentsHide=function(){a.setState({commentsShown:!1})},a.handlePackupButton=function(){a.setState({modalShown:!1}),a.CommentsButtonEl.scrollIntoView({block:"start",behavior:"smooth"}),window.scrollTo(0,window.pageYOffset-window.screen.height/2)},a.handleCollapse=function(){a.setState({collapsed:!0})},a.handleExpand=function(){a.setState({collapsed:!1})},i=n,o(a,i)}return a(t,e),T(t,[{key:"render",value:function(){var e=this.props,t=e.preset,n=e.question,r=e.question,o=r.id,a=r.title,i=r.type,s=r.created,c=r.answerCount,u=r.followerCount,l=r.isMuted,f=r.questionType,p=r.detail,k=r.commentCount,S=r.adminClosedComment,T=r.relationship,P=void 0===T?{}:T,A=e.action,I=(e.isConcise,e.isAnonymousFollowing),M=e.lastreadTouchable,N=this.state,R=N.commentsShown,D=N.commentPattern,L={id:o,type:i},F="/question/"+o;return d.a.createElement(g.e,{data:n,lastreadTouchable:M,title:d.a.createElement("div",{className:"QuestionItem-title"},d.a.createElement("a",{href:F,target:"_blank","data-za-detail-view-name":"Title"},a),I&&d.a.createElement(h.a,{className:"QuestionItem-icon",name:"inconspicuous"}),"commercial"===f&&l&&d.a.createElement("span",{className:"QuestionItem-muteStatus"},"待推广"))},t===g.c.default&&d.a.createElement(g.d,null,Object(v.b)(s),Object(y.b)(c)+" 个回答",Object(y.b)(u)+" 个关注"),t===g.c.interactive&&d.a.createElement(b.b,{data:n,html:p||"",excerpt:n.excerpt,limit:60,limitWithImage:60,truncateHTMLOptions:j},A||d.a.createElement(C.a,x({},L,{isFollowing:(P&&{}.hasOwnProperty.call(P,"isFollowing")?P:n).isFollowing})),[d.a.createElement(E.a,{key:"comment",onClick:this.handleCommentsShown,commentsShown:R,commentClosed:S,count:k}),d.a.createElement(w.a,x({key:"sharre"},L,{title:a,href:F})),Boolean(c)&&d.a.createElement(_.a,{key:"linkbutton",preset:"plain",to:F,target:"_blank"},d.a.createElement(m.Answer,{style:{marginRight:"4px"},center:!0,text:!0}),Object(y.b)(c)," 个回答")]),d.a.createElement(O.a,{parent:n,commentPattern:D,shown:R,onClose:this.handleCommentsHide}))}}]),t}(p.Component),c.propTypes={preset:f.a.oneOf(Object.keys(g.c)).isRequired,isAnonymousFollowing:f.a.bool,contentShown:f.a.bool},c.defaultProps={preset:g.c.default},s=u))||s;t.a=P},863:function(e,t){},864:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),u=r(c),l=n(0),f=r(l),p=n(3),d=r(p),h=n(26),m=r(h),v=n(48),y=r(v),g=n(756),b=n(865),w=r(b);n(867);var _=function(){return n.e(3).then(n.bind(null,722))},E=g.ANNOTATION_REASONS.map(function(e){var t=e.code,n=e.description,r=e.placeholder;return{text:n,value:String(t),placeholder:r}}),O=function(e){var t=g.ANNOTATION_REASONS.find(function(t){return t.code===e});return t&&t.description},C=function(e){function t(){var e,n,r,i;o(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.state={selectedReasonCode:null,isReasonDescriptionEmpty:!0},r.handleReasonCodeChange=function(e,t){r.setState({selectedReasonCode:Number(e),selectedReasonPlaceholder:t||""}),r.input&&r.input.resetWithValue(t||"")},r.handleAddAnnotation=function(){var e=r.props,t=e.addAnnotation,n=e.type,o=e.urlToken,a=e.showNotification,i=e.onClose;t(n,o,r.state.selectedReasonCode,r.input.toHTML()).then(function(){i(),a&&a("标记内容成功")})},r.handleReasonDescriptionChange=function(e){r.setState({isReasonDescriptionEmpty:e.isEmpty})},i=n,a(r,i)}return i(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.shown,o=t.className,a=this.state,i=a.selectedReasonCode,s=a.isReasonDescriptionEmpty,c=a.selectedReasonPlaceholder,u=O(i),l=i===g.ANNOTATION_REASON_OTHER_CODE;return f.default.createElement(y.default,{title:"标记内容",subtitle:"请选择标记原因",onClose:n,className:o},r&&f.default.createElement("div",null,f.default.createElement("div",{className:"AddAnnotationModal-body"},f.default.createElement(w.default,{options:E,onChange:this.handleReasonCodeChange,value:String(i)}),i&&f.default.createElement("div",null,f.default.createElement("div",{className:"AddAnnotationModal-description"},u,"（",l?"必填":"选填","）"),f.default.createElement(m.default,{getComponent:_,multiline:!0,richtext:!0,allowMention:!0,large:!0,spread:!0,minRows:2,onRef:function(t){e.input=t},defaultValue:c,placeholder:"请填写原因",onChange:this.handleReasonDescriptionChange}))),f.default.createElement(v.ModalButtonGroup,{direction:"horizontal",className:"AddAnnotationModal-buttonGroup"},f.default.createElement(d.default,{preset:"primary",color:"blue",onClick:this.handleAddAnnotation,size:"spread",disabled:!i||l&&s},"标记"))))}}]),t}(l.PureComponent);C.propTypes={addAnnotation:u.default.func.isRequired,onClose:u.default.func.isRequired,shown:u.default.bool.isRequired,type:u.default.oneOf([g.ANNOTATION_TYPE_ANSWER,g.ANNOTATION_TYPE_PIN,g.ANNOTATION_TYPE_ARTICLE]).isRequired,urlToken:u.default.oneOfType([u.default.number,u.default.string]),showNotification:u.default.func,className:u.default.string},t.default=C},865:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),u=r(c),l=n(0),f=r(l),p=n(2),d=r(p);n(866);var h=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.value,r=e.onChange,o=e.className;return f.default.createElement("div",{className:(0,d.default)("RadioButtons",o)},t.map(function(e,t){var o=e.value,a=e.text,i=e.placeholder;return f.default.createElement("label",{key:t,className:"RadioButtons-item"},f.default.createElement("span",{className:"RadioButtons-text"},a),f.default.createElement("input",{type:"radio",className:"RadioButtons-input",value:o,checked:n===o,onChange:function(){return r(o,i)}}))}))}}]),t}(l.PureComponent);h.propTypes={options:u.default.arrayOf(u.default.shape({value:u.default.string,text:u.default.string,placeholder:u.default.string})).isRequired,value:u.default.string,onChange:u.default.func,className:u.default.string},t.default=h},866:function(e,t){},867:function(e,t){},868:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),u=r(c),l=n(0),f=r(l),p=n(16),d=n(33),h=r(d),m=n(3),v=r(m),y=n(50),g=r(y),b=n(48),w=r(b),_=n(756);n(869);var E=function(e){function t(){var e,n,r,i;o(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.state={isReasonDescriptionEmpty:!0},r.handleCancelAnnotation=function(){var e=r.props,t=e.cancelAnnotation,n=e.type,o=e.urlToken,a=e.showNotification,i=e.onClose;t(n,o,_.ANNOTATION_REASON_CANCEL_CODE,r.input.value).then(function(){i(),a&&a("撤销标记成功")})},r.handleReasonDescriptionChange=function(e){return r.setState({isReasonDescriptionEmpty:e.isEmpty})},i=n,a(r,i)}return i(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.shown,o=t.className,a=this.state.isReasonDescriptionEmpty;return f.default.createElement(w.default,{title:"你确定要撤销这条内容的标记吗？",onClose:n,className:o},r&&f.default.createElement("div",{className:"CancelAnnotationModal"},f.default.createElement(g.default,{multiline:!0,large:!0,spread:!0,onRef:function(t){e.input=t},placeholder:"请填写撤销原因（必填）",onChange:this.handleReasonDescriptionChange,className:"CancelAnnotationModal-Input"}),f.default.createElement(b.ModalButtonGroup,{direction:"horizontal"},(0,p.isBrowser)()&&!(0,h.default)(window.navigator.userAgent).Mobile&&f.default.createElement(v.default,{onClick:n,size:"spread"},"取消"),f.default.createElement(v.default,{preset:"primary",color:"blue",onClick:this.handleCancelAnnotation,size:"spread",className:"CancelAnnotationModal-CancelButton",disabled:a},"撤销标记"))))}}]),t}(l.PureComponent);E.propTypes={cancelAnnotation:u.default.func.isRequired,onClose:u.default.func.isRequired,shown:u.default.bool.isRequired,type:u.default.oneOf([_.ANNOTATION_TYPE_ANSWER,_.ANNOTATION_TYPE_PIN,_.ANNOTATION_TYPE_ARTICLE]).isRequired,urlToken:u.default.oneOfType([u.default.number.isRequired,u.default.string.isRequired]),showNotification:u.default.func,className:u.default.string},t.default=E},869:function(e,t){},870:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),u=r(c),l=n(0),f=r(l),p=n(11),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(p),h=n(143),m=r(h),v=n(756);n(871);var y=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props.annotationDetail,t=e.detail,n=e.member,r=e.reason,o=e.reasonDescription,a=n?n.name+"：":"";return f.default.createElement("div",{className:"Annotation-mark"},f.default.createElement("p",{className:"Annotation-markTitle"},r===v.ANNOTATION_REASON_OTHER_CODE?"该内容已被标记":o),f.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://zhuanlan.zhihu.com/p/27754639","data-tooltip":"点击了解更多",className:"Annotation-complaintHelp"},f.default.createElement(d.HelpOutline,{className:"AnswerItem-complaintIcon",size:16})),(t||n)&&f.default.createElement(m.default,{className:"Annotation-markSummary",html:""+a+(t||"未填写原因")}))}}]),t}(l.PureComponent);y.propTypes={annotationDetail:u.default.object.isRequired},t.default=y},871:function(e,t){},872:function(e,t){},873:function(e,t){},874:function(e,t){e.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},content:'<g fill="none" fill-rule="evenodd">     <path fill="#C2A469" d="M12.1691132,2.18019283 L14.2473736,2.55177137 C14.8595629,2.66122657 15.3387734,3.14043709 15.4482286,3.7526264 L15.8198072,5.8308868 C15.8575634,6.04205978 15.9406092,6.24254998 16.0632333,6.41856954 L17.2700397,8.15086727 C17.6255264,8.66114699 17.6255264,9.33885301 17.2700397,9.84913273 L16.0632333,11.5814305 C15.9406092,11.75745 15.8575634,11.9579402 15.8198072,12.1691132 L15.4482286,14.2473736 C15.3387734,14.8595629 14.8595629,15.3387734 14.2473736,15.4482286 L12.1691132,15.8198072 C11.9579402,15.8575634 11.75745,15.9406092 11.5814305,16.0632333 L9.84913273,17.2700397 C9.33885301,17.6255264 8.66114699,17.6255264 8.15086727,17.2700397 L6.41856954,16.0632333 C6.24254998,15.9406092 6.04205978,15.8575634 5.8308868,15.8198072 L3.7526264,15.4482286 C3.14043709,15.3387734 2.66122657,14.8595629 2.55177137,14.2473736 L2.18019283,12.1691132 C2.14243656,11.9579402 2.05939081,11.75745 1.93676667,11.5814305 L0.729960348,9.84913273 C0.374473649,9.33885301 0.374473649,8.66114699 0.729960348,8.15086727 L1.93676667,6.41856954 C2.05939081,6.24254998 2.14243656,6.04205978 2.18019283,5.8308868 L2.55177137,3.7526264 C2.66122657,3.14043709 3.14043709,2.66122657 3.7526264,2.55177137 L5.8308868,2.18019283 C6.04205978,2.14243656 6.24254998,2.05939081 6.41856954,1.93676667 L8.15086727,0.729960348 C8.66114699,0.374473649 9.33885301,0.374473649 9.84913273,0.729960348 L11.5814305,1.93676667 L12.1691132,2.18019283 Z"/>     <path fill="#FFF" d="M9.00005747,11 C8.51878304,11 8.10675467,10.8096 7.76408728,10.4289702 C7.42141989,10.0483404 7.25,9.59040976 7.25,9.05566788 L7.25,5.94454495 C7.25,5.40978179 7.42134327,4.95200017 7.76408728,4.57124267 C8.10681214,4.19050645 8.51878304,4 9.00005747,4 C9.48138935,4 9.89330279,4.19050645 10.2360085,4.57124267 C10.5787908,4.95206402 10.75,5.40978179 10.75,5.94454495 L10.75,9.05566788 C10.75,9.59043105 10.5786567,10.0483404 10.2360085,10.4289702 C9.89330279,10.8096 9.48138935,11 9.00005747,11 Z M12.1425925,8.11135548 C12.2141712,8.1856472 12.25,8.27346329 12.25,8.37496793 L12.25,9.12500641 C12.25,9.98828845 11.9724599,10.7392915 11.4176168,11.3778924 C10.8627737,12.0165138 10.1773025,12.3826981 9.36114405,12.4763836 L9.36114405,14.2499 C9.36271899,14.4506536 9.24232118,14.5510304 8.99995059,14.5510304 C8.75758001,14.5510304 8.63720854,14.4506536 8.63883619,14.2499 L8.63883619,12.4763836 C7.82253938,12.3826981 7.13700895,12.0165138 6.58222513,11.3778924 C6.02746108,10.7392915 5.75,9.98828845 5.75,9.12500641 L5.75,8.37496793 C5.75,8.27344276 5.78573003,8.18556511 5.85722962,8.11135548 C5.92866991,8.03712533 6.01331135,8 6.11117369,8 C6.20903603,8 6.29357866,8.03712533 6.36505848,8.11135548 C6.43649878,8.18556511 6.47224857,8.27344276 6.47224857,8.37496793 L6.47224857,9.12500641 C6.47224857,9.84770883 6.71953279,10.4659513 7.21414076,10.9794672 C7.70880801,11.4931472 8.30404502,11.7499872 8.99995059,11.7499872 C9.69587594,11.7499872 10.2911722,11.4931472 10.7856616,10.9794672 C11.2803091,10.4658077 11.5276921,9.8476883 11.5276921,9.12500641 L11.5276921,8.37496793 C11.5276921,8.27344276 11.5634222,8.18556511 11.6348229,8.11135548 C11.7063818,8.03712533 11.7910035,8 11.8887077,8 C11.9865108,8 12.0711978,8.03725461 12.1425925,8.11135548 Z"/>   </g>'}},875:function(e,t){},876:function(e,t,n){e.exports=n.p+"logo.f6eef03354bbf46f4e04.png"},877:function(e,t){},878:function(e,t){},879:function(e,t){},880:function(e,t){},881:function(e,t){},882:function(e,t){},883:function(e,t){},884:function(e,t){},885:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,s,c,u,l,f=n(1),p=n.n(f),d=n(0),h=n.n(d),m=n(15),v=n(5),y=(n.n(v),n(11)),g=n(770),b=n.n(g),w=n(3),_=n(250),E=n(138),O=n(6),C=n.n(O),k=n(142),S=n(732),x=n(81),T=n(765),j=n(763),P=n(80),A=n(13),I=n(252),M=n(735),N=n(736),R=n(261),D=n(727),L=n(739),F=n(148),U=n(38),B=n(887),z=(n.n(B),function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),H=function(e){return"plain"===e||"special-plain"===e},V=H,W=function(e){return"special-plain"===e},G=function(e){var t=e.title,n=e.id,r=e.created,o=e.updated,a=e.commentCount,i=e.imageUrl,s=e.thumbnail;return{headline:t,url:"https://"+A.h+"/p/"+n,datePublished:new Date(1e3*r).toISOString(),dateModified:new Date(1e3*o).toISOString(),commentCount:a,image:i||s}},Y=function(e){return e.thumbnailExtraInfo&&"video"===e.thumbnailExtraInfo.type?{cover:e.thumbnail,hasVideo:!0}:{cover:e.imageUrl||e.thumbnail,hasVideo:!1}},Z=(i=Object(P.a)(function(e){var t=e.article,n=e.trackCardShow,r=void 0===n||n;return{module:"PostItem",card:{has_image:Boolean(t.thumbnailExtraInfo&&"image"===t.thumbnailExtraInfo.type),has_video:Boolean(t.thumbnailExtraInfo&&"video"===t.thumbnailExtraInfo.type),content:{type:"Post",token:t.id.toString(),upvote_num:t.voteupCount,comment_num:t.commentCount,publish_timestamp:1e3*t.created,parent_token:t.column&&t.column.id,author_member_hash_id:t.author.id,video_id:t.thumbnailExtraInfo&&t.thumbnailExtraInfo.videoId}},trackCardShow:r}}),s=Object(v.connect)(function(e){return{edition:Object(U.c)(e),referer:Object(U.h)(e),isWechat:e.env.userAgent.Wechat}}),i(c=s(c=Object(m.withRouter)((l=u=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.state={commentsShown:!1,favlistsShown:!1,commentPattern:"fixed",positionStatus:null,guideShown:!1},a.disableAuth=function(){var e=a.props,t=(e.edition,e.router);t=void 0===t?{}:t;var n=t.location;n=void 0===n?{}:n;n.pathname;return!1}(),a.handleCommentsShown=function(e,t){a.setState(t)},a.handleCommentsHide=function(){a.setState({commentsShown:!1})},a.handlePositionStatusChange=function(e){a.setState({positionStatus:e})},a.handleFavlistsButtonClick=function(){if(C.a.trackEvent(a,{action:"Collect",element:"Button",is_intent:!0}),a.disableAuth)return void a.handleToggleGuide();a.handleFavlistsShown()},a.handleFavlistsShown=a.context.authRequired(function(){return a.setState({favlistsShown:!0})},A.C.favlists),a.handleFavlistHide=function(){a.setState({favlistsShown:!1})},a.handleToggleGuide=function(){a.setState({guideShown:!a.state.guideShown})},i=n,o(a,i)}return a(t,e),q(t,[{key:"renderStatus",value:function(){var e=this.props.article.reviewInfo;e=void 0===e?{}:e;var t=e.isReviewing,n=e.tips;return t?h.a.createElement("div",{className:"ArticleItem-status"},n):null}},{key:"renderArticleExtraInfo",value:function(){var e=this.props,t=e.actor,n=e.action,r=e.article,o=r.upvotedFollowees,a=void 0===o?[]:o,i=r.voteupCount,s=r.id,c=r.type,u=t&&t.urlToken;return i?h.a.createElement("div",{className:"ArticleItem-extraInfo",key:"articleExtraInfo"},h.a.createElement(j.a,{id:s,type:c,voteupCount:i,upvotedFollowees:a.filter(function(e){return u!==e.urlToken}),too:"voted"===n})):null}},{key:"renderMeta",value:function(){var e=this.props.article,t=G(e);return Object.keys(t).map(function(e){return h.a.createElement("meta",{key:e,itemProp:e,content:t[e]})})}},{key:"renderSuggestEdit",value:function(){var e=this.props.article,t=e.isNormal,n=void 0===t||t,r=e.suggestEdit;r=void 0===r?{}:r;var o=r.title,a=r.status,i=r.reason;return a&&!n?h.a.createElement("div",{className:"AnswerItem-statusContent"},h.a.createElement("div",{className:"AnswerItem-statusReason"},i),h.a.createElement("div",{className:"AnswerItem-statusDescription"},"作者修改内容通过后，文章会重新显示恢复正常 ",h.a.createElement("a",{target:"_blank",href:"/question/24752645",className:"AnswerItem-statusLink"},o))):null}},{key:"render",value:function(){var e=this.props,t=e.article,n=e.article,r=n.id,o=n.title,a=n.author,i=n.excerpt,s=n.content,c=n.voteupCount,u=n.voting,l=n.type,f=n.created,p=n.updated,d=n.imageUrl,m=n.commentCount,v=n.adminClosedComment,g=n.reviewInfo;g=void 0===g?{}:g;var O=g.isReviewing,C=g.editType,j=e.preset,P=e.lastreadTouchable,U=e.itemProp,B=void 0===U?"article":U,q=e.edition,G=e.isWechat,Z=e.experimentAuthor,X=e.lessExcerpt,J=e.location.query,Q=e.referer,$=this.state,ee=$.positionStatus,te=$.favlistsShown,ne=$.commentsShown,re=$.commentPattern,oe=this.context.currentUser,ae=A.h+"/p/"+r,ie=!(O&&"create"===C),se=oe&&oe.urlToken===a.urlToken,ce=this.renderSuggestEdit(),ue=!W(j)&&h.a.createElement(k.a,K({key:"authorInfo"},V(j)&&{preset:"plain"},{author:a,className:"ArticleItem-authorInfo"})),le=this.renderArticleExtraInfo(),fe=H(j)?[ue,le]:[[ue,le],null],pe=z(fe,2),de=pe[0],he=pe[1];return h.a.createElement(D.e,{className:"ArticleItem","data-zop":JSON.stringify({authorName:a.name,itemId:r,title:o,type:"article"}),data:t,title:h.a.createElement("a",{href:ae,target:"_blank","data-za-detail-view-element_name":"Title"},o),meta:de,lastreadTouchable:P,itemProp:B,itemType:"http://schema.org/SocialMediaPosting",itemScope:!0},this.renderMeta(),this.renderStatus(),!ce||se?h.a.createElement(L.b,K({itemProp:"articleBody",data:t,excerpt:i,prefix:Z&&h.a.createElement("b",null,h.a.createElement(x.a,{user:a,noBadge:!0}),"："),html:s||i,before:h.a.createElement("div",null,he,d&&h.a.createElement(_.a,{className:"ArticleItem-image",thumbnail:Object(E.a)(d,"60w"),url:d,alt:o})),after:h.a.createElement(L.a,{href:ae,created:f,updated:p})},X?{limit:74}:{},{onPositionStatusChange:this.handlePositionStatusChange},Y(t)),ie&&h.a.createElement(T.a,{id:r,type:l,liked:Boolean(u),count:c,disabled:se,handleToggleGuide:this.handleToggleGuide,disableAuth:this.disableAuth}),ie&&h.a.createElement(M.a,{onClick:this.handleCommentsShown,commentsShown:ne,commentClosed:v,count:m}),ie&&h.a.createElement(S.a,{id:r,type:"article",url:ae,title:o,authorName:a&&a.name,positionStatus:ee}),ie&&(!oe||!oe.isOrg)&&!q.yidianzixun&&h.a.createElement(w.default,{preset:"plain",onClick:this.handleFavlistsButtonClick,icon:y.Star,label:"收藏"}),ie&&!se&&!0&&oe&&h.a.createElement(R.a,{id:r,type:l})):this.renderSuggestEdit(),this.disableAuth&&this.state.guideShown&&h.a.createElement(b.a,{redirectUrl:ae,urlScheme:Object(I.a)({type:"article",id:r},{edition:q,query:J,referer:Q}),buttons:[G?{name:"wechat",text:"快速登录",fill:"#fff"}:"zhihu"],onClose:this.handleToggleGuide}),h.a.createElement(N.a,{parent:t,commentPattern:re,shown:ne,onClose:this.handleCommentsHide}),h.a.createElement(F.a,{id:r,type:"article",shown:te,onClose:this.handleFavlistHide,zaEnabled:!0}))}}]),t}(d.Component),u.contextTypes={currentUser:p.a.object,authRequired:p.a.func},u.propTypes={preset:p.a.string,lessExperpt:p.a.bool},u.defaultProps={preset:"primary"},c=l))||c)||c)||c);t.a=Z},886:function(e,t){},887:function(e,t){},888:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,s,c,u,l=n(1),f=n.n(l),p=n(0),d=n.n(p),h=n(243),m=n(36),v=n(10),y=n(727),g=n(735),b=n(736),w=n(244),_=n(732),E=n(81),O=n(80),C=n(964),k=(n.n(C),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),S=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),x=(i=Object(O.a)(function(e){var t=e.favlist,n=e.trackCardShow,r=void 0===n||n;return{module:"CollectionItem",card:{content:{type:"Collection",token:String(t.id),item_num:t.answerCount,follower_num:t.followerCount,publish_timestamp:1e3*t.updateTime,author_member_hash_id:(t.creator||{}).id}},trackCardShow:r}}))((u=c=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.state={commentPattern:"fixed",commentsShown:!1},a.handleCommentsShown=function(e,t){a.setState(t)},a.handleCommentsHide=function(){a.setState({commentsShown:!1})},i=n,o(a,i)}return a(t,e),S(t,[{key:"render",value:function(){var e=this.props,t=e.preset,n=e.favlist,r=e.favlist,o=r.id,a=r.type,i=r.title,s=r.updatedTime,c=r.answerCount,u=r.followerCount,l=r.isFollowing,f=r.isPublic,p=r.creator,O=void 0===p?{}:p,C=r.commentCount,S=e.status,x=e.action,T=e.lastreadTouchable,j=this.state,P=j.commentsShown,A=j.commentPattern,I=d.a.createElement("a",{href:"/collection/"+o,target:"_blank"},i);if(t===y.c.plain)return d.a.createElement(y.e,{data:n,title:I});var M={id:o,type:a};return t===y.c.default?d.a.createElement(y.e,{data:n,title:d.a.createElement("div",{className:"FavlistItem-title"},I,!f&&d.a.createElement(v.a,{grey:!0,className:"FavlistItem-lockIcon",name:"lock"})),meta:S||d.a.createElement(y.d,null,Object(h.b)(s)+" 更新",Object(m.b)(c)+" 条内容",Object(m.b)(u)+" 人关注"),extra:x}):d.a.createElement(y.e,{data:n,title:I,lastreadTouchable:T},d.a.createElement(y.b,{key:"favlist-item-cells"},d.a.createElement("div",null,d.a.createElement("span",null,"关注数："),Object(m.b)(u)),d.a.createElement("div",null,d.a.createElement("span",null,"最后更新于："),Object(h.b)(s)),d.a.createElement("div",null,d.a.createElement("span",null,"作者："),d.a.createElement(E.a,{user:O}))),d.a.createElement(y.a,{key:"favlist-item-actions"},d.a.createElement(w.a,k({},M,{isFollowing:l})),d.a.createElement(g.a,{onClick:this.handleCommentsShown,commentsShown:P,count:C}),d.a.createElement(_.a,k({},M,{title:i,authorName:O&&O.name}))),d.a.createElement(b.a,{parent:n,commentPattern:A,shown:P,onClose:this.handleCommentsHide}))}}]),t}(p.Component),c.propTypes={preset:f.a.oneOf(Object.values(y.c))},c.defaultProps={preset:y.c.default},s=u))||s;t.a=x},898:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var n=t.id,r=e.entities.columns,o=e.loading.local;return{column:r[n],isLoading:Boolean(o["column/"+n])}}function c(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p,d,h,m,v,y,g=n(1),b=n.n(g),w=n(0),_=n.n(w),E=n(2),O=n.n(E),C=n(5),k=n(51),S=n(25),x=n.n(S),T=n(248),j=n(257),P=n(10),A=n(243),I=n(6),M=n.n(I),N=n(49),R=n(244),D=n(13),L=n(151),F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),B=(d=p=function(e){function t(){var e,n,r,i;o(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.load=function(){var e=r.props,t=e.dispatch,n=e.id;t(Object(L.b)(n))},r.track=function(){var e=r.props.column;r.hoverCardElement&&e&&(M.a.setModule(r.hoverCardElement,{module:"ColumnItem"},{card:{content:{type:"Column",token:e.id,item_num:e.articlesCount,follower_num:e.followers,publish_timestamp:1e3*e.updated,author_member_hash_id:e.author.id}}}),M.a.trackCardShow(r.hoverCardElement))},r.handleOpen=function(){r.load(),r.track()},i=n,a(r,i)}return i(t,e),U(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.toggler,o=t.column,a=t.id,i=t.isLoading,s=t.onRef,c=r(t,["toggler","column","id","isLoading","onRef"]),u=this.context.currentUser,l=o||{},f=l.title,p=l.intro,d=l.articlesCount,h=l.followers,m=l.imageUrl,v=l.lastArticle,y=l.isFollowing,g=l.author;g=void 0===g?{}:g;var b=g.urlToken,w=v||{},E=w.title,O=w.created,C=D.h+"/"+a,k=u&&b&&u.urlToken===b;return _.a.createElement(j.b,F({toggler:n,preventCloseOnTarget:!0,isLoading:i,onOpen:this.handleOpen,size:"large"},c,{onRef:function(t){s&&"function"==typeof s&&s(t),e.hoverCardElement=t}}),_.a.createElement(j.a,{title:_.a.createElement("a",{target:"_black",href:C},f),avatarUrl:m}),p,v&&_.a.createElement("div",null,_.a.createElement(P.a,{name:"time"}),"最后更新",_.a.createElement("span",{className:"HoverCard-separate"}," | "),E,_.a.createElement("span",null,"（",Object(A.d)(O),"）")),_.a.createElement("div",null,_.a.createElement(T.a,null,_.a.createElement(T.a.Item,{tag:N.a,preset:"plain",a:!0,to:C,name:"文章",value:d}),_.a.createElement(T.a.Item,{tag:N.a,preset:"plain",a:!0,to:C+"/followers",name:"关注者",value:h})),!k&&_.a.createElement("div",{className:"HoverCard-buttons"},_.a.createElement(R.a,{preset:R.a.PRESETS.primary,id:a,type:"column",isFollowing:y}))))}}]),t}(w.Component),p.contextTypes={currentUser:b.a.object},d),z=Object(C.connect)(s)(B),K=n(38),q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),V=(h=Object(C.connect)(function(e){return{ua:Object(K.j)(e)}}))((y=v=function(e){function t(){return u(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),H(t,[{key:"render",value:function(){var e=this.props,t=e.ua,n=e.column,r=n.title,o=n.imageUrl,a=n.id,i=e.avatar,s=e.avatarProps,u=e.noHoverCard,l=e.style,f=e.className,p=e.children,d=c(e,["ua","column","avatar","avatarProps","noHoverCard","style","className","children"]),h=void 0===u?t.Mobile:u,m=void 0;return m=i?_.a.createElement(k.default,q({url:o,alt:r},s)):p||r,h||(m=_.a.createElement(z,{toggler:m,id:a})),_.a.createElement("a",q({style:l,className:O()("ColumnLink",f),href:D.h+"/"+a},x()(d,["dispatch"])),m)}}]),t}(w.Component),v.propTypes={column:b.a.object.isRequired,avatar:b.a.bool,noHoverCard:b.a.bool,style:b.a.object,className:b.a.string,children:b.a.node},v.defaultProps={avatar:!1},m=y))||m;t.a=V},899:function(e,t,n){"use strict";function r(e){return e?"￥"+e/100:"免费"}t.a=r},900:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return{x:e.left+e.width/2,y:e.top+e.height/2}}function s(){var e=Object(F.default)(navigator.userAgent).Mobile?q:K,t=e.top,n=e.left,r=window,o=r.innerWidth,a=r.innerHeight,s={left:0,top:0,width:o,height:a},c=i(s),u=2*(H+V+n),l=o,f=0;return o<1e3+u?l=o-u:(l=1e3,f=(o-(1e3+u))/2),{x:c.x,y:c.y,imgContainerWidth:l,imgContainerHeight:s.height-2*t,left:f,top:t}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y,g,b,w,_,E,O,C,k=n(1),S=n.n(k),x=n(0),T=n.n(x),j=n(5),P=n(2),A=n.n(P),I=n(10),M=n(3),N=n(138),R=n(749),D=n(11),L=n(145),F=n(33),U=n(85),B=(n(968),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),z=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),K={top:10,left:20},q={top:0,left:0},H=72,V=24,W=(g=y=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getBoundingClientRect=function(e,t){var n=t.width,r=t.height,o={top:0,left:0,width:0,height:0},a=1;return e.width>e.height?(o.height=r,a=r/e.height,o.width=e.width*a,o.left="-"+(o.width-n)/2):e.width<e.height?(o.width=n,a=n/e.width,o.height=e.height*a,o.top="-"+(o.height-r)/2):(o.width=n,o.height=r),o},n.getParentNode=function(){for(var e=n.props.img,t=e.parentNode,r=void 0;t&&"BODY"!==t.nodeName;){if(t.classList.contains("Image-Wrapper-Preview"))return r=t;t=t.parentNode}return r},n.getChildImgNode=function(e){var t=e.childNodes,r=n.state.index,o=void 0,a=r;return r>=t.length?(a=t.length-1,o=t[a]):o=t[a],{img:o.querySelector(".Image-Preview"),index:a}},n.setImageElAttr=function(){var e=n.state,t=e.width,r=e.transition,o=n.props.images,a=n.getParentNode(),i=n.getChildImgNode(a),s=i.img.getBoundingClientRect(),c=n.getBoundingClientRect(o[i.index],{width:s.width,height:s.height}),u=n.imgEl.getBoundingClientRect(),l=n.containerClientRect,f=l.left,p=l.top,d={x:u.left+u.width/2-f-c.width/2,y:u.top+u.height/2-p-c.height/2},h=t/c.width;if("transition"===r)return void n.setState({translate:null,scale:null,opacity:-1,transform:"translate3d("+(s.left-f)+"px,"+(s.top-p)+"px,0)"});n.setState({transition:""},function(){n.setState({rect:s,transition:"",width:c.width,height:c.height,translate:d,scale:h,transform:"translate3d("+d.x+"px ,"+d.y+"px,0) scale3d("+h+","+h+",1)"})}),setTimeout(function(){n.setState({transition:"transition",translate:null,scale:null,transform:"translate3d("+(s.left-f)+"px,"+(s.top-p)+"px,0)",opacity:-1})},20)},n.getImageSize=function(e){var t=n.containerClientRect,r=t.imgContainerWidth,o=t.imgContainerHeight,a=e.width,i=e.height,s=!1,c=1;return(e.width>r||e.height>o)&&(e.width>r&&(c=r/e.width,a=e.width*c,i=c*e.height),i>o&&(c=o/i,i*=c,a*=c),s=!0),n.setState({cursorZoomIn:s}),{width:a,height:i}},n.handleResizeCallback=function(){n.containerClientRect=s();var e=n.state.index,t=n.props.images;n.setState(B({transition:"fixed",transform:""},n.getImageSize(t[e])))},n.handleClick=function(e){var t=n.state.cursorZoomIn,r=e.target;r.classList.contains("ImageGallery-Img")&&t&&n.setState({previewImage:r}),(r.classList.contains("ImageGallery")||r.classList.contains("ImageGallery-Inner"))&&n.setImageElAttr()},n.handleTransEnd=function(){var e=n.state,t=e.translate,r=e.scale,o=n.props.onClose;t&&r||o()},n.handlePreviewImageClose=function(){n.setState({previewImage:null},function(){L.hide()})},n.handleKeyUpCallback=function(e){39===e.keyCode?n.handleCutImage(1):37===e.keyCode&&n.handleCutImage(-1)},n.handleCutImage=function(e){var t=n.state.index+e,r=n.props.images;t<r.length&&t>=0&&n.setState(B({index:t,transition:"fixed",transform:""},n.getImageSize(r[t])))},n.state={transEnded:!1,translate:null,scale:null,url:null,index:e.index||0,width:0,height:0,rect:null,transition:"transition",previewImage:null,transform:"",cursorZoomIn:!1,opacity:1},n.containerClientRect=s(),n}return a(t,e),z(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.data,n=e.img,r=n.getBoundingClientRect();L.hide();var o=this.containerClientRect,a=o.left,i=o.top,s=this.getBoundingClientRect(t,{width:r.width,height:r.height}),c={left:r.left-a+Number(s.left),top:r.top-i+Number(s.top)};this.setState({rect:s,width:s.width,height:s.height,transform:"translate3d("+c.left+"px, "+c.top+"px, 0)"})}},{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState(B({},e.computeTransition(e.props.index)))},20),window.addEventListener("keyup",this.handleKeyUpCallback),window.addEventListener("resize",this.handleResizeCallback)}},{key:"componentWillUnmount",value:function(){L.show(),window.removeEventListener("keyup",this.handleKeyUpCallback),window.removeEventListener("resize",this.handleResizeCallback)}},{key:"computeTransition",value:function(e){var t=this.props.images,n=t[e],r=this.containerClientRect,o=r.x,a=r.y,i=r.left,s=r.top,c=this.getImageSize(n),u=c.width,l=this.imgEl.getBoundingClientRect(),f=u/l.width,p={x:o-l.width/2-i,y:a-l.height/2-s};return{translate:p,scale:f,transform:"translate3d("+p.x+"px ,"+p.y+"px,0) scale3d("+f+","+f+",1)"}}},{key:"render",value:function(){var e=this,t=this.props.images,n=this.state,r=n.translate,o=n.index,a=n.width,i=n.height,s=n.transition,c=n.previewImage,u=n.transform,l=n.cursorZoomIn,f=n.opacity,p=this.containerClientRect,d=p.left,h=p.top,m=p.imgContainerWidth,v=p.imgContainerHeight,y=Object(F.default)(navigator.userAgent).Mobile?q:K,g=y.left,b=t[o];return T.a.createElement(U.default,null,T.a.createElement("div",{className:A()("ImageGallery",{"is-active":r}),onClick:this.handleClick},T.a.createElement("div",{className:"ImageGallery-Content",style:{width:m+2*(H+V+g)+"px",height:v+"px",left:d+"px",top:h+"px"}},!c&&t.length>1&&T.a.createElement("a",{className:A()("ImageGallery-arrow-left",{"ImageGallery-arrow-disabled":0===o}),style:{left:g+"px"},onClick:function(){return e.handleCutImage(-1)}},T.a.createElement(D.ArrowLeft,{fill:"#fff",size:42})),T.a.createElement("div",{className:"ImageGallery-Inner",ref:function(t){e.scrollNode=t}},T.a.createElement("img",{ref:function(t){e.imgEl=t},src:Object(N.a)(b.url,"r"),className:A()("ImageGallery-Img",{"ImageGallery-transition":"transition"===s,"ImageGallery-fixed":"fixed"===s,"ImageGallery-CursorZoomIn":l}),style:{width:a,height:i,transform:u,opacity:f},onTransitionEnd:this.handleTransEnd,alt:"preview","data-rawwidth":b.width,"data-rawheight":b.height,"data-thumbnail":b.thumbnail,"data-original":Object(N.a)(b.url,"r"),"data-actualsrc":Object(N.a)(b.url,"b")})),!c&&t.length>1&&T.a.createElement("a",{className:A()("ImageGallery-arrow-right",{"ImageGallery-arrow-disabled":o>=t.length-1}),onClick:function(){return e.handleCutImage(1)},style:{right:g+"px"}},T.a.createElement(D.ArrowRight,{fill:"#fff",size:42}))),!c&&T.a.createElement("a",{className:"ImageGallery-close",onClick:this.setImageElAttr},T.a.createElement(D.Close,{fill:"#fff"})),c&&T.a.createElement(R.a,{img:c,onClose:this.handlePreviewImageClose})))}}]),t}(x.Component),y.propTypes={img:S.a.object.isRequired,data:S.a.object.isRequired,onClose:S.a.func.isRequired},g),G=W,Y=n(250),Z=(n(969),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),X=(w=b=function(e){function t(e){c(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setImageAttr=function(){var e=n.state,t=e.width,r=e.height;if(!t||!r){var o=n.divEl.getBoundingClientRect();t=t||o.width,r=r||o.width,n.setState({width:t,height:r})}var a=n.getBoundingClientRect({width:t,height:r});n.setState({imageWidth:a.width,imageHeight:a.height,imageTop:a.top,imageLeft:a.left})},n.getBoundingClientRect=function(e){var t=e.width,r=e.height,o=n.props.data,a={top:0,let:0,width:0,height:0},i=1;return o.width>o.height?(a.height=r,i=r/o.height,a.width=o.width*i,a.left="-"+(a.width-t)/2):(a.width=t,i=t/o.width,a.height=o.height*i,a.top="-"+(a.height-r)/2),a},n.handlePreviewImageOpen=function(e){var t=n.props.onPreviewImageOpen;e.persist(),t&&t(e)||n.setState({previewImage:n.imgWrapper.querySelector("img")})},n.handlePreviewImageClose=function(){n.setState({previewImage:null})},n.state={width:e.width||0,height:e.height||0,imageWidth:0,imageHeight:0,imageTop:0,imageLeft:0,previewImage:null},n}return l(t,e),Z(t,[{key:"componentDidMount",value:function(){this.setImageAttr()}},{key:"render",value:function(){var e=this,t=this.state,n=t.width,r=t.height,o=t.previewImage,a=t.imageWidth,i=t.imageHeight,s=t.imageTop,c=t.imageLeft,u=this.props,l=u.data,f=u.images,p=u.index,d=u.surplus,h=u.previewType,m=void 0===h?1:h,v=u.data.isGif,y=u.vague,g=u.previewTransitionType,b=void 0===g?0:g;return T.a.createElement("div",{onClick:this.handlePreviewImageOpen,className:"Thumbnail-Wrapper",ref:function(t){e.divEl=t},style:{width:n?n+"px":"",height:r?r+"px":""}},T.a.createElement("span",{ref:function(t){e.imgWrapper=t},className:A()({"Image-PreviewVague":y})},y?T.a.createElement(Y.a,{className:"Image-Preview",url:v?Object(N.a)(l.thumbnail,"xl"):Object(N.a)(l.url,"xl"),width:n,height:r,alt:"cover",thumbnail:v?Object(N.a)(l.thumbnail,"xl"):Object(N.a)(l.url,"xl"),"data-rawwidth":l.width,"data-rawheight":l.height,"data-thumbnail":l.thumbnail,"data-original":Object(N.a)(l.url,"r"),"data-actualsrc":Object(N.a)(l.url,"b")}):T.a.createElement("img",{className:"Image-Preview",src:v?l.thumbnail:Object(N.a)(l.url,"r"),width:a,height:i,style:{top:s+"px",left:c+"px"},alt:"preview","data-rawwidth":l.width,"data-rawheight":l.height,"data-thumbnail":l.thumbnail,"data-original":Object(N.a)(l.url,"r"),"data-actualsrc":Object(N.a)(l.url,"b")})),d>0&&T.a.createElement("em",{className:"Thumbnail-Surplus-Sign"},"+"+d),v&&T.a.createElement("em",{className:"Thumbnail-Gif-Sign"},"GIF"),o&&(1===m?T.a.createElement(G,{img:o,data:l,index:p,images:f,onClose:this.handlePreviewImageClose}):T.a.createElement(R.a,{img:o,isOriginalUrl:!y,transitionType:b,data:l,onClose:this.handlePreviewImageClose})))}}]),t}(x.Component),b.propTypes={width:S.a.number,height:S.a.number,index:S.a.number,surplus:S.a.number,data:S.a.object,images:S.a.array,onPreviewImageOpen:S.a.func},w),J=n(247),Q=n(763),$=n(142),ee=n(732),te=n(81),ne=n(727),re=n(739),oe=n(261),ae=n(297),ie=n(735),se=n(736),ce=n(6),ue=n.n(ce),le=n(36),fe=n(53),pe=n(13),de=(n(970),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),he={pin:"updatePinsReaction"},me=(_=Object(j.connect)(null,{updatePinsReaction:J.g}))((C=O=function(e){function t(){var e,n,r,o;f(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleToggleVote=r.context.authRequired(function(e){var t=r.props,n=t.reactioned,o=t.type,a=t.id,i=!n;ue.a.trackEvent(e.target,{action:i?"Upvote":"UnUpvote",element:"Button"});var s=he[o];r.props[s](a,i)},pe.C.vote),o=n,p(r,o)}return d(t,e),de(t,[{key:"render",value:function(){var e=this.props,t=e.reactioned,n=e.count,r=e.className,o=e.icon,a=void 0===o?"clap":o,i=e.disabled;return T.a.createElement(M.default,{className:A()("ReactionButton",{"is-active":t},r),onClick:this.handleToggleVote,disabled:i},T.a.createElement(I.a,{name:a,width:20,height:20}),Object(le.b)(n))}}]),t}(x.Component),O.contextTypes={authRequired:S.a.func},O.propTypes={type:S.a.oneOf(fe.ENTITY_TYPES).isRequired,id:S.a.oneOfType([S.a.number,S.a.string]).isRequired,icon:S.a.string,reactioned:S.a.bool,count:S.a.number},E=C))||E,ve=me,ye=n(745),ge=n(285),be=n(80);n(971);n.d(t,"a",function(){return Se});var we,_e,Ee,Oe,Ce,ke=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Se=(we=Object(be.a)(function(e){var t=e.trackCardShow;return{module:"PinItem",trackCardShow:void 0===t||t}}),_e=Object(j.connect)(function(){return{}},{deletePin:J.c}),we(Ee=_e((Ce=Oe=function(e){function t(e){h(this,t);var n=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={commentPattern:"fixed",commentsShown:!1,deleteModalShown:!1},n.openDeleteModal=function(){n.setState({deleteModalShown:!0})},n.closeDeleteModal=function(){n.setState({deleteModalShown:!1})},n.handlePositionStatusChange=function(e){n.setState({positionStatus:e})},n.handleDeletePin=function(){var e=n.context.authRequired,t=n.props,r=t.pin.id;return e((0,t.deletePin)(r),pe.C.deletePin)},n.handleCommentsShown=function(e,t){n.setState(t)},n.handleCommentsHide=function(){n.setState({commentsShown:!1})},n.renderQuoteContents=function(e,t){var n=e.content;return T.a.createElement("blockquote",{key:t,className:"PinItem-3lineBlockquote"},n)},n.renderLinkContents=function(e,t,n){var r=e.url,o=e.title,a=e.imageUrl,i=e.subtype;return"text"===n?T.a.createElement("a",{className:A()("link-text",{"PinItem-contentTitle":!!o,"PinItem-contentUrl":!o}),href:r,target:"_blank",key:t},T.a.createElement(I.a,{stroke:"#BBC1CC",width:16,height:16,name:"link"})," ",o||r):T.a.createElement("a",{className:"link-box",href:r,target:"_blank",key:t},T.a.createElement("span",{className:"content"},T.a.createElement("span",{className:A()("title",{"PinItem-contentTitle":!!o,"PinItem-contentUrl":!o})},o||r),o&&T.a.createElement("span",null,(r.match(/^https?:\/\/([^\/?#]+)(?:[\/?#]|$)/i)||[])[1],i&&T.a.createElement("span",{className:"subtype"},i))),a&&T.a.createElement("img",{className:"thumbnail",src:a,alt:"头像"}))},n.renderVideoContents=function(e,t){var r=e.videoId||e.id,o=e.thumbnail||e.coverInfo&&e.coverInfo.thumbnail,a={title:"",thumbnail:o,isLens:!0,id:r,isPlayable:!0,url:"https://www.zhihu.com/video/"+r};return T.a.createElement(ge.a,{key:t,isAppView:n.isAppView,data:a})},n.renderRepinContents=function(e){return e&&e.content&&e.content[0]?T.a.createElement("div",{className:A()("PinItem-RichText","PinItem-content-repin")},T.a.createElement("div",{className:"repin-text"},T.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.author.name+" :\n              "+("text"===e.content[0].type&&e.content[0].content)}})),n.renderPinContents(e.content,"text"),e.repin&&n.renderRepinContents(e.repin)):e&&e.isDeleted?T.a.createElement("div",{className:A()("PinItem-RichText","PinItem-content-repin")},T.a.createElement("div",{className:"repin-text"},e.deletedReason)):null},n.renderPinContents=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],r=e.filter(function(e){return e.url&&"image"===e.type}),o=[];return T.a.createElement("div",{className:A()("RichText","PinItem-remainContentRichText")},e.map(function(e,a){var i=e.type;return"quote"===i?n.renderQuoteContents(e,a):"link"===i?n.renderLinkContents(e,a,t):"video"===i?n.renderVideoContents(e,a):("image"===i&&o.length<4&&e.url&&o.push(T.a.createElement(X,{data:e,key:a,vague:!0,index:o.length,images:r,surplus:r.length>4&&3===o.length?r.length-4:0})),null)}),o.length>0&&T.a.createElement("div",{className:"Image-Wrapper-Preview"},o))},n.renderRemainContents=function(){var e=n.props.pin,t=e.id,r=e.created,o=e.updated,a=e.repin,i=e.content,s="//"+pe.j+"/pin/"+t;return T.a.createElement("div",null,n.renderPinContents(i),n.renderRepinContents(a),T.a.createElement(re.a,{href:s,created:r,updated:o}))},n.contentHTML=n.getContentHTML(e.pin),n}return v(t,e),ke(t,[{key:"componentWillReceiveProps",value:function(e){this.contentHTML=this.getContentHTML(e.pin)}},{key:"getContentHTML",value:function(e){if(!e||!e.content)return"";var t=e.content,n="";return"text"===t[0].type&&(n=t[0].content),n}},{key:"render",value:function(){var e=this.props,t=e.pin,n=e.pin,r=n.id,o=n.type,a=n.author,i=n.upvotedFollowees,s=void 0===i?[]:i,c=n.virtuals;c=void 0===c?{}:c;var u=c.reactionType,l=n.commentCount,f=n.reactionCount,p=n.adminClosedComment,d=e.actor,h=e.action,m=e.preset,v=e.lastreadTouchable,y=e.experimentAuthor,g=e.experimentTitle,b=this.state,w=b.positionStatus,_=b.deleteModalShown,E=b.expanded,O=this.context.currentUser,C=O&&O.urlToken===a.urlToken,k=d&&d.urlToken,S="plain"===m,x="like"===u,j=T.a.createElement(Q.a,{id:r,type:o,voteupCount:f,openable:!1,upvotedFollowees:s.filter(function(e){return k!==e.urlToken}),too:"voted"===h}),P=this.state,A=P.commentsShown,N=P.commentPattern,R=T.a.createElement($.a,{key:"authorInfo",author:a,preset:"plain",className:"PinItem-authorInfo"}),D=g&&!y,L=null;return S&&(L=y?T.a.createElement("div",null,R,j):j),T.a.createElement(ne.e,{data:t,meta:D&&R||S||T.a.createElement("div",null,T.a.createElement($.a,{key:"authorInfo",author:a,className:"PinItem-authorInfo"}),j),className:"PinItem",lastreadTouchable:v},T.a.createElement(re.b,{data:t,html:this.contentHTML,prefix:y&&T.a.createElement("b",null,T.a.createElement(te.a,{user:a,noBadge:!0}),"："),before:L,excerpt:this.contentHTML,expanded:E,onPositionStatusChange:this.handlePositionStatusChange,renderCanExpandExtra:this.renderRemainContents},T.a.createElement(ve,{reactioned:Boolean(x),count:f,id:r,type:"pin"}),T.a.createElement(ie.a,{onClick:this.handleCommentsShown,commentsShown:A,commentClosed:p,count:l}),T.a.createElement(ee.a,{id:r,type:"pin",authorName:a&&a.name,href:"//"+pe.j+"/pin/"+r,positionStatus:w}),(!O||!O.isOrg)&&T.a.createElement(ae.a,{id:r,type:"pin"}),!C&&T.a.createElement(oe.a,{type:"pin",id:r}),C&&T.a.createElement(M.default,{preset:"plain",onClick:this.openDeleteModal},T.a.createElement(I.a,{left:!0,name:"delete"}),"删除")),C&&T.a.createElement(ye.a,{title:"你确定要删除自己的想法吗？",shown:_,onCancel:this.closeDeleteModal,onSubmit:this.handleDeletePin}),T.a.createElement(se.a,{parent:t,commentPattern:N,shown:A,onClose:this.handleCommentsHide}))}}]),t}(x.Component),Oe.contextTypes={authRequired:S.a.func,currentUser:S.a.object},Ee=Ce))||Ee)||Ee)},902:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){var n=t.id,r=t.location,o=(e.banner[n]||{})[r]||{},a=o.banner,i=o.isDrained;return{isMobile:e.env.userAgent.Mobile,item:a,isDrained:i}}var s,c,u,l,f=n(5),p=n(1),d=n.n(p),h=n(0),m=n.n(h),v=n(6),y=n.n(v),g=n(10),b=n(3),w=n(242),_=n(259),E=n(80),O=n(49),C=n(254),k=n(903),S=(n(991),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),x=300,T=(s=Object(E.a)(function(e){var t=e.id,n=e.location,r=e.item;return r?{module:"ExternalAdItem",isAd:!0,content:{type:"ExternalAd",ad_info:JSON.parse(r.zaAdInfo)},extra:{link:{url:r.landingUrl}},trackCardShow:!0,id:t+"/"+n}:{trackCardShow:!0}}))((l=u=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.state={previousItem:null},a.handleImageLoad=function(){var e=a.props.item;if(e){var t=e.impressionTrackUrls,n=e.debugTracks;(t||[]).filter(Boolean).forEach(function(e){return Object(k.a)(e,{trackName:"impressionTrack",plugin:Object(k.b)(),debugTracks:n&&n.filter(Boolean)})}),y.a.trackEvent(a,{action:"Load"},{link:{url:e.landingUrl}}),a.props.onHeightChange&&setTimeout(a.props.onHeightChange,x)}},a.handleImageView=function(){var e=a.props.item;e&&e.viewTrackUrls.forEach(C.c)},a.handleClose=function(){var e=a.props,t=e.id,n=e.location,r=e.item,o=e.closeBanner;r&&(a.setState({previousItem:r}),o(t,n),Object(C.c)(r.closeTrackUrl),a.hideImage())},a.handleLog=function(e){var t=a.props.item;y.a.trackEvent(e.target,{action:"OpenUrl",url:location.href},{link:{url:t.landingUrl}})},i=n,o(a,i)}return a(t,e),S(t,[{key:"componentDidMount",value:function(){this.props.isDrained||this.load()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.id,r=t.location,o=e.id,a=e.location;n===o&&r===a||(clearTimeout(this.timeout),this.setState({previousItem:null}),this.load(e))}},{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.id,n=e.location,r=e.query,o=e.delay,a=e.loadBanner;clearTimeout(this.loadTimeout),o>0?this.loadTimeout=setTimeout(function(){a(t,n,r)},o):a(t,n,r)}},{key:"hideImage",value:function(){var e=this,t=this.card.offsetHeight;this.card.style.height=t+"px",this.timeout=setTimeout(function(){e.card.classList.add("Banner--hidden"),e.card.style.height=0,e.timeout=setTimeout(function(){e.setState({previousItem:null}),e.props.onHeightChange&&e.props.onHeightChange()},x)},17)}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,r=t.location,o=t.item,a=this.state.previousItem,i=a||o;if(!i)return null;var s=i.image,c=i.image2x,u=i.landingUrl;return m.a.createElement(_.default,{onViewed:this.handleImageView,id:n+"/"+r},m.a.createElement(w.c,{className:"Banner",onRef:function(t){e.card=t}},m.a.createElement(O.a,{className:"Banner-link",preset:"plain",a:!0,to:u,target:"_blank",onClick:this.handleLog},m.a.createElement("img",{className:"Banner-image",src:s,srcSet:c+" 2x",alt:"广告",onLoad:this.handleImageLoad,ref:function(t){e.image=t}})),m.a.createElement(b.default,{className:"Banner-close",preset:"plain",onClick:this.handleClose,"data-tooltip":"不再显示","data-tooltip-position":"bottom"},m.a.createElement(g.a,{name:"boldRemove"}))))}}]),t}(h.Component),u.propTypes={id:d.a.string.isRequired,location:d.a.string.isRequired,query:d.a.object,delay:d.a.number},u.defaultProps={id:""},c=l))||c,j=T,P=n(295),A=Object(f.connect)(i,{loadBanner:P.c,closeBanner:P.a})(j);t.a=A},903:function(e,t,n){"use strict";function r(){var e=document.createElement("div");e.className="adsbox",document.body.appendChild(e);var t="none"===getComputedStyle(e).display;return document.body.removeChild(e),t}function o(e){return new Promise(function(t,n){var r=new Image;r.addEventListener("load",t),r.addEventListener("error",n),r.src=e})}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.trackName,r=t.debugTracks,a=t.plugin,i=t.experiment,l=void 0===i||i;if(!e)return Promise.resolve(null);if(!l)return fetch(e,{mode:"no-cors"}).catch(u);var f=o(e);return r&&r.length?f.then(function(){return{status:200}}).catch(function(){return{status:600}}).then(function(t){return{et:c[n],etu:btoa(e),hst:t.status||601,plugin:a}}).then(function(e){if(e){var t=s.a.stringify(e);(r||[]).map(function(e){return e?o(t?e+(e.includes("?")?"&":"?")+t:e):null})}}):f}t.b=r,t.a=a;var i=n(30),s=n.n(i),c={impressionTrack:"third_imp"},u=function(){return null}},904:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,s,c,u,l=n(1),f=n.n(l),p=n(0),d=n.n(p),h=n(5),m=(n.n(h),n(242)),v=n(992),y=(n.n(v),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),g={unregistered:{url:"http://zhi.hu/BDXoI",qrcode:n(787)},home:{url:"http://zhi.hu/BDXoI",qrcode:n(787)},question:{url:"http://zhi.hu/BDXoI",qrcode:n(787)}},b=(i=Object(h.connect)(function(e){return{isTopnavbarQrcodeShown:"topnavbar_qrcode_show"===(e.env.experiment||{}).topnavbarQrcode}}))((u=c=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),y(t,[{key:"renderContent",value:function(){var e=this.props.type;return d.a.createElement(m.c,{className:"AppBanner"},d.a.createElement("a",{className:"AppBanner-link",href:g[e].url},d.a.createElement("div",{className:"AppBanner-layout"},d.a.createElement("img",{className:"AppBanner-qrcode",src:g[e].qrcode,alt:"QR Code of Downloading Zhihu App"}),d.a.createElement("div",{className:"AppBanner-content"},d.a.createElement("div",{className:"AppBanner-title"},"下载知乎客户端"),d.a.createElement("div",{className:"AppBanner-description"},"与世界分享知识、经验和见解")))))}},{key:"render",value:function(){var e=this.context.currentUser,t=this.props.isTopnavbarQrcodeShown;return e||t?null:this.renderContent()}}]),t}(p.Component),c.contextTypes={currentUser:f.a.object},c.propTypes={type:f.a.oneOf(Object.keys(g)),getSidebar:f.a.func},c.defaultProps={type:"unregistered",getSidebar:function(){return null}},s=u))||s;t.a=b},914:function(e,t,n){"use strict";var r=n(1028);e.exports=r},915:function(e,t,n){"use strict";function r(e,t){var n=e.getBlockMap(),r=e.getEntityMap(),o={},i=t.getStartKey(),s=t.getStartOffset(),c=n.get(i),u=a(r,c,s);u!==c&&(o[i]=u);var l=t.getEndKey(),f=t.getEndOffset(),p=n.get(l);i===l&&(p=u);var d=a(r,p,f);return d!==p&&(o[l]=d),Object.keys(o).length?e.merge({blockMap:n.merge(o),selectionAfter:t}):e.set("selectionAfter",t)}function o(e,t,n){var r;return s(e,function(e,t){return e.getEntity()===t.getEntity()},function(e){return e.getEntity()===t},function(e,t){e<=n&&t>=n&&(r={start:e,end:t})}),"object"!=typeof r&&c(!1),r}function a(e,t,n){var r=t.getCharacterList(),a=n>0?r.get(n-1):void 0,s=n<r.count()?r.get(n):void 0,c=a?a.getEntity():void 0,u=s?s.getEntity():void 0;if(u&&u===c){if("MUTABLE"!==e.__get(u).getMutability()){for(var l,f=o(r,u,n),p=f.start,d=f.end;p<d;)l=r.get(p),r=r.set(p,i.applyEntity(l,null)),p++;return t.set("characterList",r)}}return t}var i=n(738),s=n(795),c=n(729);e.exports=r},916:function(e,t,n){"use strict";function r(e,t,n){if(n===e.count())t.forEach(function(t){e=e.push(t)});else if(0===n)t.reverse().forEach(function(t){e=e.unshift(t)});else{var r=e.slice(0,n),o=e.slice(n);e=r.concat(t,o).toList()}return e}e.exports=r},917:function(e,t,n){"use strict";function r(e,t){var n=[],r=e.map(function(e){return e.getStyle()}).toList();return s(r,o,f,function(e,r){n.push(new d({start:e+t,end:r+t}))}),c(n)}function o(e,t){return e===t}var a=n(726),i=n(266),s=n(795),c=a.List,u=a.Repeat,l=a.Record,f=i.thatReturnsTrue,p={start:null,end:null},d=l(p),h={start:null,end:null,decoratorKey:null,leaves:null},m=l(h),v={generate:function(e,t,n){var a=t.getLength();if(!a)return c.of(new m({start:0,end:0,decoratorKey:null,leaves:c.of(new d({start:0,end:0}))}));var i=[],l=n?n.getDecorations(t,e):c(u(null,a)),p=t.getCharacterList();return s(l,o,f,function(e,t){i.push(new m({start:e,end:t,decoratorKey:l.get(e),leaves:r(p.slice(e,t).toList(),e)}))}),c(i)},getFingerprint:function(e){return e.map(function(e){var t=e.get("decoratorKey");return(null!==t?t+"."+(e.get("end")-e.get("start")):"")+"."+e.get("leaves").size}).join("-")}};e.exports=v},918:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(726),s=i.Record,c=s({type:"TOKEN",mutability:"IMMUTABLE",data:Object}),u=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.getType=function(){return this.get("type")},t.prototype.getMutability=function(){return this.get("mutability")},t.prototype.getData=function(){return this.get("data")},t}(c);e.exports=u},919:function(e,t,n){"use strict";function r(e){var t=p.exec(e);return null==t?null:t[0]}function o(e){var t=r(e);return null==t?u.NEUTRAL:d.exec(t)?u.RTL:u.LTR}function a(e,t){if(t=t||u.NEUTRAL,!e.length)return t;var n=o(e);return n===u.NEUTRAL?t:n}function i(e,t){return t||(t=u.getGlobalDir()),u.isStrong(t)||l(!1),a(e,t)}function s(e,t){return i(e,t)===u.LTR}function c(e,t){return i(e,t)===u.RTL}var u=n(837),l=n(729),f={L:"A-Za-zªµºÀ-ÖØ-öø-ƺƻƼ-ƿǀ-ǃǄ-ʓʔʕ-ʯʰ-ʸʻ-ˁː-ˑˠ-ˤˮͰ-ͳͶ-ͷͺͻ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҂Ҋ-ԯԱ-Ֆՙ՚-՟ա-և։ःऄ-हऻऽा-ीॉ-ौॎ-ॏॐक़-ॡ।-॥०-९॰ॱॲ-ঀং-ঃঅ-ঌএ-ঐও-নপ-রলশ-হঽা-ীে-ৈো-ৌৎৗড়-ঢ়য়-ৡ০-৯ৰ-ৱ৴-৹৺ਃਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਾ-ੀਖ਼-ੜਫ਼੦-੯ੲ-ੴઃઅ-ઍએ-ઑઓ-નપ-રલ-ળવ-હઽા-ીૉો-ૌૐૠ-ૡ૦-૯૰ଂ-ଃଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଵ-ହଽାୀେ-ୈୋ-ୌୗଡ଼-ଢ଼ୟ-ୡ୦-୯୰ୱ୲-୷ஃஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-ஹா-ிு-ூெ-ைொ-ௌௐௗ௦-௯௰-௲ఁ-ఃఅ-ఌఎ-ఐఒ-నప-హఽు-ౄౘ-ౙౠ-ౡ౦-౯౿ಂ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽಾಿೀ-ೄೆೇ-ೈೊ-ೋೕ-ೖೞೠ-ೡ೦-೯ೱ-ೲം-ഃഅ-ഌഎ-ഐഒ-ഺഽാ-ീെ-ൈൊ-ൌൎൗൠ-ൡ൦-൯൰-൵൹ൺ-ൿං-ඃඅ-ඖක-නඳ-රලව-ෆා-ෑෘ-ෟ෦-෯ෲ-ෳ෴ก-ะา-ำเ-ๅๆ๏๐-๙๚-๛ກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ະາ-ຳຽເ-ໄໆ໐-໙ໜ-ໟༀ༁-༃༄-༒༓༔༕-༗༚-༟༠-༩༪-༳༴༶༸༾-༿ཀ-ཇཉ-ཬཿ྅ྈ-ྌ྾-࿅࿇-࿌࿎-࿏࿐-࿔࿕-࿘࿙-࿚က-ဪါ-ာေးျ-ြဿ၀-၉၊-၏ၐ-ၕၖ-ၗၚ-ၝၡၢ-ၤၥ-ၦၧ-ၭၮ-ၰၵ-ႁႃ-ႄႇ-ႌႎႏ႐-႙ႚ-ႜ႞-႟Ⴀ-ჅჇჍა-ჺ჻ჼჽ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፠-፨፩-፼ᎀ-ᎏᎠ-Ᏼᐁ-ᙬ᙭-᙮ᙯ-ᙿᚁ-ᚚᚠ-ᛪ᛫-᛭ᛮ-ᛰᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱ᜵-᜶ᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳាើ-ៅះ-ៈ។-៖ៗ៘-៚ៜ០-៩᠐-᠙ᠠ-ᡂᡃᡄ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᤣ-ᤦᤩ-ᤫᤰ-ᤱᤳ-ᤸ᥆-᥏ᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧀᧁ-ᧇᧈ-ᧉ᧐-᧙᧚ᨀ-ᨖᨙ-ᨚ᨞-᨟ᨠ-ᩔᩕᩗᩡᩣ-ᩤᩭ-ᩲ᪀-᪉᪐-᪙᪠-᪦ᪧ᪨-᪭ᬄᬅ-ᬳᬵᬻᬽ-ᭁᭃ-᭄ᭅ-ᭋ᭐-᭙᭚-᭠᭡-᭪᭴-᭼ᮂᮃ-ᮠᮡᮦ-ᮧ᮪ᮮ-ᮯ᮰-᮹ᮺ-ᯥᯧᯪ-ᯬᯮ᯲-᯳᯼-᯿ᰀ-ᰣᰤ-ᰫᰴ-ᰵ᰻-᰿᱀-᱉ᱍ-ᱏ᱐-᱙ᱚ-ᱷᱸ-ᱽ᱾-᱿᳀-᳇᳓᳡ᳩ-ᳬᳮ-ᳱᳲ-ᳳᳵ-ᳶᴀ-ᴫᴬ-ᵪᵫ-ᵷᵸᵹ-ᶚᶛ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‎ⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℴℵ-ℸℹℼ-ℿⅅ-ⅉⅎ⅏Ⅰ-ↂↃ-ↄↅ-ↈ⌶-⍺⎕⒜-ⓩ⚬⠀-⣿Ⰰ-Ⱞⰰ-ⱞⱠ-ⱻⱼ-ⱽⱾ-ⳤⳫ-ⳮⳲ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵰ⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々〆〇〡-〩〮-〯〱-〵〸-〺〻〼ぁ-ゖゝ-ゞゟァ-ヺー-ヾヿㄅ-ㄭㄱ-ㆎ㆐-㆑㆒-㆕㆖-㆟ㆠ-ㆺㇰ-ㇿ㈀-㈜㈠-㈩㈪-㉇㉈-㉏㉠-㉻㉿㊀-㊉㊊-㊰㋀-㋋㋐-㋾㌀-㍶㍻-㏝㏠-㏾㐀-䶵一-鿌ꀀ-ꀔꀕꀖ-ꒌꓐ-ꓷꓸ-ꓽ꓾-꓿ꔀ-ꘋꘌꘐ-ꘟ꘠-꘩ꘪ-ꘫꙀ-ꙭꙮꚀ-ꚛꚜ-ꚝꚠ-ꛥꛦ-ꛯ꛲-꛷Ꜣ-ꝯꝰꝱ-ꞇ꞉-꞊Ꞌ-ꞎꞐ-ꞭꞰ-Ʇꟷꟸ-ꟹꟺꟻ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꠣ-ꠤꠧ꠰-꠵꠶-꠷ꡀ-ꡳꢀ-ꢁꢂ-ꢳꢴ-ꣃ꣎-꣏꣐-꣙ꣲ-ꣷ꣸-꣺ꣻ꤀-꤉ꤊ-ꤥ꤮-꤯ꤰ-ꥆꥒ-꥓꥟ꥠ-ꥼꦃꦄ-ꦲꦴ-ꦵꦺ-ꦻꦽ-꧀꧁-꧍ꧏ꧐-꧙꧞-꧟ꧠ-ꧤꧦꧧ-ꧯ꧰-꧹ꧺ-ꧾꨀ-ꨨꨯ-ꨰꨳ-ꨴꩀ-ꩂꩄ-ꩋꩍ꩐-꩙꩜-꩟ꩠ-ꩯꩰꩱ-ꩶ꩷-꩹ꩺꩻꩽꩾ-ꪯꪱꪵ-ꪶꪹ-ꪽꫀꫂꫛ-ꫜꫝ꫞-꫟ꫠ-ꫪꫫꫮ-ꫯ꫰-꫱ꫲꫳ-ꫴꫵꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚ꭛ꭜ-ꭟꭤ-ꭥꯀ-ꯢꯣ-ꯤꯦ-ꯧꯩ-ꯪ꯫꯬꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ-豈-舘並-龎ﬀ-ﬆﬓ-ﬗＡ-Ｚａ-ｚｦ-ｯｰｱ-ﾝﾞ-ﾟﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",R:"֐־׀׃׆׈-׏א-ת׫-ׯװ-ײ׳-״׵-׿߀-߉ߊ-ߪߴ-ߵߺ߻-߿ࠀ-ࠕࠚࠤࠨ࠮-࠯࠰-࠾࠿ࡀ-ࡘ࡜-࡝࡞࡟-࢟‏יִײַ-ﬨשׁ-זּ﬷טּ-לּ﬽מּ﬿נּ-סּ﭂ףּ-פּ﭅צּ-ﭏ",AL:"؈؋؍؛؜؝؞-؟ؠ-ؿـف-ي٭ٮ-ٯٱ-ۓ۔ەۥ-ۦۮ-ۯۺ-ۼ۽-۾ۿ܀-܍܎܏ܐܒ-ܯ݋-݌ݍ-ޥޱ޲-޿ࢠ-ࢲࢳ-ࣣﭐ-ﮱ﮲-﯁﯂-﯒ﯓ-ﴽ﵀-﵏ﵐ-ﶏ﶐-﶑ﶒ-ﷇ﷈-﷏ﷰ-ﷻ﷼﷾-﷿ﹰ-ﹴ﹵ﹶ-ﻼ﻽-﻾"},p=new RegExp("["+f.L+f.R+f.AL+"]"),d=new RegExp("["+f.R+f.AL+"]"),h={firstStrongChar:r,firstStrongCharDir:o,resolveBlockDir:a,getDirection:i,isDirectionLTR:s,isDirectionRTL:c};e.exports=h},920:function(e,t,n){"use strict";e.exports={BOLD:{fontWeight:"bold"},CODE:{fontFamily:"monospace",wordWrap:"break-word"},ITALIC:{fontStyle:"italic"},STRIKETHROUGH:{textDecoration:"line-through"},UNDERLINE:{textDecoration:"underline"}}},921:function(e,t,n){"use strict";function r(e){var t=e.getSelection(),n=t.getAnchorKey(),r=e.getBlockTree(n),o=t.getStartOffset(),a=!1;return r.some(function(e){return o===e.get("start")?(a=!0,!0):o<e.get("end")&&e.get("leaves").some(function(e){var t=e.get("start");return o===t&&(a=!0,!0)})}),a}e.exports=r},922:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){return e.getAnchorKey()===t||e.getFocusKey()===t}var s=n(144),c=s||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(1046),l=n(798),f=n(0),p=n(12),d=n(924),h=n(842),m=n(919),v=n(837),y=n(775),g=n(1057),b=n(843),w=n(1061),_=n(729),E=n(737),O=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.shouldComponentUpdate=function(e){return this.props.block!==e.block||this.props.tree!==e.tree||this.props.direction!==e.direction||i(e.selection,e.block.getKey())&&e.forceSelection},t.prototype.componentDidMount=function(){var e=this.props.selection,t=e.getEndKey();if(e.getHasFocus()&&t===this.props.block.getKey()){var n,r=p.findDOMNode(this),o=h.getScrollParent(r),a=b(o);if(o===window){var i=g(r);n=i.y+i.height-w().height,n>0&&window.scrollTo(a.x,a.y+n+10)}else{r instanceof HTMLElement||_(!1);n=r.offsetHeight+r.offsetTop-(o.offsetHeight+a.y),n>0&&d.setTop(o,d.getTop(o)+n+10)}}},t.prototype._renderChildren=function(){var e=this,t=this.props.block,n=t.getKey(),r=t.getText(),o=this.props.tree.size-1,a=i(this.props.selection,n);return this.props.tree.map(function(i,s){var p=i.get("leaves"),d=p.size-1,h=p.map(function(i,c){var p=l.encode(n,s,c),h=i.get("start"),m=i.get("end");return f.createElement(u,{key:p,offsetKey:p,block:t,start:h,selection:a?e.props.selection:void 0,forceSelection:e.props.forceSelection,text:r.slice(h,m),styleSet:t.getInlineStyleAt(h),customStyleMap:e.props.customStyleMap,customStyleFn:e.props.customStyleFn,isLast:s===o&&c===d})}).toArray(),y=i.get("decoratorKey");if(null==y)return h;if(!e.props.decorator)return h;var g=E(e.props.decorator),b=g.getComponentForKey(y);if(!b)return h;var w=g.getPropsForKey(y),_=l.encode(n,s,0),O=r.slice(p.first().get("start"),p.last().get("end")),C=v.getHTMLDirIfDifferent(m.getDirection(O),e.props.direction);return f.createElement(b,c({},w,{contentState:e.props.contentState,decoratedText:O,dir:C,key:_,entityKey:t.getEntityAt(i.get("start")),offsetKey:_}),h)}).toArray()},t.prototype.render=function(){var e=this.props,t=e.direction,n=e.offsetKey,r=y({"public/DraftStyleDefault/block":!0,"public/DraftStyleDefault/ltr":"LTR"===t,"public/DraftStyleDefault/rtl":"RTL"===t});return f.createElement("div",{"data-offset-key":n,className:r},this._renderChildren())},t}(f.Component);e.exports=O},923:function(e,t,n){e.exports=n(7)(123)},924:function(e,t,n){"use strict";function r(e,t){return!!t&&(e===t.documentElement||e===t.body)}var o={getTop:function(e){var t=e.ownerDocument;return r(e,t)?t.body.scrollTop||t.documentElement.scrollTop:e.scrollTop},setTop:function(e,t){var n=e.ownerDocument;r(e,n)?n.body.scrollTop=n.documentElement.scrollTop=t:e.scrollTop=t},getLeft:function(e){var t=e.ownerDocument;return r(e,t)?t.body.scrollLeft||t.documentElement.scrollLeft:e.scrollLeft},setLeft:function(e,t){var n=e.ownerDocument;r(e,n)?n.body.scrollLeft=n.documentElement.scrollLeft=t:e.scrollLeft=t}};e.exports=o},925:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){if("file"==e.kind)return e.getAsFile()}var a=n(1064),i=n(1065),s=n(266),c=new RegExp("\r\n","g"),u={"text/rtf":1,"text/html":1},l=function(){function e(t){r(this,e),this.data=t,this.types=t.types?i(t.types):[]}return e.prototype.isRichText=function(){return!(!this.getHTML()||!this.getText())||!this.isImage()&&this.types.some(function(e){return u[e]})},e.prototype.getText=function(){var e;return this.data.getData&&(this.types.length?-1!=this.types.indexOf("text/plain")&&(e=this.data.getData("text/plain")):e=this.data.getData("Text")),e?e.replace(c,"\n"):null},e.prototype.getHTML=function(){if(this.data.getData){if(!this.types.length)return this.data.getData("Text");if(-1!=this.types.indexOf("text/html"))return this.data.getData("text/html")}},e.prototype.isLink=function(){return this.types.some(function(e){return-1!=e.indexOf("Url")||-1!=e.indexOf("text/uri-list")||e.indexOf("text/x-moz-url")})},e.prototype.getLink=function(){if(this.data.getData){if(-1!=this.types.indexOf("text/x-moz-url")){return this.data.getData("text/x-moz-url").split("\n")[0]}return-1!=this.types.indexOf("text/uri-list")?this.data.getData("text/uri-list"):this.data.getData("url")}return null},e.prototype.isImage=function(){if(this.types.some(function(e){return-1!=e.indexOf("application/x-moz-file")}))return!0;for(var e=this.getFiles(),t=0;t<e.length;t++){var n=e[t].type;if(!a.isImage(n))return!1}return!0},e.prototype.getCount=function(){return this.data.hasOwnProperty("items")?this.data.items.length:this.data.hasOwnProperty("mozItemCount")?this.data.mozItemCount:this.data.files?this.data.files.length:null},e.prototype.getFiles=function(){return this.data.items?Array.prototype.slice.call(this.data.items).map(o).filter(s.thatReturnsArgument):this.data.files?Array.prototype.slice.call(this.data.files):[]},e.prototype.hasFiles=function(){return this.getFiles().length>0},e}();e.exports=l},926:function(e,t,n){"use strict";function r(e){if(e instanceof Element){var t=e.getAttribute("data-offset-key");if(t)return t;for(var n=0;n<e.childNodes.length;n++){var o=r(e.childNodes[n]);if(o)return o}}return null}e.exports=r},927:function(e,t,n){"use strict";(function(t){function r(e,t){var n=0,r=[];e.forEach(function(a){o(a,function(o){n++,o&&r.push(o.slice(0,c)),n==e.length&&t(r.join("\r"))})})}function o(e,n){if(!t.FileReader||e.type&&!(e.type in s))return void n("");if(""===e.type){var r="";return i.test(e.name)&&(r=e.name.replace(i,"")),void n(r)}var o=new FileReader;o.onload=function(){var e=o.result;"string"!=typeof e&&a(!1),n(e)},o.onerror=function(){n("")},o.readAsText(e)}var a=n(729),i=/\.textClipping$/,s={"text/plain":!0,"text/html":!0,"text/rtf":!0},c=5e3;e.exports=r}).call(t,n(19))},928:function(e,t,n){"use strict";function r(e,t,n,r,i){var s=a(e.getSelection()),c=o.decode(t),u=c.blockKey,l=e.getBlockTree(u).getIn([c.decoratorKey,"leaves",c.leafKey]),f=o.decode(r),p=f.blockKey,d=e.getBlockTree(p).getIn([f.decoratorKey,"leaves",f.leafKey]),h=l.get("start"),m=d.get("start"),v=l?h+n:null,y=d?m+i:null;if(s.getAnchorKey()===u&&s.getAnchorOffset()===v&&s.getFocusKey()===p&&s.getFocusOffset()===y)return s;var g=!1;if(u===p){var b=l.get("end"),w=d.get("end");g=m===h&&w===b?i<n:m<h}else{g=e.getCurrentContent().getBlockMap().keySeq().skipUntil(function(e){return e===u||e===p}).first()===p}return s.merge({anchorKey:u,anchorOffset:v,focusKey:p,focusOffset:y,isBackward:g})}var o=n(798),a=n(737);e.exports=r},929:function(e,t,n){"use strict";function r(e){var t=e.getSelection();return t.isCollapsed()?null:o(e.getCurrentContent(),t)}var o=n(796);e.exports=r},930:function(e,t,n){"use strict";function r(e){for(var t=e.cloneRange(),n=[],r=e.endContainer;null!=r;r=r.parentNode){var o=r===e.commonAncestorContainer;o?t.setStart(e.startContainer,e.startOffset):t.setStart(t.endContainer,0);var i=Array.from(t.getClientRects());if(n.push(i),o){var s;return n.reverse(),(s=[]).concat.apply(s,n)}t.setEndBefore(r)}a(!1)}var o=n(741),a=n(729),i=o.isBrowser("Chrome"),s=i?r:function(e){return Array.from(e.getClientRects())};e.exports=s},931:function(e,t,n){"use strict";function r(e,t,n,r,o,a){var s=n.nodeType===Node.TEXT_NODE,u=o.nodeType===Node.TEXT_NODE;if(s&&u)return{selectionState:l(e,p(c(n)),r,p(c(o)),a),needsRecovery:!1};var f=null,d=null,h=!0;return s?(f={key:p(c(n)),offset:r},d=i(t,o,a)):u?(d={key:p(c(o)),offset:a},f=i(t,n,r)):(f=i(t,n,r),d=i(t,o,a),n===o&&r===a&&(h=!!n.firstChild&&"BR"!==n.firstChild.nodeName)),{selectionState:l(e,f.key,f.offset,d.key,d.offset),needsRecovery:h}}function o(e){for(;e.firstChild&&u(e.firstChild);)e=e.firstChild;return e}function a(e){for(;e.lastChild&&u(e.lastChild);)e=e.lastChild;return e}function i(e,t,n){var r=t,i=c(r);if(null!=i||e&&(e===r||e.firstChild===r)||f(!1),e===r&&(r=r.firstChild,r instanceof Element&&"true"===r.getAttribute("data-contents")||f(!1),n>0&&(n=r.childNodes.length)),0===n){var l=null;if(null!=i)l=i;else{var d=o(r);l=p(u(d))}return{key:l,offset:0}}var h=r.childNodes[n-1],m=null,v=null;if(u(h)){var y=a(h);m=p(u(y)),v=s(y)}else m=p(i),v=s(h);return{key:m,offset:v}}function s(e){var t=e.textContent;return"\n"===t?0:t.length}var c=n(844),u=n(926),l=n(928),f=n(729),p=n(737);e.exports=r},932:function(e,t,n){"use strict";function r(e,t){var n=t?l.exec(e):c.exec(e);return n?n[0]:e}var o=n(1083),a=o.getPunctuation(),i="\\s|(?![_])"+a,s="^(?:"+i+")*(?:['‘’]|(?!"+i+").)*(?:(?!"+i+").)",c=new RegExp(s),u="(?:(?!"+i+").)(?:['‘’]|(?!"+i+").)*(?:"+i+")*$",l=new RegExp(u),f={getBackward:function(e){return r(e,!0)},getForward:function(e){return r(e,!1)}};e.exports=f},933:function(e,t,n){"use strict";function r(e,t){var n,r=e.getSelection(),o=r.getStartKey(),a=r.getStartOffset(),i=e.getCurrentContent(),s=o;return t>i.getBlockForKey(o).getText().length-a?(s=i.getKeyAfter(o),n=0):n=a+t,r.merge({focusKey:s,focusOffset:n})}e.exports=r},934:function(e,t,n){"use strict";function r(){return{text:"",inlines:[],entities:[],blocks:[]}}function o(e){var t=new Array(1);return e&&(t[0]=e),{text:N,inlines:[M()],entities:t,blocks:[]}}function a(){return{text:"\n",inlines:[M()],entities:new Array(1),blocks:[]}}function i(e,t){return{text:"\r",inlines:[M()],entities:new Array(1),blocks:[{type:e,depth:Math.max(0,Math.min(R,t))}]}}function s(e,t){return"li"===e?"ol"===t?"ordered-list-item":"unordered-list-item":null}function c(e){var t=e.get("unstyled").element,n=k([]);return e.forEach(function(e){e.aliasedElements&&e.aliasedElements.forEach(function(e){n=n.add(e)}),n=n.add(e.element)}),n.filter(function(e){return e&&e!==t}).toArray().sort()}function u(e,t,n){for(var r=0;r<n.length;r++){var o=n[r](e,t);if(o)return o}return null}function l(e,t,n){var r=n.filter(function(t){return t.element===e||t.wrapper===e||t.aliasedElements&&t.aliasedElements.some(function(t){return t===e})}).keySeq().toSet().toArray().sort();switch(r.length){case 0:return"unstyled";case 1:return r[0];default:return u(e,t,[s])||"unstyled"}}function f(e,t,n){var r=q[e];if(r)n=n.add(r).toOrderedSet();else if(t instanceof HTMLElement){var o=t;n=n.withMutations(function(e){var t=o.style.fontWeight,n=o.style.fontStyle,r=o.style.textDecoration;z.indexOf(t)>=0?e.add("BOLD"):K.indexOf(t)>=0&&e.remove("BOLD"),"italic"===n?e.add("ITALIC"):"normal"===n&&e.remove("ITALIC"),"underline"===r&&e.add("UNDERLINE"),"line-through"===r&&e.add("STRIKETHROUGH"),"none"===r&&(e.remove("UNDERLINE"),e.remove("STRIKETHROUGH"))}).toOrderedSet()}return n}function p(e,t){var n=e.text.slice(-1),r=t.text.slice(0,1);if("\r"===n&&"\r"===r&&(e.text=e.text.slice(0,-1),e.inlines.pop(),e.entities.pop(),e.blocks.pop()),"\r"===n){if(t.text===N||"\n"===t.text)return e;r!==N&&"\n"!==r||(t.text=t.text.slice(1),t.inlines.shift(),t.entities.shift())}return{text:e.text+t.text,inlines:e.inlines.concat(t.inlines),entities:e.entities.concat(t.entities),blocks:e.blocks.concat(t.blocks)}}function d(e,t){return t.some(function(t){return-1!==e.indexOf("<"+t)})}function h(e){e instanceof HTMLAnchorElement||j(!1);var t=e.protocol;return"http:"===t||"https:"===t||"mailto:"===t}function m(e,t,n,s,c,u,d,v,y){var b=t.nodeName.toLowerCase(),w=!1,_="unstyled",O=g,C=e;if("#text"===b){var k=t.textContent;return""===k.trim()&&"pre"!==c?{chunk:o(y),entityMap:e}:("pre"!==c&&(k=k.replace(L,N)),g=b,{chunk:{text:k,inlines:Array(k.length).fill(n),entities:Array(k.length).fill(y),blocks:[]},entityMap:e})}if(g=b,"br"===b)return"br"!==O||c&&"unstyled"!==l(c,s,v)?{chunk:a(),entityMap:e}:{chunk:i("unstyled",d),entityMap:e};if("img"===b&&t instanceof HTMLImageElement&&t.attributes.getNamedItem("src")&&t.attributes.getNamedItem("src").value){var x=t,T={};V.forEach(function(e){var t=x.getAttribute(e);t&&(T[e]=t)}),t.textContent="📷",y=E.__create("IMAGE","MUTABLE",T||{})}var j=r(),P=null;n=f(b,t,n),"ul"!==b&&"ol"!==b||(s&&(d+=1),s=b),c||-1===u.indexOf(b)?s&&"li"===c&&"li"===b&&(j=i(l(b,s,v),d),c=b,w=!0,_="ul"===s?"unordered-list-item":"ordered-list-item"):(j=i(l(b,s,v),d),c=b,w=!0);var A=t.firstChild;null!=A&&(b=A.nodeName.toLowerCase());for(var I=null;A;){A instanceof HTMLAnchorElement&&A.href&&h(A)?function(){var e=A,t={};H.forEach(function(n){var r=e.getAttribute(n);r&&(t[n]=r)}),t.url=new S(e.href).toString(),I=E.__create("LINK","MUTABLE",t||{})}():I=void 0;var M=m(C,A,n,s,c,u,d,v,I||y),R=M.chunk,D=M.entityMap;P=R,C=D,j=p(j,P);var F=A.nextSibling;F&&u.indexOf(b)>=0&&c&&(j=p(j,a())),F&&(b=F.nodeName.toLowerCase()),A=F}return w&&(j=p(j,i(_,d))),{chunk:j,entityMap:C}}function v(e,t,n,r){e=e.trim().replace(D,"").replace(F,N).replace(U,"").replace(B,"");var o=c(n),a=t(e);if(!a)return null;g=null;var i=d(e,o)?o:["div"],s=m(r,a,M(),"ul",null,i,-1,n),u=s.chunk,l=s.entityMap;return 0===u.text.indexOf("\r")&&(u={text:u.text.slice(1),inlines:u.inlines.slice(1),entities:u.entities.slice(1),blocks:u.blocks}),"\r"===u.text.slice(-1)&&(u.text=u.text.slice(0,-1),u.inlines=u.inlines.slice(0,-1),u.entities=u.entities.slice(0,-1),u.blocks.pop()),0===u.blocks.length&&u.blocks.push({type:"unstyled",depth:0}),u.text.split("\r").length===u.blocks.length+1&&u.blocks.unshift({type:"unstyled",depth:0}),{chunk:u,entityMap:l}}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_,r=v(e,t,n,E);if(null==r)return null;var o=r.chunk,a=r.entityMap,i=0;return{contentBlocks:o.text.split("\r").map(function(e,t){e=A(e);var n=i+e.length,r=P(o).inlines.slice(i,n),a=P(o).entities.slice(i,n),s=I(r.map(function(e,t){var n={style:e,entity:null};return a[t]&&(n.entity=a[t]),b.create(n)}));return i=n+1,new w({key:x(),type:P(o).blocks[t].type,depth:P(o).blocks[t].depth,text:e,characterList:s})}),entityMap:a}}var g,b=n(738),w=n(753),_=n(838),E=n(797),O=n(726),C=n(726),k=C.Set,S=n(1094),x=n(740),T=n(935),j=n(729),P=n(737),A=n(836),I=O.List,M=O.OrderedSet,N=" ",R=4,D=new RegExp("\r","g"),L=new RegExp("\n","g"),F=new RegExp("&nbsp;","g"),U=new RegExp("&#13;?","g"),B=new RegExp("&#8203;?","g"),z=["bold","bolder","500","600","700","800","900"],K=["light","lighter","100","200","300","400"],q={b:"BOLD",code:"CODE",del:"STRIKETHROUGH",em:"ITALIC",i:"ITALIC",s:"STRIKETHROUGH",strike:"STRIKETHROUGH",strong:"BOLD",u:"UNDERLINE"},H=["className","href","rel","target","title"],V=["alt","className","height","src","width"];e.exports=y},935:function(e,t,n){"use strict";function r(e){var t,n=null;return!i&&document.implementation&&document.implementation.createHTMLDocument&&(t=document.implementation.createHTMLDocument("foo"),t.documentElement||a(!1),t.documentElement.innerHTML=e,n=t.getElementsByTagName("body")[0]),n}var o=n(741),a=n(729),i=o.isBrowser("IE <= 9");e.exports=r},936:function(e,t,n){"use strict";var r=n(733),o=n(730),a=(n(774),n(1095)),i=n(737),s={currentBlockContainsLink:function(e){var t=e.getSelection(),n=e.getCurrentContent(),r=n.getEntityMap();return n.getBlockForKey(t.getAnchorKey()).getCharacterList().slice(t.getStartOffset(),t.getEndOffset()).some(function(e){var t=e.getEntity();return!!t&&"LINK"===r.__get(t).getType()})},getCurrentBlockType:function(e){var t=e.getSelection();return e.getCurrentContent().getBlockForKey(t.getStartKey()).getType()},getDataObjectForLinkURL:function(e){return{url:e.toString()}},handleKeyCommand:function(e,t){switch(t){case"bold":return s.toggleInlineStyle(e,"BOLD");case"italic":return s.toggleInlineStyle(e,"ITALIC");case"underline":return s.toggleInlineStyle(e,"UNDERLINE");case"code":return s.toggleCode(e);case"backspace":case"backspace-word":case"backspace-to-start-of-line":return s.onBackspace(e);case"delete":case"delete-word":case"delete-to-end-of-block":return s.onDelete(e);default:return null}},insertSoftNewline:function(e){var t=r.insertText(e.getCurrentContent(),e.getSelection(),"\n",e.getCurrentInlineStyle(),null),n=o.push(e,t,"insert-characters");return o.forceSelection(n,t.getSelectionAfter())},onBackspace:function(e){var t=e.getSelection();if(!t.isCollapsed()||t.getAnchorOffset()||t.getFocusOffset())return null;var n=e.getCurrentContent(),r=t.getStartKey(),a=n.getBlockBefore(r);if(a&&"atomic"===a.getType()){var i=n.getBlockMap().delete(a.getKey()),c=n.merge({blockMap:i,selectionAfter:t});if(c!==n)return o.push(e,c,"remove-range")}var u=s.tryToRemoveBlockStyle(e);return u?o.push(e,u,"change-block-type"):null},onDelete:function(e){var t=e.getSelection();if(!t.isCollapsed())return null;var n=e.getCurrentContent(),a=t.getStartKey(),i=n.getBlockForKey(a),s=i.getLength();if(t.getStartOffset()<s)return null;var c=n.getBlockAfter(a);if(!c||"atomic"!==c.getType())return null;var u=t.merge({focusKey:c.getKey(),focusOffset:c.getLength()}),l=r.removeRange(n,u,"forward");return l!==n?o.push(e,l,"remove-range"):null},onTab:function(e,t,n){var r=t.getSelection(),i=r.getAnchorKey();if(i!==r.getFocusKey())return t;var s=t.getCurrentContent(),c=s.getBlockForKey(i),u=c.getType();if("unordered-list-item"!==u&&"ordered-list-item"!==u)return t;e.preventDefault();var l=s.getBlockBefore(i);if(!l)return t;var f=l.getType();if("unordered-list-item"!==f&&"ordered-list-item"!==f)return t;var p=c.getDepth();if(!e.shiftKey&&p===n)return t;n=Math.min(l.getDepth()+1,n);var d=a(s,r,e.shiftKey?-1:1,n);return o.push(t,d,"adjust-depth")},toggleBlockType:function(e,t){var n=e.getSelection(),a=n.getStartKey(),s=n.getEndKey(),c=e.getCurrentContent(),u=n;if(a!==s&&0===n.getEndOffset()){var l=i(c.getBlockBefore(s));s=l.getKey(),u=u.merge({anchorKey:a,anchorOffset:n.getStartOffset(),focusKey:s,focusOffset:l.getLength(),isBackward:!1})}if(c.getBlockMap().skipWhile(function(e,t){return t!==a}).reverse().skipWhile(function(e,t){return t!==s}).some(function(e){return"atomic"===e.getType()}))return e;var f=c.getBlockForKey(a).getType()===t?"unstyled":t;return o.push(e,r.setBlockType(c,u,f),"change-block-type")},toggleCode:function(e){var t=e.getSelection(),n=t.getAnchorKey(),r=t.getFocusKey();return t.isCollapsed()||n!==r?s.toggleBlockType(e,"code-block"):s.toggleInlineStyle(e,"CODE")},toggleInlineStyle:function(e,t){var n=e.getSelection(),a=e.getCurrentInlineStyle();if(n.isCollapsed())return o.setInlineStyleOverride(e,a.has(t)?a.remove(t):a.add(t));var i,s=e.getCurrentContent();return i=a.has(t)?r.removeInlineStyle(s,n,t):r.applyInlineStyle(s,n,t),o.push(e,i,"change-inline-style")},toggleLink:function(e,t,n){var a=r.applyEntity(e.getCurrentContent(),t,n);return o.push(e,a,"apply-entity")},tryToRemoveBlockStyle:function(e){var t=e.getSelection(),n=t.getAnchorOffset();if(t.isCollapsed()&&0===n){var o=t.getAnchorKey(),a=e.getCurrentContent(),i=a.getBlockForKey(o);if(i.getLength()>0)return null;var s=i.getType(),c=a.getBlockBefore(o);if("code-block"===s&&c&&"code-block"===c.getType())return null;if("unstyled"!==s)return r.setBlockType(a,t,"unstyled")}return null}};e.exports=s},937:function(e,t,n){"use strict";function r(e){return f&&e.altKey||m(e)}function o(e){return h(e)?e.shiftKey?"redo":"undo":null}function a(e){return p&&e.shiftKey?null:r(e)?"delete-word":"delete"}function i(e){return h(e)&&f?"backspace-to-start-of-line":r(e)?"backspace-word":"backspace"}function s(e){switch(e.keyCode){case 66:return h(e)?"bold":null;case 68:return m(e)?"delete":null;case 72:return m(e)?"backspace":null;case 73:return h(e)?"italic":null;case 74:return h(e)?"code":null;case 75:return!p&&m(e)?"secondary-cut":null;case 77:case 79:return m(e)?"split-block":null;case 84:return f&&m(e)?"transpose-characters":null;case 85:return h(e)?"underline":null;case 87:return f&&m(e)?"backspace-word":null;case 89:return m(e)?p?"redo":"secondary-paste":null;case 90:return o(e)||null;case u.RETURN:return"split-block";case u.DELETE:return a(e);case u.BACKSPACE:return i(e);case u.LEFT:return d&&h(e)?"move-selection-to-start-of-block":null;case u.RIGHT:return d&&h(e)?"move-selection-to-end-of-block":null;default:return null}}var c=n(845),u=n(839),l=n(741),f=l.isPlatform("Mac OS X"),p=l.isPlatform("Windows"),d=f&&l.isBrowser("Firefox < 29"),h=c.hasCommandModifier,m=c.isCtrlKeyCommand;e.exports=s},938:function(e,t,n){"use strict";var r={stringify:function(e){return"_"+String(e)},unstringify:function(e){return e.slice(1)}};e.exports=r},939:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(c),l=function(e){return e.displayName||e.name||"Component"};t.default=function(e,t){var n,f;return f=n=function(n){function c(){return r(this,c),o(this,Object.getPrototypeOf(c).apply(this,arguments))}return a(c,n),s(c,[{key:"render",value:function(){return u.default.createElement(e,i({},this.props,t))}}]),c}(c.Component),n.displayName="Decorated("+l(e)+")",f}},940:function(e,t,n){"use strict";var r=n(728),o=(n.n(r),function(e,t,n){var o=e.getCurrentContent(),a=o.replaceEntityData(t,n),i=r.EditorState.set(r.EditorState.push(e,a,"apply-entity"),{lastChangeType:"apply-entity"});return r.EditorState.forceSelection(i,e.getSelection())});t.a=o},941:function(e,t,n){"use strict";function r(e,t,n){var r=o.Modifier.replaceWithFragment(e.getCurrentContent(),e.getSelection(),t);return o.EditorState.push(e,r.set("entityMap",n),"insert-fragment")}var o=n(728);n.n(o);t.a=r},942:function(e,t,n){"use strict";function r(e,t,n,r){var o=r-n;return t+n<=e.offset?Object.assign({},e,{offset:e.offset+o}):t>=e.offset&&t+n<=e.offset+e.length?Object.assign({},e,{length:e.length+o}):e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},943:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return u.default.isValidElement(e)&&u.default.Children.count(e.props.children)>0}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(void 0===e||null===e)return e;if("string"==typeof e)return e;if(u.default.isValidElement(e)){if(o(e))return f.default.renderToStaticMarkup(e);var n=(0,d.default)(e);if(null!==t){return n.start+t+n.end}return n}if((0,s.default)(e.hasOwnProperty("start")&&e.hasOwnProperty("end"),"convertToHTML: received conversion data without either an HTML string, ReactElement or an object with start/end tags"),null!==t){return e.start+t+e.end}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=n(82),s=r(i),c=n(0),u=r(c),l=n(267),f=r(l),p=n(847),d=r(p)},944:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return function(){var n=e.apply(void 0,arguments);return void 0!==n&&null!==n?n:t.apply(void 0,arguments)}}},945:function(e,t,n){"use strict";function r(e){var t=void 0;if("undefined"!=typeof DOMParser){t=(new DOMParser).parseFromString(e,"text/html"),null!==t&&null!==t.body||(t=o(e))}else t=o(e);return t.body}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=function(e){var t=document.implementation.createHTMLDocument("");return t.documentElement.innerHTML=e,t}},946:function(e,t,n){"use strict";var r=n(1133),o=n.n(r),a=n(1139),i=n.n(a),s=o()();s.tlds(i.a),t.a=s},947:function(e,t,n){"use strict";var r=n(728),o=(n.n(r),n(940)),a=function(e,t,n,a,i){var s=e.getCurrentContent(),c=e.getSelection(),u=i||c.focusKey,l=t||n.url,f=s,p=e,d=s.getEntity(a);if(!d||"link"!==d.type.toLowerCase())return e;var h=s.getBlockForKey(u);if(!h.getLength())return e;n&&(p=Object(o.a)(p,a,n),f=p.getCurrentContent());var m="",v=void 0,y=void 0;h.findEntityRanges(function(e){return e.getEntity()===a},function(e,t){v=e,y=t,m=h.getText().slice(e,t)});var g=void 0;l!==m&&(g=r.SelectionState.createEmpty(u).merge({anchorOffset:v,focusOffset:y}),f=r.Modifier.replaceText(f,g,l,null,a),y=v+l.length,v=y,g=g.merge({anchorOffset:v,focusOffset:y}),p=r.EditorState.push(p,f,"insert-characters"));var b=g&&g.focusKey===c.focusKey;return r.EditorState.forceSelection(p,b?g:c)};t.a=a},948:function(e,t,n){var r=n(1148);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},949:function(e,t,n){var r=n(778),o=n(777).document,a=r(o)&&r(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},950:function(e,t,n){var r=n(761),o=n(802),a=n(1151);e.exports=n(762)?Object.defineProperties:function(e,t){o(e);for(var n,i=a(t),s=i.length,c=0;s>c;)r.f(e,n=i[c++],t[n]);return e}},951:function(e,t,n){var r=n(1153),o=n(850);e.exports=function(e){return r(o(e))}},952:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},953:function(e,t,n){var r=n(851),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},954:function(e,t,n){var r=n(777),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return o[e]||(o[e]={})}},955:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},956:function(e,t,n){var r=n(761).f,o=n(779),a=n(755)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,a)&&r(e,a,{configurable:!0,value:t})}},957:function(e,t,n){var r=n(850);e.exports=function(e){return Object(r(e))}},963:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,s,c,u,l,f=n(1),p=n.n(f),d=n(5),h=(n.n(d),n(0)),m=n.n(h),v=n(3),y=n(29),g=n(48),b=n.n(g),w=n(11),_=n(55),E=n(243),O=n(36),C=n(727),k=n(898),S=n(40),x=n(244),T=n(732),j=n(80),P=n(1194),A=(n.n(P),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),I=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),M=(i=Object(j.a)(function(e){var t=e.column,n=e.trackCardShow,r=void 0===n||n;return{module:"ColumnItem",card:{content:{type:"Column",token:t.id,item_num:t.articlesCount,follower_num:t.followers,publish_timestamp:1e3*t.updated,author_member_hash_id:(t.author||{}).id}},trackCardShow:r}}),s=Object(d.connect)(null,{fetchQuitColumn:S.b}),i(c=s((l=u=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.state={quitColumn:!1},a.onClose=function(){a.setState({quitColumn:!1})},a.handleQuitButton=function(){a.setState({quitColumn:!0})},a.handleQuitColumn=function(e,t){a.props.fetchQuitColumn(e,t),a.setState({quitColumn:!1})},i=n,o(a,i)}return a(t,e),I(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,r=t.column,o=t.isProfile,a=t.column,i=a.id,s=a.type,c=a.intro,u=a.articlesCount,l=a.followers,f=a.lastArticle,p=a.isFollowing,d=a.author,h=t.urlToken,g=t.contributions,S=t.lastreadTouchable,j=this.context.currentUser,P=j||{},I=P.urlToken,M=h===I,N=this.state.quitColumn,R={id:i,type:s},D=f||{},L=D.updated,F="//zhuanlan.zhihu.com/"+i+(g?"?author="+g.urlToken:"");return m.a.createElement(C.e,{className:"ColumnItem",data:r,image:m.a.createElement(k.a,{column:r,avatar:!0,avatarProps:{large:!0},target:"_blank"}),title:m.a.createElement(k.a,{column:r,target:"_blank"}),meta:m.a.createElement("div",{className:"ColumnItem-meta"},c,n===C.c.default&&m.a.createElement(C.d,null,g&&m.a.createElement("a",{className:"ColumnItem-link",href:F,target:"_blank"},"发表 ",Object(O.b)(g.contributionsCount)," ","篇文章"),"共 "+Object(O.b)(u)+" 篇文章",Object(O.b)(l)+" 人关注"),!1),lastreadTouchable:S},n===C.c.interactive&&[m.a.createElement(C.b,{key:"cells",className:"ContentItem-counts"},m.a.createElement("div",null,m.a.createElement("span",null,"文章："),Object(O.b)(u)),m.a.createElement("div",null,m.a.createElement("span",null,"最后更新于："),Object(E.d)(L)||"暂未更新"),m.a.createElement("div",null,m.a.createElement("span",null,"关注者："),l)),m.a.createElement(C.a,{key:"actions"},m.a.createElement(x.a,A({},R,{isFollowing:p})),m.a.createElement(T.a,A({},R,{title:r.title,authorName:d&&d.name,href:F})))],o&&M&&m.a.createElement(_.a,{toggler:m.a.createElement(v.default,{preset:"plain",icon:w.Dots}),placement:"top",className:"ColumnItem-more",arrowed:!0},d.urlToken===g.urlToken&&m.a.createElement(v.default,{component:"a",preset:"plain",href:"//zhuanlan.zhihu.com/"+i+"/settings/authors",className:"ColumnItem-botton"},"管理专栏"),d.urlToken!==g.urlToken&&m.a.createElement(v.default,{preset:"plain",className:"ColumnItem-botton",onClick:this.handleQuitButton},"退出专栏")),m.a.createElement(b.a,{onClose:this.onClose,title:"确定退出该专栏吗？"},N&&m.a.createElement("div",{className:"ColumnAuthorsList-modal"},m.a.createElement(y.ModalButtonGroup,{direction:"horizontal"},m.a.createElement(v.default,{onClick:function(){return e.onClose}},"取消"),m.a.createElement(v.default,{className:"ColumnPosts-confirmButton",onClick:function(){return e.handleQuitColumn(g.urlToken,i)},color:"blue",preset:"primary"},"确定")))))}}]),t}(h.Component),u.propTypes={preset:p.a.oneOf(Object.values(C.c)),isProfile:p.a.bool},u.defaultProps={preset:C.c.default,isProfile:!1},u.contextTypes={currentUser:p.a.object},c=l))||c)||c);t.a=M},964:function(e,t){},965:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var o=n(0),a=n.n(o),i=n(2),s=n.n(i),c=n(51),u=n(966),l=(n.n(u),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),f=function(e){var t=e.className,n=e.children;return a.a.createElement("div",{className:s()(t,"LiveAvatar-column")},n)},p=function(e){var t=e.className,n=e.speakers,o=e.size;if(!n||!n.length)return null;var i=n.map(function(e){return e.avatarUrl}).slice(0,4),u=function(e){var t=e.className,n=e.src,o=r(e,["className","src"]);return a.a.createElement(c.default,l({url:n},o,{className:s()("LiveAvatar-img",t)}))},p=function(e){return a.a.createElement(u,l({},e,{size:o}))},d=function(e){var t=e.className,n=r(e,["className"]);return a.a.createElement(f,null,a.a.createElement(u,l({},n,{className:s()(t,"alignCenter"),size:o})))},h=function(e){return a.a.createElement(u,l({},e,{size:o/2-1}))},m=function(e){var t=e.imageUrls,n=r(e,["imageUrls"]);return a.a.createElement(f,null,t.map(function(e,t){return a.a.createElement(h,l({},n,{key:t,src:e}))}))},v=[];switch(i.length){case 1:v=a.a.createElement(p,{src:i[0]});break;case 2:v=i.map(function(e,t){return a.a.createElement(d,{key:t,src:e})});break;case 3:v=[a.a.createElement(d,{key:"1",src:i[0]}),a.a.createElement(m,{key:"2",imageUrls:i.slice(1,3)})];break;default:v=[i.slice(0,2),i.slice(2)].map(function(e,t){return a.a.createElement(m,{key:t,imageUrls:e})})}return a.a.createElement("div",{className:s()(t,"LiveAvatar-wrapper"),style:{width:o,height:o}},v)};t.a=p},966:function(e,t){},967:function(e,t){},968:function(e,t){},969:function(e,t){},970:function(e,t){},971:function(e,t){},991:function(e,t){},992:function(e,t){}});
//# sourceMappingURL=main.topstory-routes.9ed3796ff268470a3eec.js.map